/**
 * @license
 *
 * Copyright 2025 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var TR=Object.create;var yi=Object.defineProperty;var OR=Object.getOwnPropertyDescriptor;var kR=Object.getOwnPropertyNames;var VR=Object.getPrototypeOf,jR=Object.prototype.hasOwnProperty;var DR=(e,t,r)=>t in e?yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Km=(e,t)=>{for(var r in t)yi(e,r,{get:t[r],enumerable:!0})},NR=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of kR(t))!jR.call(e,n)&&n!==r&&yi(e,n,{get:()=>t[n],enumerable:!(o=OR(t,n))||o.enumerable});return e};var zt=(e,t,r)=>(r=e!=null?TR(VR(e)):{},NR(t||!e||!e.__esModule?yi(r,"default",{value:e,enumerable:!0}):r,e));var ye=(e,t,r)=>DR(e,typeof t!="symbol"?t+"":t,r);var tf=Ee(xa=>{"use strict";var Qi=xa&&xa.__assign||function(){return Qi=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Qi.apply(this,arguments)};Object.defineProperty(xa,"__esModule",{value:!0});var UF={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function BF(e){var t=Qi(Qi({},UF),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}xa.getSanitizedOptions=BF});var rf=Ee(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});function _F(e){var t=Math.random()*e;return Math.round(t)}Zu.fullJitter=_F});var of=Ee(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});function $F(e){return e}Xu.noJitter=$F});var nf=Ee(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var zF=rf(),WF=of();function HF(e){switch(e.jitter){case"full":return zF.fullJitter;case"none":default:return WF.noJitter}}el.JitterFactory=HF});var rl=Ee(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var GF=nf(),KF=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=GF.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,o=this.numOfDelayedAttempts,n=t*Math.pow(r,o);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();tl.Delay=KF});var af=Ee(Gt=>{"use strict";var YF=Gt&&Gt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a])},e(t,r)};return function(t,r){e(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),JF=Gt&&Gt.__awaiter||function(e,t,r,o){function n(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(o.next(l))}catch(m){i(m)}}function u(l){try{c(o.throw(l))}catch(m){i(m)}}function c(l){l.done?a(l.value):n(l.value).then(s,u)}c((o=o.apply(e,t||[])).next())})},ZF=Gt&&Gt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,n,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Gt,"__esModule",{value:!0});var XF=rl(),ev=function(e){YF(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return JF(this,void 0,void 0,function(){return ZF(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(XF.Delay);Gt.SkipFirstDelay=ev});var sf=Ee(Ra=>{"use strict";var tv=Ra&&Ra.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,n){o.__proto__=n}||function(o,n){for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a])},e(t,r)};return function(t,r){e(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(Ra,"__esModule",{value:!0});var rv=rl(),ov=function(e){tv(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rv.Delay);Ra.AlwaysDelay=ov});var cf=Ee(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var nv=af(),av=sf();function iv(e,t){var r=sv(e);return r.setAttemptNumber(t),r}ol.DelayFactory=iv;function sv(e){return e.delayFirstAttempt?new av.AlwaysDelay(e):new nv.SkipFirstDelay(e)}});var uf=Ee(oo=>{"use strict";var nl=oo&&oo.__awaiter||function(e,t,r,o){function n(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(o.next(l))}catch(m){i(m)}}function u(l){try{c(o.throw(l))}catch(m){i(m)}}function c(l){l.done?a(l.value):n(l.value).then(s,u)}c((o=o.apply(e,t||[])).next())})},al=oo&&oo.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,n,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],n=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(oo,"__esModule",{value:!0});var cv=tf(),uv=cf();function lv(e,t){return t===void 0&&(t={}),nl(this,void 0,void 0,function(){var r,o;return al(this,function(n){switch(n.label){case 0:return r=cv.getSanitizedOptions(t),o=new dv(e,r),[4,o.execute()];case 1:return[2,n.sent()]}})})}oo.backOff=lv;var dv=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return nl(this,void 0,void 0,function(){var t,r;return al(this,function(o){switch(o.label){case 0:if(this.attemptLimitReached)return[3,7];o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return o.sent(),[4,this.request()];case 3:return[2,o.sent()];case 4:return t=o.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=o.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return nl(this,void 0,void 0,function(){var t;return al(this,function(r){switch(r.label){case 0:return t=uv.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var Es=Ee((td,rd)=>{"use strict";(function(e,t){typeof td=="object"&&typeof rd<"u"?rd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=t()})(td,function(){"use strict";var e=1e3,t=6e4,r=36e5,o="millisecond",n="second",a="minute",i="hour",s="day",u="week",c="month",l="quarter",m="year",p="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var O=["th","st","nd","rd"],T=j%100;return"["+j+(O[(T-20)%10]||O[T]||O[0])+"]"}},C=function(j,O,T){var D=String(j);return!D||D.length>=O?j:""+Array(O+1-D.length).join(T)+j},v={s:C,z:function(j){var O=-j.utcOffset(),T=Math.abs(O),D=Math.floor(T/60),V=T%60;return(O<=0?"+":"-")+C(D,2,"0")+":"+C(V,2,"0")},m:function j(O,T){if(O.date()<T.date())return-j(T,O);var D=12*(T.year()-O.year())+(T.month()-O.month()),V=O.clone().add(D,c),Q=T-V<0,L=O.clone().add(D+(Q?-1:1),c);return+(-(D+(T-V)/(Q?V-L:L-V))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:c,y:m,w:u,d:s,D:p,h:i,m:a,s:n,ms:o,Q:l}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},h="en",x={};x[h]=S;var E="$isDayjsObject",P=function(j){return j instanceof q||!(!j||!j[E])},R=function j(O,T,D){var V;if(!O)return h;if(typeof O=="string"){var Q=O.toLowerCase();x[Q]&&(V=Q),T&&(x[Q]=T,V=Q);var L=O.split("-");if(!V&&L.length>1)return j(L[0])}else{var z=O.name;x[z]=O,V=z}return!D&&V&&(h=V),V||!D&&h},A=function(j,O){if(P(j))return j.clone();var T=typeof O=="object"?O:{};return T.date=j,T.args=arguments,new q(T)},b=v;b.l=R,b.i=P,b.w=function(j,O){return A(j,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var q=function(){function j(T){this.$L=R(T.locale,null,!0),this.parse(T),this.$x=this.$x||T.x||{},this[E]=!0}var O=j.prototype;return O.parse=function(T){this.$d=function(D){var V=D.date,Q=D.utc;if(V===null)return new Date(NaN);if(b.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var L=V.match(f);if(L){var z=L[2]-1||0,J=(L[7]||"0").substring(0,3);return Q?new Date(Date.UTC(L[1],z,L[3]||1,L[4]||0,L[5]||0,L[6]||0,J)):new Date(L[1],z,L[3]||1,L[4]||0,L[5]||0,L[6]||0,J)}}return new Date(V)}(T),this.init()},O.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},O.$utils=function(){return b},O.isValid=function(){return this.$d.toString()!==d},O.isSame=function(T,D){var V=A(T);return this.startOf(D)<=V&&V<=this.endOf(D)},O.isAfter=function(T,D){return A(T)<this.startOf(D)},O.isBefore=function(T,D){return this.endOf(D)<A(T)},O.$g=function(T,D,V){return b.u(T)?this[D]:this.set(V,T)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(T,D){var V=this,Q=!!b.u(D)||D,L=b.p(T),z=function(re,se){var de=b.w(V.$u?Date.UTC(V.$y,se,re):new Date(V.$y,se,re),V);return Q?de:de.endOf(s)},J=function(re,se){return b.w(V.toDate()[re].apply(V.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(se)),V)},te=this.$W,G=this.$M,Z=this.$D,H="set"+(this.$u?"UTC":"");switch(L){case m:return Q?z(1,0):z(31,11);case c:return Q?z(1,G):z(0,G+1);case u:var X=this.$locale().weekStart||0,ue=(te<X?te+7:te)-X;return z(Q?Z-ue:Z+(6-ue),G);case s:case p:return J(H+"Hours",0);case i:return J(H+"Minutes",1);case a:return J(H+"Seconds",2);case n:return J(H+"Milliseconds",3);default:return this.clone()}},O.endOf=function(T){return this.startOf(T,!1)},O.$set=function(T,D){var V,Q=b.p(T),L="set"+(this.$u?"UTC":""),z=(V={},V[s]=L+"Date",V[p]=L+"Date",V[c]=L+"Month",V[m]=L+"FullYear",V[i]=L+"Hours",V[a]=L+"Minutes",V[n]=L+"Seconds",V[o]=L+"Milliseconds",V)[Q],J=Q===s?this.$D+(D-this.$W):D;if(Q===c||Q===m){var te=this.clone().set(p,1);te.$d[z](J),te.init(),this.$d=te.set(p,Math.min(this.$D,te.daysInMonth())).$d}else z&&this.$d[z](J);return this.init(),this},O.set=function(T,D){return this.clone().$set(T,D)},O.get=function(T){return this[b.p(T)]()},O.add=function(T,D){var V,Q=this;T=Number(T);var L=b.p(D),z=function(G){var Z=A(Q);return b.w(Z.date(Z.date()+Math.round(G*T)),Q)};if(L===c)return this.set(c,this.$M+T);if(L===m)return this.set(m,this.$y+T);if(L===s)return z(1);if(L===u)return z(7);var J=(V={},V[a]=t,V[i]=r,V[n]=e,V)[L]||1,te=this.$d.getTime()+T*J;return b.w(te,this)},O.subtract=function(T,D){return this.add(-1*T,D)},O.format=function(T){var D=this,V=this.$locale();if(!this.isValid())return V.invalidDate||d;var Q=T||"YYYY-MM-DDTHH:mm:ssZ",L=b.z(this),z=this.$H,J=this.$m,te=this.$M,G=V.weekdays,Z=V.months,H=V.meridiem,X=function(se,de,Ue,Xe){return se&&(se[de]||se(D,Q))||Ue[de].slice(0,Xe)},ue=function(se){return b.s(z%12||12,se,"0")},re=H||function(se,de,Ue){var Xe=se<12?"AM":"PM";return Ue?Xe.toLowerCase():Xe};return Q.replace(y,function(se,de){return de||function(Ue){switch(Ue){case"YY":return String(D.$y).slice(-2);case"YYYY":return b.s(D.$y,4,"0");case"M":return te+1;case"MM":return b.s(te+1,2,"0");case"MMM":return X(V.monthsShort,te,Z,3);case"MMMM":return X(Z,te);case"D":return D.$D;case"DD":return b.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return X(V.weekdaysMin,D.$W,G,2);case"ddd":return X(V.weekdaysShort,D.$W,G,3);case"dddd":return G[D.$W];case"H":return String(z);case"HH":return b.s(z,2,"0");case"h":return ue(1);case"hh":return ue(2);case"a":return re(z,J,!0);case"A":return re(z,J,!1);case"m":return String(J);case"mm":return b.s(J,2,"0");case"s":return String(D.$s);case"ss":return b.s(D.$s,2,"0");case"SSS":return b.s(D.$ms,3,"0");case"Z":return L}return null}(se)||L.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(T,D,V){var Q,L=this,z=b.p(D),J=A(T),te=(J.utcOffset()-this.utcOffset())*t,G=this-J,Z=function(){return b.m(L,J)};switch(z){case m:Q=Z()/12;break;case c:Q=Z();break;case l:Q=Z()/3;break;case u:Q=(G-te)/6048e5;break;case s:Q=(G-te)/864e5;break;case i:Q=G/r;break;case a:Q=G/t;break;case n:Q=G/e;break;default:Q=G}return V?Q:b.a(Q)},O.daysInMonth=function(){return this.endOf(c).$D},O.$locale=function(){return x[this.$L]},O.locale=function(T,D){if(!T)return this.$L;var V=this.clone(),Q=R(T,D,!0);return Q&&(V.$L=Q),V},O.clone=function(){return b.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},j}(),M=q.prototype;return A.prototype=M,[["$ms",o],["$s",n],["$m",a],["$H",i],["$W",s],["$M",c],["$y",m],["$D",p]].forEach(function(j){M[j[1]]=function(O){return this.$g(O,j[0],j[1])}}),A.extend=function(j,O){return j.$i||(j(O,q,A),j.$i=!0),A},A.locale=R,A.isDayjs=P,A.unix=function(j){return A(1e3*j)},A.en=x[h],A.Ls=x,A.p={},A})});var ny=Ee((od,nd)=>{"use strict";(function(e,t){typeof od=="object"&&typeof nd<"u"?nd.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(od,function(){"use strict";var e="month",t="quarter";return function(r,o){var n=o.prototype;n.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var a=n.add;n.add=function(s,u){return s=Number(s),this.$utils().p(u)===t?this.add(3*s,e):a.bind(this)(s,u)};var i=n.startOf;n.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===t){var m=this.quarter()-1;return l?this.month(3*m).startOf(e).startOf("day"):this.month(3*m+2).endOf(e).endOf("day")}return i.bind(this)(s,u)}}})});var ay=Ee((ad,id)=>{"use strict";(function(e,t){typeof ad=="object"&&typeof id<"u"?id.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(ad,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,o=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,i={},s=function(f){return(f=+f)+(f>68?1900:2e3)},u=function(f){return function(y){this[f]=+y}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(f){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var S=y.match(/([+-]|\d\d)/g),C=60*S[1]+(+S[2]||0);return C===0?0:S[0]==="+"?-C:C}(f)}],l=function(f){var y=i[f];return y&&(y.indexOf?y:y.s.concat(y.f))},m=function(f,y){var S,C=i.meridiem;if(C){for(var v=1;v<=24;v+=1)if(f.indexOf(C(v,0,y))>-1){S=v>12;break}}else S=f===(y?"pm":"PM");return S},p={A:[a,function(f){this.afternoon=m(f,!1)}],a:[a,function(f){this.afternoon=m(f,!0)}],Q:[r,function(f){this.month=3*(f-1)+1}],S:[r,function(f){this.milliseconds=100*+f}],SS:[o,function(f){this.milliseconds=10*+f}],SSS:[/\d{3}/,function(f){this.milliseconds=+f}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[o,u("day")],Do:[a,function(f){var y=i.ordinal,S=f.match(/\d+/);if(this.day=S[0],y)for(var C=1;C<=31;C+=1)y(C).replace(/\[|\]/g,"")===f&&(this.day=C)}],w:[n,u("week")],ww:[o,u("week")],M:[n,u("month")],MM:[o,u("month")],MMM:[a,function(f){var y=l("months"),S=(l("monthsShort")||y.map(function(C){return C.slice(0,3)})).indexOf(f)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[a,function(f){var y=l("months").indexOf(f)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(f){this.year=s(f)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function d(f){var y,S;y=f,S=i&&i.formats;for(var C=(f=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,b,q){var M=q&&q.toUpperCase();return b||S[q]||e[q]||S[M].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(j,O,T){return O||T.slice(1)})})).match(t),v=C.length,h=0;h<v;h+=1){var x=C[h],E=p[x],P=E&&E[0],R=E&&E[1];C[h]=R?{regex:P,parser:R}:x.replace(/^\[|\]$/g,"")}return function(A){for(var b={},q=0,M=0;q<v;q+=1){var j=C[q];if(typeof j=="string")M+=j.length;else{var O=j.regex,T=j.parser,D=A.slice(M),V=O.exec(D)[0];T.call(b,V),A=A.replace(V,"")}}return function(Q){var L=Q.afternoon;if(L!==void 0){var z=Q.hours;L?z<12&&(Q.hours+=12):z===12&&(Q.hours=0),delete Q.afternoon}}(b),b}}return function(f,y,S){S.p.customParseFormat=!0,f&&f.parseTwoDigitYear&&(s=f.parseTwoDigitYear);var C=y.prototype,v=C.parse;C.parse=function(h){var x=h.date,E=h.utc,P=h.args;this.$u=E;var R=P[1];if(typeof R=="string"){var A=P[2]===!0,b=P[3]===!0,q=A||b,M=P[2];b&&(M=P[2]),i=this.$locale(),!A&&M&&(i=S.Ls[M]),this.$d=function(D,V,Q,L){try{if(["x","X"].indexOf(V)>-1)return new Date((V==="X"?1e3:1)*D);var z=d(V)(D),J=z.year,te=z.month,G=z.day,Z=z.hours,H=z.minutes,X=z.seconds,ue=z.milliseconds,re=z.zone,se=z.week,de=new Date,Ue=G||(J||te?1:de.getDate()),Xe=J||de.getFullYear(),ir=0;J&&!te||(ir=te>0?te-1:de.getMonth());var jo,Do=Z||0,oa=H||0,bu=X||0,wu=ue||0;return re?new Date(Date.UTC(Xe,ir,Ue,Do,oa,bu,wu+60*re.offset*1e3)):Q?new Date(Date.UTC(Xe,ir,Ue,Do,oa,bu,wu)):(jo=new Date(Xe,ir,Ue,Do,oa,bu,wu),se&&(jo=L(jo).week(se).toDate()),jo)}catch{return new Date("")}}(x,R,E,S),this.init(),M&&M!==!0&&(this.$L=this.locale(M).$L),q&&x!=this.format(R)&&(this.$d=new Date("")),i={}}else if(R instanceof Array)for(var j=R.length,O=1;O<=j;O+=1){P[1]=R[O-1];var T=S.apply(this,P);if(T.isValid()){this.$d=T.$d,this.$L=T.$L,this.init();break}O===j&&(this.$d=new Date(""))}else v.call(this,h)}}})});var JS=Ee((cm,um)=>{"use strict";(function(e,t){typeof cm=="object"&&typeof um<"u"?um.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_timezone=t()})(cm,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,o,n){var a,i=function(l,m,p){p===void 0&&(p={});var d=new Date(l),f=function(y,S){S===void 0&&(S={});var C=S.timeZoneName||"short",v=y+"|"+C,h=t[v];return h||(h=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:C}),t[v]=h),h}(m,p);return f.formatToParts(d)},s=function(l,m){for(var p=i(l,m),d=[],f=0;f<p.length;f+=1){var y=p[f],S=y.type,C=y.value,v=e[S];v>=0&&(d[v]=parseInt(C,10))}var h=d[3],x=h===24?0:h,E=d[0]+"-"+d[1]+"-"+d[2]+" "+x+":"+d[4]+":"+d[5]+":000",P=+l;return(n.utc(E).valueOf()-(P-=P%1e3))/6e4},u=o.prototype;u.tz=function(l,m){l===void 0&&(l=a);var p,d=this.utcOffset(),f=this.toDate(),y=f.toLocaleString("en-US",{timeZone:l}),S=Math.round((f-new Date(y))/1e3/60),C=15*-Math.round(f.getTimezoneOffset()/15)-S;if(!Number(C))p=this.utcOffset(0,m);else if(p=n(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(C,!0),m){var v=p.utcOffset();p=p.add(d-v,"minute")}return p.$x.$timezone=l,p},u.offsetName=function(l){var m=this.$x.$timezone||n.tz.guess(),p=i(this.valueOf(),m,{timeZoneName:l}).find(function(d){return d.type.toLowerCase()==="timezonename"});return p&&p.value};var c=u.startOf;u.startOf=function(l,m){if(!this.$x||!this.$x.$timezone)return c.call(this,l,m);var p=n(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(p,l,m).tz(this.$x.$timezone,!0)},n.tz=function(l,m,p){var d=p&&m,f=p||m||a,y=s(+n(),f);if(typeof l!="string")return n(l).tz(f);var S=function(x,E,P){var R=x-60*E*1e3,A=s(R,P);if(E===A)return[R,E];var b=s(R-=60*(A-E)*1e3,P);return A===b?[R,A]:[x-60*Math.min(A,b)*1e3,Math.max(A,b)]}(n.utc(l,d).valueOf(),y,f),C=S[0],v=S[1],h=n(C).utcOffset(v);return h.$x.$timezone=f,h},n.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},n.tz.setDefault=function(l){a=l}}})});var ZS=Ee((lm,dm)=>{"use strict";(function(e,t){typeof lm=="object"&&typeof dm<"u"?dm.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t()})(lm,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(o,n,a){var i=n.prototype;a.utc=function(d){var f={date:d,utc:!0,args:arguments};return new n(f)},i.utc=function(d){var f=a(this.toDate(),{locale:this.$L,utc:!0});return d?f.add(this.utcOffset(),e):f},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(d){d.utc&&(this.$u=!0),this.$utils().u(d.$offset)||(this.$offset=d.$offset),s.call(this,d)};var u=i.init;i.init=function(){if(this.$u){var d=this.$d;this.$y=d.getUTCFullYear(),this.$M=d.getUTCMonth(),this.$D=d.getUTCDate(),this.$W=d.getUTCDay(),this.$H=d.getUTCHours(),this.$m=d.getUTCMinutes(),this.$s=d.getUTCSeconds(),this.$ms=d.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(d,f){var y=this.$utils().u;if(y(d))return this.$u?0:y(this.$offset)?c.call(this):this.$offset;if(typeof d=="string"&&(d=function(h){h===void 0&&(h="");var x=h.match(t);if(!x)return null;var E=(""+x[0]).match(r)||["-",0,0],P=E[0],R=60*+E[1]+ +E[2];return R===0?0:P==="+"?R:-R}(d),d===null))return this;var S=Math.abs(d)<=16?60*d:d,C=this;if(f)return C.$offset=S,C.$u=d===0,C;if(d!==0){var v=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(S+v,e)).$offset=S,C.$x.$localOffset=v}else C=this.utc();return C};var l=i.format;i.format=function(d){var f=d||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,f)},i.valueOf=function(){var d=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*d},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var m=i.toDate;i.toDate=function(d){return d==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var p=i.diff;i.diff=function(d,f,y){if(d&&this.$u===d.$u)return p.call(this,d,f,y);var S=this.local(),C=a(d).local();return p.call(S,C,f,y)}}})});var mC=Ee((p3,dC)=>{"use strict";function nq(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}dC.exports=aq;function aq(e,t,r){var o=r&&r.stringify||nq,n=1;if(typeof e=="object"&&e!==null){var a=t.length+n;if(a===1)return e;var i=new Array(a);i[0]=o(e);for(var s=1;s<a;s++)i[s]=o(t[s]);return i.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-n,m=-1,p=e&&e.length||0,d=0;d<p;){if(e.charCodeAt(d)===37&&d+1<p){switch(m=m>-1?m:0,e.charCodeAt(d+1)){case 100:case 102:if(l>=u||t[l]==null)break;m<d&&(c+=e.slice(m,d)),c+=Number(t[l]),m=d+2,d++;break;case 105:if(l>=u||t[l]==null)break;m<d&&(c+=e.slice(m,d)),c+=Math.floor(Number(t[l])),m=d+2,d++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;m<d&&(c+=e.slice(m,d));var f=typeof t[l];if(f==="string"){c+="'"+t[l]+"'",m=d+2,d++;break}if(f==="function"){c+=t[l].name||"<anonymous>",m=d+2,d++;break}c+=o(t[l]),m=d+2,d++;break;case 115:if(l>=u)break;m<d&&(c+=e.slice(m,d)),c+=String(t[l]),m=d+2,d++;break;case 37:m<d&&(c+=e.slice(m,d)),c+="%",m=d+2,d++,l--;break}++l}++d}return m===-1?e:(m<p&&(c+=e.slice(m)),c)}});var SC=Ee((f3,zc)=>{"use strict";var pC=mC();zc.exports=ar;var si=xq().console||{},iq={mapHttpRequest:$c,mapHttpResponse:$c,wrapRequestSerializer:pm,wrapResponseSerializer:pm,wrapErrorSerializer:pm,req:$c,res:$c,err:gC,errWithCause:gC};function Wr(e,t){return e==="silent"?1/0:t.levels.values[e]}var ym=Symbol("pino.logFuncs"),fm=Symbol("pino.hierarchy"),sq={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function fC(e,t){let r={logger:t,parent:e[fm]};t[fm]=r}function cq(e,t,r){let o={};t.forEach(n=>{o[n]=r[n]?r[n]:si[n]||si[sq[n]||"log"]||Bn}),e[ym]=o}function uq(e,t){return Array.isArray(e)?e.filter(function(o){return o!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function ar(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||si;e.browser.write&&(e.browser.asObject=!0);let o=e.serializers||{},n=uq(e.browser.serialize,o),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let i=Object.keys(e.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(y){r[y]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let u=e.level||"info",c=Object.create(r);c.log||(c.log=Bn),cq(c,s,r),fC({},c),Object.defineProperty(c,"levelVal",{get:m}),Object.defineProperty(c,"level",{get:p,set:d});let l={transmit:t,serialize:n,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:s,timestamp:hq(e),messageKey:e.messageKey||"msg",onChild:e.onChild||Bn};c.levels=lq(e),c.level=u,c.isLevelEnabled=function(y){return this.levels.values[y]?this.levels.values[y]>=this.levels.values[this.level]:!1},c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Bn,c.serializers=o,c._serialize=n,c._stdErrSerialize=a,c.child=function(...y){return f.call(this,l,...y)},t&&(c._logEvent=gm());function m(){return Wr(this.level,this)}function p(){return this._level}function d(y){if(y!=="silent"&&!this.levels.values[y])throw Error("unknown level "+y);this._level=y,Po(this,l,c,"error"),Po(this,l,c,"fatal"),Po(this,l,c,"warn"),Po(this,l,c,"info"),Po(this,l,c,"debug"),Po(this,l,c,"trace"),i.forEach(S=>{Po(this,l,c,S)})}function f(y,S,C){if(!S)throw new Error("missing bindings for child Pino");C=C||{},n&&S.serializers&&(C.serializers=S.serializers);let v=C.serializers;if(n&&v){var h=Object.assign({},o,v),x=e.browser.serialize===!0?Object.keys(h):n;delete S.serializers,hm([S],x,h,this._stdErrSerialize)}function E(R){this._childLevel=(R._childLevel|0)+1,this.bindings=S,h&&(this.serializers=h,this._serialize=x),t&&(this._logEvent=gm([].concat(R._logEvent.bindings,S)))}E.prototype=this;let P=new E(this);return fC(this,P),P.child=function(...R){return f.call(this,y,...R)},P.level=C.level||this.level,y.onChild(P),P}return c}function lq(e){let t=e.customLevels||{},r=Object.assign({},ar.levels.values,t),o=Object.assign({},ar.levels.labels,dq(t));return{values:r,labels:o}}function dq(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}ar.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ar.stdSerializers=iq;ar.stdTimeFunctions=Object.assign({},{nullTime:yC,epochTime:hC,unixTime:Sq,isoTime:Cq});function mq(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[fm];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Po(e,t,r,o){if(Object.defineProperty(e,o,{value:Wr(e.level,r)>Wr(o,r)?Bn:r[ym][o],writable:!0,enumerable:!0,configurable:!0}),e[o]===Bn){if(!t.transmit)return;let a=t.transmit.level||e.level,i=Wr(a,r);if(Wr(o,r)<i)return}e[o]=fq(e,t,r,o);let n=mq(e);n.length!==0&&(e[o]=pq(n,e[o]))}function pq(e,t){return function(){return t.apply(this,[...e,...arguments])}}function fq(e,t,r,o){return function(n){return function(){let i=t.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===si?si:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];var l=!1;if(t.serialize&&(hm(s,this._serialize,this.serializers,this._stdErrSerialize),l=!0),t.asObject||t.formatters?n.call(u,...gq(this,o,s,i,t)):n.apply(u,s),t.transmit){let m=t.transmit.level||e._level,p=Wr(m,r),d=Wr(o,r);if(d<p)return;yq(this,{ts:i,methodLevel:o,methodValue:d,transmitLevel:m,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:Wr(e._level,r)},s,l)}}}(e[ym][o])}function gq(e,t,r,o,n){let{level:a,log:i=m=>m}=n.formatters||{},s=r.slice(),u=s[0],c={},l=(e._childLevel|0)+1;if(l<1&&(l=1),o&&(c.time=o),a){let m=a(t,e.levels.values[t]);Object.assign(c,m)}else c.level=e.levels.values[t];if(n.asObjectBindingsOnly){if(u!==null&&typeof u=="object")for(;l--&&typeof s[0]=="object";)Object.assign(c,s.shift());return[i(c),...s]}else{if(u!==null&&typeof u=="object"){for(;l--&&typeof s[0]=="object";)Object.assign(c,s.shift());u=s.length?pC(s.shift(),s):void 0}else typeof u=="string"&&(u=pC(s.shift(),s));return u!==void 0&&(c[n.messageKey]=u),[i(c)]}}function hm(e,t,r,o){for(let n in e)if(o&&e[n]instanceof Error)e[n]=ar.stdSerializers.err(e[n]);else if(typeof e[n]=="object"&&!Array.isArray(e[n])&&t)for(let a in e[n])t.indexOf(a)>-1&&a in r&&(e[n][a]=r[a](e[n][a]))}function yq(e,t,r,o=!1){let n=t.send,a=t.ts,i=t.methodLevel,s=t.methodValue,u=t.val,c=e._logEvent.bindings;o||hm(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),e._logEvent.level.label=i,e._logEvent.level.value=s,n(i,e._logEvent,u),e._logEvent=gm(c)}function gm(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function gC(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function hq(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?yC:hC}function $c(){return{}}function pm(e){return e}function Bn(){}function yC(){return!1}function hC(){return Date.now()}function Sq(){return Math.round(Date.now()/1e3)}function Cq(){return new Date(Date.now()).toISOString()}function xq(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}zc.exports.default=ar;zc.exports.pino=ar});var Zp={};Km(Zp,{ProductListing:()=>Gu,Search:()=>Hu});var Ym="coveo-headless-internal-state",U=Symbol.for(Ym),Jm=e=>new Proxy(e,{ownKeys(t){return Reflect.ownKeys(t).filter(r=>r!==U)},get(t,r,o){return typeof r=="symbol"&&r.description===Ym&&r!==U&&e.logger.warn(`You might be loading Headless twice. Please check your setup.
If you are trying to access the inner state... Don't`),Reflect.get(t,r,o)}});import{isNullOrUndefined as bF}from"../../bueno/v1.1.0/bueno.esm.js";function ve(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var MR=typeof Symbol=="function"&&Symbol.observable||"@@observable",Zm=MR,Iu=()=>Math.random().toString(36).substring(7).split("").join("."),QR={INIT:`@@redux/INIT${Iu()}`,REPLACE:`@@redux/REPLACE${Iu()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Iu()}`},hi=QR;function Rt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Eu(e,t,r){if(typeof e!="function")throw new Error(ve(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ve(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ve(1));return r(Eu)(e,t)}let o=e,n=t,a=new Map,i=a,s=0,u=!1;function c(){i===a&&(i=new Map,a.forEach((S,C)=>{i.set(C,S)}))}function l(){if(u)throw new Error(ve(3));return n}function m(S){if(typeof S!="function")throw new Error(ve(4));if(u)throw new Error(ve(5));let C=!0;c();let v=s++;return i.set(v,S),function(){if(C){if(u)throw new Error(ve(6));C=!1,c(),i.delete(v),a=null}}}function p(S){if(!Rt(S))throw new Error(ve(7));if(typeof S.type>"u")throw new Error(ve(8));if(typeof S.type!="string")throw new Error(ve(17));if(u)throw new Error(ve(9));try{u=!0,n=o(n,S)}finally{u=!1}return(a=i).forEach(v=>{v()}),S}function d(S){if(typeof S!="function")throw new Error(ve(10));o=S,p({type:hi.REPLACE})}function f(){let S=m;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(ve(11));function v(){let x=C;x.next&&x.next(l())}return v(),{unsubscribe:S(v)}},[Zm](){return this}}}return p({type:hi.INIT}),{dispatch:p,subscribe:m,getState:l,replaceReducer:d,[Zm]:f}}function LR(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:hi.INIT})>"u")throw new Error(ve(12));if(typeof r(void 0,{type:hi.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ve(13))})}function No(e){let t=Object.keys(e),r={};for(let i=0;i<t.length;i++){let s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}let o=Object.keys(r),n,a;try{LR(r)}catch(i){a=i}return function(s={},u){if(a)throw a;let c=!1,l={};for(let m=0;m<o.length;m++){let p=o[m],d=r[p],f=s[p],y=d(f,u);if(typeof y>"u"){let S=u&&u.type;throw new Error(ve(14))}l[p]=y,c=c||y!==f}return c=c||o.length!==Object.keys(s).length,c?l:s}}function Mo(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...o)=>t(r(...o)))}function Xm(...e){return t=>(r,o)=>{let n=t(r,o),a=()=>{throw new Error(ve(15))},i={getState:n.getState,dispatch:(u,...c)=>a(u,...c)},s=e.map(u=>u(i));return a=Mo(...s)(n.dispatch),{...n,dispatch:a}}}function Si(e){return Rt(e)&&"type"in e&&typeof e.type=="string"}var Qu=Symbol.for("immer-nothing"),na=Symbol.for("immer-draftable"),Be=Symbol.for("immer-state");function Ae(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Yr=Object.getPrototypeOf;function Ke(e){return!!e&&!!e[Be]}function _e(e){return e?np(e)||Array.isArray(e)||!!e[na]||!!e.constructor?.[na]||Qo(e)||la(e):!1}var UR=Object.prototype.constructor.toString();function np(e){if(!e||typeof e!="object")return!1;let t=Yr(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===UR}function Lu(e){return Ke(e)||Ae(15,e),e[Be].base_}function aa(e,t){Jr(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,o)=>t(o,r,e))}function Jr(e){let t=e[Be];return t?t.type_:Array.isArray(e)?1:Qo(e)?2:la(e)?3:0}function ia(e,t){return Jr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qu(e,t){return Jr(e)===2?e.get(t):e[t]}function ap(e,t,r){let o=Jr(e);o===2?e.set(t,r):o===3?e.add(r):e[t]=r}function BR(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Qo(e){return e instanceof Map}function la(e){return e instanceof Set}function Kr(e){return e.copy_||e.base_}function ku(e,t){if(Qo(e))return new Map(e);if(la(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=np(e);if(t===!0||t==="class_only"&&!r){let o=Object.getOwnPropertyDescriptors(e);delete o[Be];let n=Reflect.ownKeys(o);for(let a=0;a<n.length;a++){let i=n[a],s=o[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(o[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Yr(e),o)}else{let o=Yr(e);if(o!==null&&r)return{...e};let n=Object.create(o);return Object.assign(n,e)}}function Fi(e,t=!1){return vi(e)||Ke(e)||!_e(e)||(Jr(e)>1&&Object.defineProperties(e,{set:{value:Ci},add:{value:Ci},clear:{value:Ci},delete:{value:Ci}}),Object.freeze(e),t&&Object.values(e).forEach(r=>Fi(r,!0))),e}function Ci(){Ae(2)}function vi(e){return Object.isFrozen(e)}var Vu={};function Zr(e){let t=Vu[e];return t||Ae(0,e),t}function _R(e,t){Vu[e]||(Vu[e]=t)}var sa;function ip(){return sa}function $R(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ep(e,t){t&&(Zr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ju(e){Du(e),e.drafts_.forEach(zR),e.drafts_=null}function Du(e){e===sa&&(sa=e.parent_)}function tp(e){return sa=$R(sa,e)}function zR(e){let t=e[Be];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rp(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[Be].modified_&&(ju(t),Ae(4)),_e(e)&&(e=xi(t,e),t.parent_||Ri(t,e)),t.patches_&&Zr("Patches").generateReplacementPatches_(r[Be].base_,e,t.patches_,t.inversePatches_)):e=xi(t,r,[]),ju(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Qu?e:void 0}function xi(e,t,r){if(vi(t))return t;let o=t[Be];if(!o)return aa(t,(n,a)=>op(e,o,t,n,a,r)),t;if(o.scope_!==e)return t;if(!o.modified_)return Ri(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;let n=o.copy_,a=n,i=!1;o.type_===3&&(a=new Set(n),n.clear(),i=!0),aa(a,(s,u)=>op(e,o,n,s,u,r,i)),Ri(e,n,!1),r&&e.patches_&&Zr("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function op(e,t,r,o,n,a,i){if(Ke(n)){let s=a&&t&&t.type_!==3&&!ia(t.assigned_,o)?a.concat(o):void 0,u=xi(e,n,s);if(ap(r,o,u),Ke(u))e.canAutoFreeze_=!1;else return}else i&&r.add(n);if(_e(n)&&!vi(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xi(e,n),(!t||!t.scope_.parent_)&&typeof o!="symbol"&&(Qo(r)?r.has(o):Object.prototype.propertyIsEnumerable.call(r,o))&&Ri(e,n)}}function Ri(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fi(t,r)}function WR(e,t){let r=Array.isArray(e),o={type_:r?1:0,scope_:t?t.scope_:ip(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},n=o,a=Uu;r&&(n=[o],a=ca);let{revoke:i,proxy:s}=Proxy.revocable(n,a);return o.draft_=s,o.revoke_=i,s}var Uu={get(e,t){if(t===Be)return e;let r=Kr(e);if(!ia(r,t))return HR(e,r,t);let o=r[t];return e.finalized_||!_e(o)?o:o===Tu(e.base_,t)?(Ou(e),e.copy_[t]=Mu(o,e)):o},has(e,t){return t in Kr(e)},ownKeys(e){return Reflect.ownKeys(Kr(e))},set(e,t,r){let o=sp(Kr(e),t);if(o?.set)return o.set.call(e.draft_,r),!0;if(!e.modified_){let n=Tu(Kr(e),t),a=n?.[Be];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(BR(r,n)&&(r!==void 0||ia(e.base_,t)))return!0;Ou(e),Nu(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Tu(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ou(e),Nu(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Kr(e),o=Reflect.getOwnPropertyDescriptor(r,t);return o&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:o.enumerable,value:r[t]}},defineProperty(){Ae(11)},getPrototypeOf(e){return Yr(e.base_)},setPrototypeOf(){Ae(12)}},ca={};aa(Uu,(e,t)=>{ca[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ca.deleteProperty=function(e,t){return ca.set.call(this,e,t,void 0)};ca.set=function(e,t,r){return Uu.set.call(this,e[0],t,r,e[0])};function Tu(e,t){let r=e[Be];return(r?Kr(r):e)[t]}function HR(e,t,r){let o=sp(t,r);return o?"value"in o?o.value:o.get?.call(e.draft_):void 0}function sp(e,t){if(!(t in e))return;let r=Yr(e);for(;r;){let o=Object.getOwnPropertyDescriptor(r,t);if(o)return o;r=Yr(r)}}function Nu(e){e.modified_||(e.modified_=!0,e.parent_&&Nu(e.parent_))}function Ou(e){e.copy_||(e.copy_=ku(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var GR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,o)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let i=this;return function(u=a,...c){return i.produce(u,l=>r.call(this,l,...c))}}typeof r!="function"&&Ae(6),o!==void 0&&typeof o!="function"&&Ae(7);let n;if(_e(t)){let a=tp(this),i=Mu(t,void 0),s=!0;try{n=r(i),s=!1}finally{s?ju(a):Du(a)}return ep(a,o),rp(n,a)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===Qu&&(n=void 0),this.autoFreeze_&&Fi(n,!0),o){let a=[],i=[];Zr("Patches").generateReplacementPatches_(t,n,a,i),o(a,i)}return n}else Ae(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...s)=>this.produceWithPatches(i,u=>t(u,...s));let o,n;return[this.produce(t,r,(i,s)=>{o=i,n=s}),o,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_e(e)||Ae(8),Ke(e)&&(e=cp(e));let t=tp(this),r=Mu(e,void 0);return r[Be].isManual_=!0,Du(t),r}finishDraft(e,t){let r=e&&e[Be];(!r||!r.isManual_)&&Ae(9);let{scope_:o}=r;return ep(o,t),rp(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let o=Zr("Patches").applyPatches_;return Ke(e)?o(e,t):this.produce(e,n=>o(n,t))}};function Mu(e,t){let r=Qo(e)?Zr("MapSet").proxyMap_(e,t):la(e)?Zr("MapSet").proxySet_(e,t):WR(e,t);return(t?t.scope_:ip()).drafts_.push(r),r}function cp(e){return Ke(e)||Ae(10,e),up(e)}function up(e){if(!_e(e)||vi(e))return e;let t=e[Be],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ku(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ku(e,!0);return aa(r,(o,n)=>{ap(r,o,up(n))}),t&&(t.finalized_=!1),r}function lp(){let t="replace",r="add",o="remove";function n(p,d,f,y){switch(p.type_){case 0:case 2:return i(p,d,f,y);case 1:return a(p,d,f,y);case 3:return s(p,d,f,y)}}function a(p,d,f,y){let{base_:S,assigned_:C}=p,v=p.copy_;v.length<S.length&&([S,v]=[v,S],[f,y]=[y,f]);for(let h=0;h<S.length;h++)if(C[h]&&v[h]!==S[h]){let x=d.concat([h]);f.push({op:t,path:x,value:m(v[h])}),y.push({op:t,path:x,value:m(S[h])})}for(let h=S.length;h<v.length;h++){let x=d.concat([h]);f.push({op:r,path:x,value:m(v[h])})}for(let h=v.length-1;S.length<=h;--h){let x=d.concat([h]);y.push({op:o,path:x})}}function i(p,d,f,y){let{base_:S,copy_:C}=p;aa(p.assigned_,(v,h)=>{let x=qu(S,v),E=qu(C,v),P=h?ia(S,v)?t:r:o;if(x===E&&P===t)return;let R=d.concat(v);f.push(P===o?{op:P,path:R}:{op:P,path:R,value:E}),y.push(P===r?{op:o,path:R}:P===o?{op:r,path:R,value:m(x)}:{op:t,path:R,value:m(x)})})}function s(p,d,f,y){let{base_:S,copy_:C}=p,v=0;S.forEach(h=>{if(!C.has(h)){let x=d.concat([v]);f.push({op:o,path:x,value:h}),y.unshift({op:r,path:x,value:h})}v++}),v=0,C.forEach(h=>{if(!S.has(h)){let x=d.concat([v]);f.push({op:r,path:x,value:h}),y.unshift({op:o,path:x,value:h})}v++})}function u(p,d,f,y){f.push({op:t,path:[],value:d===Qu?void 0:d}),y.push({op:t,path:[],value:p})}function c(p,d){return d.forEach(f=>{let{path:y,op:S}=f,C=p;for(let E=0;E<y.length-1;E++){let P=Jr(C),R=y[E];typeof R!="string"&&typeof R!="number"&&(R=""+R),(P===0||P===1)&&(R==="__proto__"||R==="constructor")&&Ae(19),typeof C=="function"&&R==="prototype"&&Ae(19),C=qu(C,R),typeof C!="object"&&Ae(18,y.join("/"))}let v=Jr(C),h=l(f.value),x=y[y.length-1];switch(S){case t:switch(v){case 2:return C.set(x,h);case 3:Ae(16);default:return C[x]=h}case r:switch(v){case 1:return x==="-"?C.push(h):C.splice(x,0,h);case 2:return C.set(x,h);case 3:return C.add(h);default:return C[x]=h}case o:switch(v){case 1:return C.splice(x,1);case 2:return C.delete(x);case 3:return C.delete(f.value);default:return delete C[x]}default:Ae(17,S)}}),p}function l(p){if(!_e(p))return p;if(Array.isArray(p))return p.map(l);if(Qo(p))return new Map(Array.from(p.entries()).map(([f,y])=>[f,l(y)]));if(la(p))return new Set(Array.from(p).map(l));let d=Object.create(Yr(p));for(let f in p)d[f]=l(p[f]);return ia(p,na)&&(d[na]=p[na]),d}function m(p){return Ke(p)?l(p):p}_R("Patches",{applyPatches_:c,generatePatches_:n,generateReplacementPatches_:u})}var ua=new GR,Wt=ua.produce,Ai=ua.produceWithPatches.bind(ua);var Bu=ua.applyPatches.bind(ua);function KR(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function YR(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function JR(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${t}[${r}]`)}}var dp=e=>Array.isArray(e)?e:[e];function ZR(e){let t=Array.isArray(e[0])?e[0]:e;return JR(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function XR(e,t){let r=[],{length:o}=e;for(let n=0;n<o;n++)r.push(e[n].apply(null,t));return r}var BV=Symbol();var _V=Object.getPrototypeOf({});var eF=class{constructor(e){this.value=e}deref(){return this.value}},tF=typeof WeakRef<"u"?WeakRef:eF,rF=0,mp=1;function Pi(){return{s:rF,v:void 0,o:null,p:null}}function Lo(e,t={}){let r=Pi(),{resultEqualityCheck:o}=t,n,a=0;function i(){let s=r,{length:u}=arguments;for(let m=0,p=u;m<p;m++){let d=arguments[m];if(typeof d=="function"||typeof d=="object"&&d!==null){let f=s.o;f===null&&(s.o=f=new WeakMap);let y=f.get(d);y===void 0?(s=Pi(),f.set(d,s)):s=y}else{let f=s.p;f===null&&(s.p=f=new Map);let y=f.get(d);y===void 0?(s=Pi(),f.set(d,s)):s=y}}let c=s,l;if(s.s===mp)l=s.v;else if(l=e.apply(null,arguments),a++,o){let m=n?.deref?.()??n;m!=null&&o(m,l)&&(l=m,a!==0&&a--),n=typeof l=="object"&&l!==null||typeof l=="function"?new tF(l):l}return c.s=mp,c.v=l,l}return i.clearCache=()=>{r=Pi(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function pp(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,o=(...n)=>{let a=0,i=0,s,u={},c=n.pop();typeof c=="object"&&(u=c,c=n.pop()),KR(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);let l={...r,...u},{memoize:m,memoizeOptions:p=[],argsMemoize:d=Lo,argsMemoizeOptions:f=[],devModeChecks:y={}}=l,S=dp(p),C=dp(f),v=ZR(n),h=m(function(){return a++,c.apply(null,arguments)},...S),x=!0,E=d(function(){i++;let R=XR(v,arguments);return s=h.apply(null,R),s},...C);return Object.assign(E,{resultFunc:c,memoizedResultFunc:h,dependencies:v,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:m,argsMemoize:d})};return Object.assign(o,{withTypes:()=>o}),o}var N=pp(Lo),oF=Object.assign((e,t=N)=>{YR(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),o=r.map(a=>e[a]);return t(o,(...a)=>a.reduce((i,s,u)=>(i[r[u]]=s,i),{}))},{withTypes:()=>oF});function fp(e){return({dispatch:r,getState:o})=>n=>a=>typeof a=="function"?a(r,o,e):n(a)}var gp=fp(),yp=fp;var nF=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Mo:Mo.apply(null,arguments)},XV=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},aF=e=>e&&typeof e.match=="function";function g(e,t){function r(...o){if(t){let n=t(...o);if(!n)throw new Error(gt(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:o[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=o=>Si(o)&&o.type===e,r}var Rp=class da extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,da.prototype)}static get[Symbol.species](){return da}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new da(...t[0].concat(this)):new da(...t.concat(this))}};function hp(e){return _e(e)?Wt(e,()=>{}):e}function Sp(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function iF(e){return typeof e=="boolean"}var sF=()=>function(t){let{thunk:r=!0,immutableCheck:o=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=t??{},i=new Rp;return r&&(iF(r)?i.push(gp):i.push(yp(r.extraArgument))),i},ma="RTK_autoBatch",Bo=()=>e=>({payload:e,meta:{[ma]:!0}}),Cp=e=>t=>{setTimeout(t,e)},cF=(e={type:"raf"})=>t=>(...r)=>{let o=t(...r),n=!0,a=!1,i=!1,s=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Cp(10):e.type==="callback"?e.queueNotification:Cp(e.timeout),c=()=>{i=!1,a&&(a=!1,s.forEach(l=>l()))};return Object.assign({},o,{subscribe(l){let m=()=>n&&l(),p=o.subscribe(m);return s.add(l),()=>{p(),s.delete(l)}},dispatch(l){try{return n=!l?.meta?.[ma],a=!n,a&&(i||(i=!0,u(c))),o.dispatch(l)}finally{n=!0}}})},uF=e=>function(r){let{autoBatch:o=!0}=r??{},n=new Rp(e);return o&&n.push(cF(typeof o=="object"?o:void 0)),n};function Fp(e){let t=sF(),{reducer:r=void 0,middleware:o,devTools:n=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{},s;if(typeof r=="function")s=r;else if(Rt(r))s=No(r);else throw new Error(gt(1));let u;typeof o=="function"?u=o(t):u=t();let c=Mo;n&&(c=nF({trace:!1,...typeof n=="object"&&n}));let l=Xm(...u),m=uF(l),p=typeof i=="function"?i(m):m(),d=c(...p);return Eu(s,a,d)}function vp(e){let t={},r=[],o,n={addCase(a,i){let s=typeof a=="string"?a:a.type;if(!s)throw new Error(gt(28));if(s in t)throw new Error(gt(29));return t[s]=i,n},addMatcher(a,i){return r.push({matcher:a,reducer:i}),n},addDefaultCase(a){return o=a,n}};return e(n),[t,r,o]}function lF(e){return typeof e=="function"}function B(e,t){let[r,o,n]=vp(t),a;if(lF(e))a=()=>hp(e());else{let s=hp(e);a=()=>s}function i(s=a(),u){let c=[r[u.type],...o.filter(({matcher:l})=>l(u)).map(({reducer:l})=>l)];return c.filter(l=>!!l).length===0&&(c=[n]),c.reduce((l,m)=>{if(m)if(Ke(l)){let d=m(l,u);return d===void 0?l:d}else{if(_e(l))return Wt(l,p=>m(p,u));{let p=m(l,u);if(p===void 0){if(l===null)return l;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return l},s)}return i.getInitialState=a,i}var Ap=(e,t)=>aF(e)?e.match(t):e(t);function Ft(...e){return t=>e.some(r=>Ap(r,t))}function Uo(...e){return t=>e.every(r=>Ap(r,t))}function wi(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",o=t.indexOf(e.meta.requestStatus)>-1;return r&&o}function pa(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Ii(...e){return e.length===0?t=>wi(t,["pending"]):pa(e)?Ft(...e.map(t=>t.pending)):Ii()(e[0])}function Xr(...e){return e.length===0?t=>wi(t,["rejected"]):pa(e)?Ft(...e.map(t=>t.rejected)):Xr()(e[0])}function fa(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?Uo(Xr(...e),t):pa(e)?Uo(Xr(...e),t):fa()(e[0])}function Ht(...e){return e.length===0?t=>wi(t,["fulfilled"]):pa(e)?Ft(...e.map(t=>t.fulfilled)):Ht()(e[0])}function Ei(...e){return e.length===0?t=>wi(t,["pending","fulfilled","rejected"]):pa(e)?Ft(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):Ei()(e[0])}var dF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",qi=(e=21)=>{let t="",r=e;for(;r--;)t+=dF[Math.random()*64|0];return t},mF=["name","message","stack","code"],_u=class{constructor(e,t){ye(this,"_type");this.payload=e,this.meta=t}},xp=class{constructor(e,t){ye(this,"_type");this.payload=e,this.meta=t}},pF=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of mF)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},_=(()=>{function e(t,r,o){let n=g(t+"/fulfilled",(u,c,l,m)=>({payload:u,meta:{...m||{},arg:l,requestId:c,requestStatus:"fulfilled"}})),a=g(t+"/pending",(u,c,l)=>({payload:void 0,meta:{...l||{},arg:c,requestId:u,requestStatus:"pending"}})),i=g(t+"/rejected",(u,c,l,m,p)=>({payload:m,error:(o&&o.serializeError||pF)(u||"Rejected"),meta:{...p||{},arg:l,requestId:c,rejectedWithValue:!!m,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"}}));function s(u){return(c,l,m)=>{let p=o?.idGenerator?o.idGenerator(u):qi(),d=new AbortController,f,y;function S(v){y=v,d.abort()}let C=async function(){let v;try{let x=o?.condition?.(u,{getState:l,extra:m});if(gF(x)&&(x=await x),x===!1||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let E=new Promise((P,R)=>{f=()=>{R({name:"AbortError",message:y||"Aborted"})},d.signal.addEventListener("abort",f)});c(a(p,u,o?.getPendingMeta?.({requestId:p,arg:u},{getState:l,extra:m}))),v=await Promise.race([E,Promise.resolve(r(u,{dispatch:c,getState:l,extra:m,requestId:p,signal:d.signal,abort:S,rejectWithValue:(P,R)=>new _u(P,R),fulfillWithValue:(P,R)=>new xp(P,R)})).then(P=>{if(P instanceof _u)throw P;return P instanceof xp?n(P.payload,p,u,P.meta):n(P,p,u)})])}catch(x){v=x instanceof _u?i(null,p,u,x.payload,x.meta):i(x,p,u)}finally{f&&d.signal.removeEventListener("abort",f)}return o&&!o.dispatchConditionRejection&&i.match(v)&&v.meta.condition||c(v),v}();return Object.assign(C,{abort:S,requestId:p,arg:u,unwrap(){return C.then(fF)}})}}return Object.assign(s,{pending:a,rejected:i,fulfilled:n,settled:Ft(i,n),typePrefix:t})}return e.withTypes=()=>e,e})();function fF(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function gF(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Pp=Symbol.for("rtk-slice-createasyncthunk"),nj={[Pp]:_};function yF(e,t){return`${e}/${t}`}function hF({creators:e}={}){let t=e?.asyncThunk?.[Pp];return function(o){let{name:n,reducerPath:a=n}=o;if(!n)throw new Error(gt(11));typeof process<"u";let i=(typeof o.reducers=="function"?o.reducers(CF()):o.reducers)||{},s=Object.keys(i),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(v,h){let x=typeof v=="string"?v:v.type;if(!x)throw new Error(gt(12));if(x in u.sliceCaseReducersByType)throw new Error(gt(13));return u.sliceCaseReducersByType[x]=h,c},addMatcher(v,h){return u.sliceMatchers.push({matcher:v,reducer:h}),c},exposeAction(v,h){return u.actionCreators[v]=h,c},exposeCaseReducer(v,h){return u.sliceCaseReducersByName[v]=h,c}};s.forEach(v=>{let h=i[v],x={reducerName:v,type:yF(n,v),createNotation:typeof o.reducers=="function"};RF(h)?vF(x,h,c,t):xF(x,h,c)});function l(){let[v={},h=[],x=void 0]=typeof o.extraReducers=="function"?vp(o.extraReducers):[o.extraReducers],E={...v,...u.sliceCaseReducersByType};return B(o.initialState,P=>{for(let R in E)P.addCase(R,E[R]);for(let R of u.sliceMatchers)P.addMatcher(R.matcher,R.reducer);for(let R of h)P.addMatcher(R.matcher,R.reducer);x&&P.addDefaultCase(x)})}let m=v=>v,p=new Map,d;function f(v,h){return d||(d=l()),d(v,h)}function y(){return d||(d=l()),d.getInitialState()}function S(v,h=!1){function x(P){let R=P[v];return typeof R>"u"&&h&&(R=y()),R}function E(P=m){let R=Sp(p,h,()=>new WeakMap);return Sp(R,P,()=>{let A={};for(let[b,q]of Object.entries(o.selectors??{}))A[b]=SF(q,P,y,h);return A})}return{reducerPath:v,getSelectors:E,get selectors(){return E(x)},selectSlice:x}}let C={name:n,reducer:f,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...S(a),injectInto(v,{reducerPath:h,...x}={}){let E=h??a;return v.inject({reducerPath:E,reducer:f},x),{...C,...S(E,!0)}}};return C}}function SF(e,t,r,o){function n(a,...i){let s=t(a);return typeof s>"u"&&o&&(s=r()),e(s,...i)}return n.unwrapped=e,n}var eo=hF();function CF(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function xF({type:e,reducerName:t,createNotation:r},o,n){let a,i;if("reducer"in o){if(r&&!FF(o))throw new Error(gt(17));a=o.reducer,i=o.prepare}else a=o;n.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?g(e,i):g(e))}function RF(e){return e._reducerDefinitionType==="asyncThunk"}function FF(e){return e._reducerDefinitionType==="reducerWithPrepare"}function vF({type:e,reducerName:t},r,o,n){if(!n)throw new Error(gt(18));let{payloadCreator:a,fulfilled:i,pending:s,rejected:u,settled:c,options:l}=r,m=n(e,a,l);o.exposeAction(t,m),i&&o.addCase(m.fulfilled,i),s&&o.addCase(m.pending,s),u&&o.addCase(m.rejected,u),c&&o.addMatcher(m.settled,c),o.exposeCaseReducer(t,{fulfilled:i||bi,pending:s||bi,rejected:u||bi,settled:c||bi})}function bi(){}var bp="listener",wp="completed",Ip="cancelled",aj=`task-${Ip}`,ij=`task-${wp}`,sj=`${bp}-${Ip}`,cj=`${bp}-${wp}`;var{assign:Ep}=Object;var $u="listenerMiddleware";var AF=Ep(g(`${$u}/add`),{withTypes:()=>AF}),uj=g(`${$u}/removeAll`),PF=Ep(g(`${$u}/remove`),{withTypes:()=>PF});var lj=Symbol.for("rtk-state-proxy-original");function gt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sr=N(e=>e.commercePagination?.principal.perPage||0,e=>e),Ti=N((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0,e=>e),cr=N(e=>e.commercePagination?.principal.totalEntries||0,e=>e),Oi=N((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0,e=>e),ki=N(e=>e.commercePagination?.principal.page||0,e=>e),qp=N((e,t)=>e.commercePagination?.recommendations[t]?.page||0,e=>e);var Fj=N(e=>e[U].productListing.responseId,e=>e),ga=N(e=>e.productListing.responseId,e=>e),Tp=N(e=>e.productListing.requestId,e=>e),ya=N(e=>e.productListing?.products.length||0,e=>e),Op=N(e=>({total:cr(e),current:ya(e)}),({current:e,total:t})=>e<t),kp=N(e=>e.productListing?.isLoading,e=>bF(e)?!1:e),Vp=N(e=>e.productListing?.error,e=>e??null);import{isNullOrUndefined as _p}from"../../bueno/v1.1.0/bueno.esm.js";function zu(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{q:o}:{}}function Wu(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{sortCriteria:o}:{}}function vt(e,t,r,o){if(e===void 0)return{};let n=Object.entries(e).filter(([a])=>t(a)).map(([a,{request:i}])=>{let s=r(i);return s.length?{[a]:s}:{}}).reduce((a,i)=>({...a,...i}),{});return Object.keys(n).length?{[o]:n}:{}}function At(e){let{activeValue:t,ancestryMap:r}=IF(e);return t?EF(t,r):[]}function IF(e){let t=[...e],r=new Map;for(;t.length>0;){let o=t.shift();if(o.state==="selected")return{activeValue:o,ancestryMap:r};if(r)for(let n of o.children)r.set(n,o);t.unshift(...o.children)}return{}}function EF(e,t){let r=[];if(!e)return[];let o=e;do r.unshift(o),o=t.get(o);while(o);return r}function jp(){return{principal:ur(),recommendations:{}}}function ur(){return{page:0,perPage:0,totalEntries:0,totalPages:0}}import{ArrayValue as qF,EnumValue as Dp,RecordValue as Np,StringValue as Mp}from"../../bueno/v1.1.0/bueno.esm.js";var Pt=(r=>(r.Relevance="relevance",r.Fields="fields",r))(Pt||{}),_o=(r=>(r.Ascending="asc",r.Descending="desc",r))(_o||{}),bt=()=>({by:"relevance"});var Vi=e=>({by:"fields",fields:e}),Qp=new Np({options:{required:!1},values:{by:new Dp({enum:Pt,required:!0}),fields:new qF({each:new Np({values:{field:new Mp({required:!0}),direction:new Dp({enum:_o}),displayName:new Mp}})})}});function to(){return{appliedSort:bt(),availableSorts:[bt()]}}function ji(e){return{...TF(e?.commercePagination,t=>t.principal.page,ur().page),...OF(e?.commercePagination,t=>t.principal.perPage,ur().perPage),...Wu(e?.commerceSort,t=>t.appliedSort,to().appliedSort),...vt(e.commerceFacetSet,lr(e,"regular"),kF,"f"),...vt(e.commerceFacetSet,lr(e,"regular"),VF,"fExcluded"),...vt(e.commerceFacetSet,lr(e,"location"),jF,"lf"),...vt(e.commerceFacetSet,lr(e,"hierarchical"),DF,"cf"),...vt(e.commerceFacetSet,lr(e,"dateRange"),Lp,"df"),...vt(e.commerceFacetSet,lr(e,"dateRange"),Up,"dfExcluded"),...vt(e.commerceFacetSet,lr(e,"numericalRange"),Lp,"nf"),...vt(e.commerceFacetSet,lr(e,"numericalRange"),Up,"nfExcluded"),...Bp("selected",e.manualNumericFacetSet),...Bp("excluded",e.manualNumericFacetSet)}}function TF(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{page:o}:{}}function OF(e,t,r){if(e===void 0)return{};let o=t(e);return o!==r?{perPage:o}:{}}function kF(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function VF(e){return e.values.filter(t=>t.state==="excluded").map(t=>t.value)}function jF(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function Lp(e){return e.values.filter(t=>t.state==="selected")}function Up(e){return e.values.filter(t=>t.state==="excluded")}function Bp(e,t){if(!t||e==="idle")return{};let r=Object.entries(t).map(([o,n])=>{if(!(n.manualRange===void 0||n.manualRange.state!==e))return{[o]:[n.manualRange]}}).filter(o=>o!==void 0).reduce((o,n)=>({...o,...n}),{});return e==="selected"?{mnf:r}:{mnfExcluded:r}}function DF(e){return At(e.values).map(r=>r.value)}function lr(e,t){return r=>e.commerceFacetSet[r].request.type===t}var Di=()=>({query:""});var zj=N(e=>e[U].commerceSearch.responseId,e=>e),ha=N(e=>e.commerceSearch.responseId,e=>e),$p=N(e=>e.commerceSearch.requestId,e=>e),Sa=N(e=>e.commerceSearch?.products.length||0,e=>e),zp=N(e=>({total:cr(e),current:Sa(e)}),({current:e,total:t})=>e<t),Wp=N(e=>e.commerceSearch?.isLoading,e=>_p(e)?!1:e),Hp=N(e=>e.commerceSearch?.error,e=>e??null),Ni=N(e=>e.commerceQuery?.query,e=>e??""),NF=N(e=>e.commerceSearch?.queryExecuted,e=>e),Gp=(e,t)=>_p(t.queryCorrection?.correctedQuery)?Ni(e):t.queryCorrection.correctedQuery,Kp=e=>({...zu(e?.commerceQuery,t=>t.query,Di().query),...ji(e)});function Yp(e){return{query:NF(e)||""}}var Hu;(t=>t.responseIdSelector=Jp(ha))(Hu||(Hu={}));var Gu;(t=>t.responseIdSelector=Jp(ga))(Gu||(Gu={}));function Jp(e){return t=>e(t[U])}var ef={};Km(ef,{escapeHtml:()=>$o,getHighlightedSuggestion:()=>Ju,highlightString:()=>LF});import{isNullOrUndefined as QF}from"../../bueno/v1.1.0/bueno.esm.js";var ro=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Ku(e){return Array.isArray(e)}function Mi(e){return e.trim()===""}function Xp(e){let t={};for(let[r,o]of e)t[r]=o;return t}function Ca(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function LF(e){if(Mi(e.openingDelimiter)||Mi(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(QF(e.content)||Mi(e.content))return e.content;if(e.highlights.length===0)return $o(e.content);let t=e.content.length,r="",o=0;for(let n=0;n<e.highlights.length;n++){let a=e.highlights[n],i=a.offset,s=i+a.length;if(s>t)break;r+=$o(e.content.slice(o,i)),r+=e.openingDelimiter,r+=$o(e.content.slice(i,s)),r+=e.closingDelimiter,o=s}return o!==t&&(r+=$o(e.content.slice(o))),r}function Ju(e,t){return e=$o(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,o,n,a)=>o?Yu(o,t.notMatchDelimiters):n?Yu(n,t.exactMatchDelimiters):a?Yu(a,t.correctionDelimiters):r)}function Yu(e,t){return t?t.open+e+t.close:e}function $o(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=`(?:${Object.keys(t).join("|")})`,o=RegExp(r),n=RegExp(r,"g");return o.test(e)?e.replace(n,a=>t[a]):e}var pf=zt(uf(),1);var $=new Error("Failed to load reducers."),zo=class extends Error{constructor(){super(),this.name="UnauthorizedTokenError",this.message="The token being used to perform the request is unauthorized. It may be expired or invalid."}},no=class extends Error{constructor(r,o){super();ye(this,"statusCode");this.name="Disconnected",this.message=`Client could not connect to the following URL: ${r}`,this.statusCode=o??0}};function lf(e){let t=[];for(let r in e){let o=encodeURIComponent(r),n=encodeURIComponent(e[r]);t.push(`${o}=${n}`)}return t.join("&")}function df(e){return typeof e!="object"||!e?!1:Object.values(e).every(mv)}function mv(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function mf(e){return e===429}var Wo=class e{static async call(t){let r=pv(t),{logger:o}=t,n=await e.preprocessRequest(r,t);o.info(n,"Platform request");let{url:a,...i}=n,s=async()=>{let u=await fetch(a,i);if(mf(u.status))throw u;return u};try{let u=await(0,pf.backOff)(s,{retry:c=>{let l=c&&mf(c.status);return l&&o.info("Platform retrying request"),l}});switch(u.status){case 419:case 401:throw o.info("Platform renewing token"),new zo;case 404:throw new no(a,u.status);default:return o.info({response:u,requestInfo:n},"Platform response"),u}}catch(u){return u.message==="Failed to fetch"?new no(a):u}}static async preprocessRequest(t,r){let{origin:o,preprocessRequest:n,logger:a,requestMetadata:i}=r,{signal:s,...u}=t,c=Ca(u);try{let l=await n(t,o,i);return{...t,...l}}catch(l){a.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function qe(e,t="prod",r="platform"){let o=t==="prod"?"":t,n=r==="platform"?"":`.${r}`;return`https://${e}${n}.org${o}.coveo.com`}function et(e,t="prod"){return`${qe(e,t)}/rest/search/v2`}function il(e,t="prod"){return`${qe(e,t,"analytics")}/rest/organizations/${e}/events/v1`}function pv(e){let{url:t,method:r,requestParams:o,contentType:n,accessToken:a,signal:i}=e,s=e.method==="POST"||e.method==="PUT",u=fv(o,n);return{url:t,method:r,headers:{"Content-Type":n,Authorization:`Bearer ${a}`,...e.headers},...s&&{body:u},signal:i}}function fv(e,t){return t==="application/x-www-form-urlencoded"?df(e)?lf(e):"":JSON.stringify(e)}function gv(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function yv(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function sl(e,t){if(t&&e.name==="AbortError")return{error:yv(e)};if(e instanceof no)return{error:gv(e)};throw e}var Ho=(e,t)=>({...Fa(e,t),requestParams:hv(e)}),hv=e=>{let{trackingId:t,clientId:r,context:o,language:n,country:a,currency:i,page:s,perPage:u,facets:c,sort:l}=e;return{trackingId:t,clientId:r,context:o,language:n,country:a,currency:i,page:s,perPage:u,facets:c,sort:l}},Fa=(e,t)=>{let{url:r,accessToken:o}=e,n=`${r}/${t}`;return{accessToken:o,method:"POST",contentType:"application/json",url:n,origin:"commerceApiFetch",requestMetadata:{method:t}}};var ff=(e,t)=>({...Fa(e,t),requestParams:Sv(e)}),Sv=e=>{let{slotId:t,trackingId:r,clientId:o,context:n,language:a,country:i,currency:s,page:u,perPage:c}=e;return{slotId:t,trackingId:r,clientId:o,context:n,language:a,country:i,currency:s,page:u,perPage:c}};var gf=e=>({...Fa(e,"search/querySuggest"),requestParams:Cv(e)}),Cv=e=>{let{trackingId:t,query:r,clientId:o,context:n,language:a,country:i,currency:s}=e;return{trackingId:t,query:r,clientId:o,context:n,language:a,country:i,currency:s}};var Te=e=>e.error!==void 0,Li=class{constructor(t){this.options=t}async getProductListing(t){return this.query({...Ho(t,"listing"),...this.options})}async search(t){let r=Ho(t,"search");return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async getRecommendations(t){return this.query({...ff(t,"recommendations"),...this.options})}async productSuggestions(t){let r=Ho(t,"search/productSuggest");return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async querySuggest(t){let r=gf(t);return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async facetSearch(t,r){let o=Ho(t,"facet");return this.query({...o,url:`${o.url}?type=${r}`,requestParams:{...o.requestParams,facetId:t?.facetId,facetQuery:t?.facetQuery,query:t?.query,numberOfValues:t?.numberOfValues},...this.options})}async plan(t){let r=Ho(t,"search");return this.query({...r,requestParams:{...r.requestParams,query:t?.query},...this.options})}async query(t){let r=await Wo.call(t);if(r instanceof Error)return sl(r);let o=await r.json();return r.ok?{success:o}:{error:o}}};function cl(e,t="prod"){return`${qe(e,t)}/rest/organizations/${e}/commerce/v2`}var Ui=e=>e;import{StringValue as If}from"../../bueno/v1.1.0/bueno.esm.js";import{ArrayValue as xv,RecordValue as Rv,Schema as Fv,SchemaValidationError as vv,StringValue as ao}from"../../bueno/v1.1.0/bueno.esm.js";var k=new ao({required:!0,emptyAllowed:!1}),ne=new ao({required:!1,emptyAllowed:!1}),me=new ao({required:!0,emptyAllowed:!0}),yf=new ao({required:!1,emptyAllowed:!0}),hf=new xv({each:k,required:!0}),Sf=new ao({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Cf=new ao({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),xf=new ao({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/}),Qe=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),he=(e,t)=>{if("required"in t)return{payload:new Fv({value:t}).validate({value:e}).value};let n=new Rv({options:{required:!0},values:t}).validate(e);if(n)throw new vv(n);return{payload:e}},F=(e,t)=>{try{return he(e,t)}catch(r){return{payload:e,error:Qe(r)}}},$e=(e,t,r,o)=>{let n=`Check the initialState of ${o}`;return Rf(e,t,r,n,"Controller initialization error")},Le=(e,t,r,o)=>{let n=`Check the options of ${o}`;return Rf(e,t,r,n,"Controller initialization error")},Rf=(e,t,r,o,n)=>{try{return t.validate(r,o)}catch(a){throw e.logger.error(a,n),a}};import{ArrayValue as Av,BooleanValue as vf,RecordValue as Pv,StringValue as va,Value as bv}from"../../bueno/v1.1.0/bueno.esm.js";var io="3.29.2",Ff=["@coveo/atomic","@coveo/quantic"];var ul=()=>ne,Af=()=>k,dr=g("configuration/updateBasicConfiguration",e=>F(e,{accessToken:ne,environment:new va({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:ne})),Pf=g("configuration/updateSearchConfiguration",e=>F(e,{proxyBaseUrl:new va({required:!1,url:!0}),pipeline:new va({required:!1,emptyAllowed:!0}),searchHub:ne,timezone:ne,locale:ne,authenticationProviders:new Av({required:!1,each:k})})),Aa={enabled:new vf({default:!0}),originContext:ul(),originLevel2:ul(),originLevel3:ul(),proxyBaseUrl:new va({required:!1,url:!0}),runtimeEnvironment:new bv,anonymous:new vf({default:!1}),deviceId:ne,userDisplayName:ne,documentLocation:ne,trackingId:Cf,analyticsMode:new va({constrainTo:["legacy","next"],required:!1,default:"next"}),source:new Pv({options:{required:!1},values:Ff.reduce((e,t)=>(e[t]=Sf,e),{})})},ll=g("configuration/updateAnalyticsConfiguration",e=>F(e,Aa)),Bi=g("configuration/analytics/disable"),_i=g("configuration/analytics/enable"),bf=g("configuration/analytics/originlevel2",e=>F(e,{originLevel2:Af()})),wf=g("configuration/analytics/originlevel3",e=>F(e,{originLevel3:Af()}));var Go=g("commerce/configuration/updateBasicConfiguration",e=>F(e,{accessToken:ne,environment:new If({required:!1,constrainTo:["prod","hipaa","stg","dev"]}),organizationId:ne})),Ko=g("commerce/configuration/updateProxyBaseUrl",e=>F(e,{proxyBaseUrl:new If({required:!1,url:!0})})),Yo=g("commerce/configuration/updateAnalyticsConfiguration",e=>F(e,{enabled:Aa.enabled,proxyBaseUrl:Aa.proxyBaseUrl,source:Aa.source,trackingId:xf})),$i=g("commerce/configuration/analytics/disable"),zi=g("commerce/configuration/analytics/enable");import{isNullOrUndefined as so}from"../../bueno/v1.1.0/bueno.esm.js";var Ef=()=>({accessToken:"",environment:"prod",organizationId:"",analytics:{enabled:!0,trackingId:"",source:{}},commerce:{}});var dl=B(Ef(),e=>e.addCase(Go,(t,r)=>{qf(t,r.payload)}).addCase(dr,(t,r)=>{qf(t,r.payload)}).addCase(Ko,(t,r)=>{wv(t,r.payload)}).addCase(Yo,(t,r)=>{Iv(t,r.payload)}).addCase($i,t=>{t.analytics.enabled=!1}).addCase(zi,t=>{t.analytics.enabled=!0}));function qf(e,t){so(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",so(t.organizationId)||(e.organizationId=t.organizationId)}function wv(e,t){so(t.proxyBaseUrl)||(e.commerce.apiBaseUrl=t.proxyBaseUrl)}function Iv(e,t){so(t.enabled)||(e.analytics.enabled=t.enabled),so(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),so(t.source)||(e.analytics.source=t.source),so(t.trackingId)||(e.analytics.trackingId=t.trackingId)}function Jo(e){return e.currency}var Tf=(e,t)=>({currency:Jo(t.commerceContext),products:Ev(t.cart),transaction:e}),Of=(e,t)=>({currency:Jo(t.commerceContext),...e}),co=N(e=>e.cart,e=>e.cartItems,(e,t)=>t.map(r=>e[r])),Ev=N(co,e=>e.map(({quantity:t,...r})=>({quantity:t,product:r})));import{ArrayValue as qv,NumberValue as kf,RecordValue as Tv,Schema as Ov,StringValue as kv}from"../../bueno/v1.1.0/bueno.esm.js";var ml={productId:k,quantity:new kf({required:!0,min:0}),name:new kv({required:!1}),price:new kf({required:!1,min:0})},pl=new qv({each:new Tv({values:{...ml}})}),fl={items:pl},Vf=new Ov(fl);var mr=g("commerce/cart/setItems",e=>F(e,pl)),Zo=g("commerce/cart/updateItemQuantity",e=>F(e,ml)),Xo=g("commerce/cart/purchase"),Wi=_("commerce/cart/emit/purchaseEvent",async(e,{extra:t,getState:r})=>{let o=Tf(e,r()),{relay:n}=t;n.emit("ec.purchase",o)}),Hi=_("commerce/cart/emit/cartActionEvent",async(e,{extra:t,getState:r})=>{let o=Of(e,r()),{relay:n}=t;n.emit("ec.cartAction",o)});function W(e){let t,r=new Map,o=()=>r.size===0,n=a=>{try{let i=JSON.stringify(a),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(a){a();let i=Symbol(),s;return o()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{n(this.state)&&r.forEach(u=>u())})),r.set(i,a),()=>{r.delete(i),o()&&s?.()}},get state(){return{}}}}function jf(e,t){return e.cart[uo(t)]}var Df=N(co,e=>e.reduce((t,r)=>t+r.quantity,0)),Nf=N(co,e=>e.reduce((t,r)=>t+r.price*r.quantity,0));function Vv(e,t={}){if(!jv(e))throw $;let{dispatch:r}=e,o=W(e),n=()=>e[U].cart,a={...t.initialState};$e(e,Vf,a,"buildCart"),a.items!==void 0&&r(mr(a.items));function i(l,m){return m?m.quantity!==l.quantity:!0}function s(l,m){return!m||l.quantity>m.quantity?"add":"remove"}function u(l,m){return m?l.name===m.name&&l.price===m.price&&l.quantity===m.quantity:!1}function c(l,m){let{quantity:p,...d}=l,f=s(l,m),y=m?Math.abs(p-m.quantity):p;return{action:f,quantity:y,product:d}}return{...o,empty:function(){for(let l of co(n()))this.updateItemQuantity({...l,quantity:0})},purchase(l){r(Wi(l)),r(Xo())},updateItemQuantity(l){let m=jf(n(),l);!m&&l.quantity<=0||u(l,m)||(i(l,m)&&r(Hi(c(l,m))),r(Zo(l)))},get state(){let l=n();return{items:co(l),totalQuantity:Df(l),totalPrice:Nf(l)}}}}function uo(e){return`${e.productId},${e.name},${e.price}`}function jv(e){return e.addReducers({cart:en}),!0}var Gi=()=>({cartItems:[],cart:{},purchasedItems:[],purchased:{}}),Mf=e=>Lf(e.cartItems,e.cart),Qf=e=>Lf(e.purchasedItems,e.purchased);function Lf(e,t){let r=e.reduce((o,n)=>{let{productId:a,quantity:i}=t[n];return a in o||(o[a]={productId:a,quantity:0}),o[a].quantity+=i,o},{});return[...Object.values(r)]}var en=B(Gi(),e=>{e.addCase(mr,(t,{payload:r})=>{let{cart:o,cartItems:n}=r.reduce((a,i)=>{let s=uo(i);return{cartItems:[...a.cartItems,s],cart:{...a.cart,[s]:i},purchasedItems:[],purchased:{}}},Gi());Uf(t,n,o)}).addCase(Zo,(t,{payload:r})=>{let o=uo(r);if(!(o in t.cart)){Dv(r,t);return}if(r.quantity<=0){Nv(r,t);return}t.cart[o]=r}).addCase(Xo,t=>{Mv(t);let{cart:r,cartItems:o}=Gi();Uf(t,o,r)})});function Uf(e,t,r){e.cartItems=t,e.cart=r}function Dv(e,t){if(e.quantity<=0)return;let r=uo(e);t.cartItems=[...t.cartItems,r],t.cart[r]=e}function Nv(e,t){let r=uo(e);t.cartItems=t.cartItems.filter(o=>o!==r),delete t.cart[r]}function Mv(e){for(let t of e.cartItems){if(t in e.purchased){e.purchased[t].quantity+=e.cart[t].quantity;continue}e.purchasedItems=[...e.purchasedItems,t],e.purchased[t]=e.cart[t]}}import{NumberValue as Bf,RecordValue as _f,Schema as Qv,StringValue as Lv}from"../../bueno/v1.1.0/bueno.esm.js";var Uv=Intl.supportedValuesOf("currency"),Bv=new Lv({required:!0,emptyAllowed:!1,constrainTo:Uv}),gl={url:k},yl={latitude:new Bf({min:-90,max:90,required:!0}),longitude:new Bf({min:-180,max:180,required:!0})},Pa={language:k,country:k,currency:Bv,view:new _f({options:{required:!0},values:gl}),location:new _f({options:{required:!1},values:yl})},$f=new Qv(Pa);var ce=g("commerce/context/set",e=>F(e,Pa)),le=g("commerce/context/setView",e=>F(e,gl)),tn=g("commerce/context/setLocation",e=>F(e,yl));var zf=()=>({language:"",country:"",currency:"",view:{url:""}});var wt=B(zf(),e=>{e.addCase(ce,(t,{payload:r})=>r).addCase(le,(t,{payload:r})=>{t.view=r}).addCase(tn,(t,{payload:r})=>{t.location=r})});var Ki=()=>({correctedQuery:"",corrections:[],originalQuery:""});import{BooleanValue as Zv,RecordValue as Xv,StringValue as Gf}from"../../bueno/v1.1.0/bueno.esm.js";var pr=N(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${io}`));var fr=(e,t)=>{let{view:r,location:o,...n}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.commerce.apiBaseUrl??cl(e.configuration.organizationId,e.configuration.environment),organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...n,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{user:{...o,...t.userAgent?{userAgent:t.userAgent}:{}},view:{...r,...t.referrer?{referrer:t.referrer}:{}},capture:t.capture??e.configuration.analytics.enabled,cart:Mf(e.cart),source:pr(e.configuration.analytics)}}};var Yi=(e,t,r)=>({...fr(e,t),..._v(e,r)}),_v=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};var tt=(e,t)=>({...Yi(e,t),facets:[...$v(e)],...e.commerceSort&&{sort:zv(e.commerceSort.appliedSort)}});function $v(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter(t=>e.commerceFacetSet?.[t]).map(t=>e.manualNumericFacetSet?.[t]?.manualRange?{facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[e.manualNumericFacetSet[t].manualRange],initialNumberOfValues:1}:e.commerceFacetSet[t].request).filter(t=>t&&t.values.length>0)}function zv(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}import{BooleanValue as hl,NumberValue as Wv}from"../../bueno/v1.1.0/bueno.esm.js";var lo=g("commerce/facets/core/updateNumberOfValues",e=>F(e,{facetId:k,numberOfValues:new Wv({required:!0,min:1})})),mo=g("commerce/facets/core/updateIsFieldExpanded",e=>F(e,{facetId:k,isFieldExpanded:new hl({required:!0})})),Ce=g("commerce/facets/core/clearAll"),gr=g("commerce/facets/core/deleteAll"),Oe=g("commerce/facets/core/deselectAllValues",e=>F(e,{facetId:k})),po=g("commerce/facets/core/updateFreezeCurrentValues",e=>F(e,{facetId:k,freezeCurrentValues:new hl({required:!0})})),rn=g("commerce/facets/core/updateAutoSelectionForAll",e=>F(e,{allow:new hl({required:!0})}));import{NumberValue as Wf}from"../../bueno/v1.1.0/bueno.esm.js";var Ji={slotId:yf},Hv={...Ji,pageSize:new Wf({required:!0,min:0})},Kt=g("commerce/pagination/setPageSize",e=>F(e,Hv)),Gv={...Ji,page:new Wf({required:!0,min:0})},It=g("commerce/pagination/selectPage",e=>F(e,Gv)),yr=g("commerce/pagination/nextPage",e=>F(e,Ji)),hr=g("commerce/pagination/previousPage",e=>F(e,Ji)),on=g("commerce/pagination/registerRecommendationsSlot",e=>F(e,{slotId:k}));import{StringValue as Kv}from"../../bueno/v1.1.0/bueno.esm.js";var pe=g("commerce/query/update",e=>F(e,{query:new Kv}));import{isNullOrUndefined as Hf}from"../../bueno/v1.1.0/bueno.esm.js";import{RecordValue as Yv,StringValue as Jv}from"../../bueno/v1.1.0/bueno.esm.js";var Sr=g("commerce/triggers/query/updateIgnore",e=>F(e,{q:new Jv({emptyAllowed:!0,required:!0})})),nn=g("commerce/triggers/query/applyModification",e=>F(e,new Yv({values:{originalQuery:ne,modification:ne}})));var ba=class{constructor(t){this.config=t}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}async fetchFromAPI(t){let r=Date.now(),o=await this.extra.apiClient.search(t),n=Date.now()-r,a=this.getState().commerceQuery.query||"";return{response:o,duration:n,queryExecuted:a,requestExecuted:t}}processSuccessResponse(t){return{...t,response:this.getSuccessResponse(t),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(t){return Te(t.response)?this.rejectWithValue(t.response.error):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),o=this.getSuccessResponse(t);if(!o||!r.didYouMean)return null;let{queryCorrection:n}=o;if(!(!Hf(n)&&!Hf(n.correctedQuery)))return null;let{correctedQuery:i,originalQuery:s}=o.queryCorrection;return this.onUpdateQueryForCorrection(i??""),{...t,response:{...o},queryExecuted:Gp(r,o),originalQuery:s??""}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let o=r.triggers.find(s=>s.type==="query")?.content||"";if(!o)return null;if(this.getState().triggers?.queryModification.queryToIgnore===o)return this.dispatch(Sr({q:""})),null;let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(o);return Te(i.response)?this.rejectWithValue(i.response.error):{...i,response:{...i.response.success},originalQuery:a}}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(nn({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI({...tt(this.getState(),this.navigatorContext),query:t})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let t=this.getState();return t.commerceQuery.query!==void 0?t.commerceQuery.query:""}getSuccessResponse(t){return Te(t.response)?null:t.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(t){this.dispatch(pe({query:t}))}};var K=_("commerce/search/executeSearch",async(e,t)=>{let{getState:r}=t,o=r(),{navigatorContext:n}=t.extra,a=tt(o,n),i=Ni(o),s=new ba(t),u=await s.fetchFromAPI({...a,query:i});return s.process(u)}),Cr=_("commerce/search/fetchMoreProducts",async(e,t)=>{let{getState:r}=t,o=r(),{navigatorContext:n}=t.extra;if(!zp(o))return null;let i=sr(o),u=Sa(o)/i,c=Ni(o),l=tt(o,n),m=new ba(t),p=await m.fetchFromAPI({...l,query:c,page:u});return m.process(p)}),an=_("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;F(e,{query:new Gf,clearFilters:new Zv}),e.clearFilters&&r(gr()),r(rn({allow:!0})),r(pe({query:e.query})),r(It({page:0}))}),sn=_("commerce/search/fetchInstantProducts",async(e,{getState:t,rejectWithValue:r,extra:o})=>{let n=t(),{apiClient:a,navigatorContext:i}=o,{q:s}=e,u=await a.productSuggestions({...fr(n,i),query:s});return Te(u)?r(u.error):{response:{...u.success,products:u.success.products}}}),eA={child:new Xv({options:{required:!0},values:{permanentid:new Gf({required:!0})}})},cn=g("commerce/search/promoteChildToParent",e=>F(e,eA));function Kf(){return{wasCorrectedTo:"",queryCorrection:Ki(),originalQuery:""}}var Zi=B(Kf(),e=>{e.addCase(K.pending,t=>{t.queryCorrection=Ki(),t.wasCorrectedTo=""}).addCase(K.fulfilled,(t,r)=>{let{queryCorrection:o}=r.payload.response;t.originalQuery=r.payload.originalQuery,t.wasCorrectedTo=o?.correctedQuery??"",t.queryCorrection={correctedQuery:o?.correctedQuery??o?.corrections[0]?.correctedQuery??"",wordCorrections:o?.corrections[0]?.wordCorrections??[]}})});import{ArrayValue as nA,NumberValue as aA,RecordValue as iA}from"../../bueno/v1.1.0/bueno.esm.js";var Y=k;import{NumberValue as tA,RecordValue as rA,StringValue as oA}from"../../bueno/v1.1.0/bueno.esm.js";var wa={facetId:Y,captions:new rA({options:{required:!1}}),numberOfValues:new tA({required:!1,min:1}),query:new oA({required:!1,emptyAllowed:!0})};var sA={path:new nA({required:!0,each:k}),displayValue:me,rawValue:me,count:new aA({required:!0,min:0})},rt=g("categoryFacet/selectSearchResult",e=>F(e,{facetId:Y,value:new iA({values:sA})})),Xi=g("categoryFacetSearch/register",e=>F(e,wa));import{NumberValue as cA,RecordValue as uA}from"../../bueno/v1.1.0/bueno.esm.js";var Yf={facetId:Y,value:new uA({values:{displayValue:me,rawValue:me,count:new cA({required:!0,min:0})}})},es=g("facetSearch/register",e=>F(e,wa)),xr=g("facetSearch/update",e=>F(e,wa)),Ye=g("facetSearch/toggleSelectValue",e=>F(e,Yf)),yt=g("facetSearch/toggleExcludeValue",e=>F(e,Yf));var Et=g("breadcrumb/deselectAll"),ts=g("breadcrumb/deselectAllNonBreadcrumbs");import{BooleanValue as lA}from"../../bueno/v1.1.0/bueno.esm.js";var Yt=g("facetOptions/update",(e={freezeFacetOrder:!0})=>F(e,{freezeFacetOrder:new lA({required:!1})})),Sl=g("facetOptions/facet/enable",e=>F(e,Y)),Jt=g("facetOptions/facet/disable",e=>F(e,Y));var dA=g("history/undo"),mA=g("history/redo"),qt=g("history/snapshot"),l0=_("history/back",async(e,{dispatch:t})=>{t(dA()),await t(xe())}),d0=_("history/forward",async(e,{dispatch:t})=>{t(mA()),await t(xe())}),xe=_("history/change",async(e,{getState:t})=>t().history.present);import{BooleanValue as Vy,NumberValue as jy,StringValue as kw}from"../../bueno/v1.1.0/bueno.esm.js";var un=class e{static set(t,r,o){let n,a,i;o&&(a=new Date,a.setTime(a.getTime()+o));let s=window.location.hostname,u=/^(\d{1,3}\.){3}\d{1,3}$/,c=/^([0-9a-fA-F]{0,4}:){2,7}[0-9a-fA-F]{0,4}$/;u.test(s)||c.test(s)||s.indexOf(".")===-1?Cl(t,r,a):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],Cl(t,r,a,n))}static get(t){let r=t+"=",o=document.cookie.split(";");for(let n=0;n<o.length;n++){let a=o[n];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function Cl(e,t,r,o){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(o?`;domain=${o}`:"")+";path=/;SameSite=Lax"}function pA(){return typeof navigator<"u"}function Jf(){try{return typeof localStorage<"u"}catch{return!1}}function Zf(){try{return typeof sessionStorage<"u"}catch{return!1}}function Xf(){return!!(pA()&&navigator.cookieEnabled)}var eg=null;function tg(){return eg||(Jf()?localStorage:Xf()?new xl:Zf()?sessionStorage:new Rl)}var ln=class ln{getItem(t){return un.get(`${ln.prefix}${t}`)}removeItem(t){un.erase(`${ln.prefix}${t}`)}setItem(t,r,o){un.set(`${ln.prefix}${t}`,r,o)}};ye(ln,"prefix","coveo_");var xl=ln;var Rl=class{getItem(t){return null}removeItem(t){}setItem(t,r){}};var rs="__coveo.analytics.history",fA=20,gA=1e3*60,yA=75,fo=class fo{constructor(t){ye(this,"store");this.store=t||tg()}static getInstance(t){return fo.instance||(fo.instance=new fo(t)),fo.instance}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}async addElementAsync(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=await this.getHistoryWithInternalTimeAsync();r!==null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}async getHistoryAsync(){let t=await this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryWithInternalTime(){try{let t=this.store.getItem(rs);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}async getHistoryWithInternalTimeAsync(){try{let t=await this.store.getItem(rs);return t?JSON.parse(t):[]}catch{return[]}}setHistory(t){try{this.store.setItem(rs,JSON.stringify(t.slice(0,fA)))}catch{}}clear(){try{this.store.removeItem(rs)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((o,n)=>(n.internalTime||0)-(o.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,yA)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value===t.value?(t.internalTime||0)-(r.internalTime||0)>gA:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:o,time:n,value:a}=r;return{name:o,time:n,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:o,value:n}=t;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:o}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};ye(fo,"instance",null);var Fl=fo,Tt=Fl;import{isNullOrUndefined as cL,RecordValue as Ob,Schema as uL,StringValue as Fs}from"../../bueno/v1.1.0/bueno.esm.js";var rg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function hA(e){return typeof e=="string"&&rg.test(e)}var vl=hA;var Pe=[];for(let e=0;e<256;++e)Pe.push((e+256).toString(16).slice(1));function og(e,t=0){return(Pe[e[t+0]]+Pe[e[t+1]]+Pe[e[t+2]]+Pe[e[t+3]]+"-"+Pe[e[t+4]]+Pe[e[t+5]]+"-"+Pe[e[t+6]]+Pe[e[t+7]]+"-"+Pe[e[t+8]]+Pe[e[t+9]]+"-"+Pe[e[t+10]]+Pe[e[t+11]]+Pe[e[t+12]]+Pe[e[t+13]]+Pe[e[t+14]]+Pe[e[t+15]]).toLowerCase()}var Al,SA=new Uint8Array(16);function Pl(){if(!Al){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Al=crypto.getRandomValues.bind(crypto)}return Al(SA)}var CA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bl={randomUUID:CA};function xA(e,t,r){if(bl.randomUUID&&!t&&!e)return bl.randomUUID();e=e||{};let o=e.random??e.rng?.()??Pl();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let n=0;n<16;++n)t[r+n]=o[n];return t}return og(o)}var wl=xA;function ng(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}function RA({config:e,environment:t,event:r,listenerManager:o}){let{url:n,token:a,mode:i}=e;i!=="disabled"&&(o.call(r),t.send(n,a,r))}var ag="visitorId";function FA(e){return{getClientId:()=>{let t=e.get(),r=t.storage,o=r.getItem(ag),n=o&&vl(o)?o:t.generateUUID();return r.setItem(ag,n),n}}}var lg="1.2.6",Il=128,dg=192,ig=224,sg=240,vA=248;function AA(e){return(e&vA)===sg?4:(e&sg)===ig?3:(e&ig)===dg?2:1}function PA(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let o=Number.parseInt(e.substring(r-2,r),16);if((o&Il)!=Il)break;if(r-=3,(o&dg)!=Il){t-r>=AA(o)*3&&(r=t);break}}return e.substring(0,r)}function bA(e){let{trackingId:t}=e;return{trackingId:t}}function wA(e){return(e.source||[]).concat([`relay@${lg}`])}function mg(e,t,r,o){let{getReferrer:n,getLocation:a,getUserAgent:i}=r,s=bA(t),u=o.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:wA(t),clientId:u,userAgent:i(),referrer:cg(n()),location:cg(a())})}function cg(e){return e!==null?PA(e,1024):null}function IA(e,t,r,o,n){return{...t,meta:mg(e,r,o,n)}}var EA="*";function qA(){let e=[];function t({type:u,callback:c}){return e.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function o(u){return t(u)<0&&e.push(u),()=>s(u.type,u.callback)}function n(u){e.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function a(u){if(u===EA)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===u&&e.splice(c,1)}function i(u){let c=t(u);c>=0&&e.splice(c,1)}function s(u,c){c?i({type:u,callback:c}):a(u)}return{add:o,call:n,remove:s}}function ug({url:e,token:t,trackingId:r,...o}){return Object.freeze({url:e,token:t,trackingId:r,...!!o.mode&&{mode:o.mode},...!!o.source&&{source:o.source},...!!o.environment&&{environment:o.environment}})}function TA(e){let t=ug(e);return{get:()=>t,update:r=>{t=ug({...t,...r})}}}var El=OA();function OA(){let e="coveo_",t=r=>{let o=r.split(".").slice(-2);return o.length==2?o.join("."):""};return{getItem(r){let o=`${e}${r}=`,n=document.cookie.split(";");for(let a of n){let i=a.replace(/^\s+/,"");if(i.lastIndexOf(o,0)===0)return i.substring(o.length,i.length)}return null},setItem(r,o,n){let a=t(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+n).toUTCString()}`,s=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${o}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function kA(){return{getItem(e){return El.getItem(e)||localStorage.getItem(e)},removeItem(e){El.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),El.setItem(e,t,31556952e3)}}}function VA(){let e=document.referrer;return e===""?null:e}function jA(){return{runtime:"browser",send:(e,t,r)=>{let o=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(ng().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!o)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>VA(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>wl(),storage:kA()}}function DA(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function NA(){return{getItem(){return null},removeItem(){},setItem(){}}}function MA(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:NA()}}function QA(e){let t=e.get().mode!=="disabled",r=e.get().environment,o=MA();return t&&r?{storage:o.storage,...r,runtime:"custom"}:t&&LA()&&DA()?jA():o}function LA(){try{return typeof window=="object"}catch{return!1}}function UA(e){return{get:()=>Object.freeze(QA(e))}}function pg(e){let t=TA(e),r=qA(),o=UA(t),n=FA(o);return{emit:(a,i)=>{let s=t.get(),u=o.get(),c=IA(a,i,s,u,n);return RA({config:s,environment:u,event:c,listenerManager:r})},getMeta:a=>mg(a,t.get(),o.get(),n),on:(a,i)=>r.add({type:a,callback:i}),off:(a,i)=>r.remove(a,i),updateConfig:a=>t.update(a),version:lg}}var Ia=N(e=>e.configuration.organizationId,e=>e.configuration.environment,e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>pr(e.configuration.analytics),(e,t)=>BA(t),(e,t,r,{trackingId:o,apiBaseUrl:n,enabled:a},i,s)=>pg({mode:a?"emit":"disabled",url:n??il(e,t),token:r,trackingId:o??null,source:i,environment:s})),BA=e=>{if(!e)return;let t=e();return{getLocation:()=>t.location,getReferrer:()=>t.referrer,getUserAgent:()=>t.userAgent,generateUUID:()=>t.clientId}};function Zt(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r}function w(e,t,r,o){function n(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(o.next(l))}catch(m){i(m)}}function u(l){try{c(o.throw(l))}catch(m){i(m)}}function c(l){l.done?a(l.value):n(l.value).then(s,u)}c((o=o.apply(e,t||[])).next())})}var ee;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ee||(ee={}));function Ol(){return typeof window<"u"}function zl(){return typeof navigator<"u"}function dn(){return typeof document<"u"}function kl(){try{return typeof localStorage<"u"}catch{return!1}}function _A(){try{return typeof sessionStorage<"u"}catch{return!1}}function wg(){return zl()&&navigator.cookieEnabled}var $A=[ee.click,ee.custom,ee.search,ee.view],zA=(e,t)=>$A.indexOf(e)!==-1?Object.assign({language:dn()?document.documentElement.lang:"unknown",userAgent:zl()?navigator.userAgent:"unknown"},t):t,qa=class e{static set(t,r,o){var n,a,i,s;o&&(a=new Date,a.setTime(a.getTime()+o)),s=window.location.hostname,s.indexOf(".")===-1?fg(t,r,a):(i=s.split("."),n=i[i.length-2]+"."+i[i.length-1],fg(t,r,a,n))}static get(t){for(var r=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){var a=o[n];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function fg(e,t,r,o){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(o?`;domain=${o}`:"")+";path=/;SameSite=Lax"}function WA(){return kl()?localStorage:wg()?new Ta:_A()?sessionStorage:new pn}var Ta=class e{getItem(t){return qa.get(`${e.prefix}${t}`)}removeItem(t){qa.erase(`${e.prefix}${t}`)}setItem(t,r,o){qa.set(`${e.prefix}${t}`,r,o)}};Ta.prefix="coveo_";var Vl=class{constructor(){this.cookieStorage=new Ta}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},pn=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},os="__coveo.analytics.history",HA=20,GA=1e3*60,KA=75,is=class{constructor(t){this.store=t||WA()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return w(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return w(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(os);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return w(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(os);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(os,JSON.stringify(t.slice(0,HA)))}catch{}}clear(){try{this.store.removeItem(os)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((o,n)=>(n.internalTime||0)-(o.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,KA)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>GA:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:o,time:n,value:a}=r;return{name:o,time:n,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:o,value:n}=t;return r&&typeof n=="string"&&r.toLowerCase()==="query"&&n.trim()===""?{name:r,time:o}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}};var YA=(e,t)=>w(void 0,void 0,void 0,function*(){return e===ee.view?(yield JA(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),JA=e=>w(void 0,void 0,void 0,function*(){let t=new is,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),ns,ZA=new Uint8Array(16);function XA(){if(!ns&&(ns=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ns))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ns(ZA)}var eP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ss(e){return typeof e=="string"&&eP.test(e)}var be=[];for(let e=0;e<256;++e)be.push((e+256).toString(16).slice(1));function Ig(e,t=0){return(be[e[t+0]]+be[e[t+1]]+be[e[t+2]]+be[e[t+3]]+"-"+be[e[t+4]]+be[e[t+5]]+"-"+be[e[t+6]]+be[e[t+7]]+"-"+be[e[t+8]]+be[e[t+9]]+"-"+be[e[t+10]]+be[e[t+11]]+be[e[t+12]]+be[e[t+13]]+be[e[t+14]]+be[e[t+15]]).toLowerCase()}function tP(e){if(!ss(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function rP(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var oP="6ba7b810-9dad-11d1-80b4-00c04fd430c8",nP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function aP(e,t,r){function o(n,a,i,s){var u;if(typeof n=="string"&&(n=rP(n)),typeof a=="string"&&(a=tP(a)),((u=a)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(a),c.set(n,a.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return Ig(c)}try{o.name=e}catch{}return o.DNS=oP,o.URL=nP,o}var iP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gg={randomUUID:iP};function go(e,t,r){if(gg.randomUUID&&!t&&!e)return gg.randomUUID();e=e||{};let o=e.random||(e.rng||XA)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return Ig(o)}function sP(e,t,r,o){switch(e){case 0:return t&r^~t&o;case 1:return t^r^o;case 2:return t&r^t&o^r&o;case 3:return t^r^o}}function ql(e,t){return e<<t|e>>>32-t}function cP(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let i=unescape(encodeURIComponent(e));e=[];for(let s=0;s<i.length;++s)e.push(i.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let o=e.length/4+2,n=Math.ceil(o/16),a=new Array(n);for(let i=0;i<n;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=e[i*64+u*4]<<24|e[i*64+u*4+1]<<16|e[i*64+u*4+2]<<8|e[i*64+u*4+3];a[i]=s}a[n-1][14]=(e.length-1)*8/Math.pow(2,32),a[n-1][14]=Math.floor(a[n-1][14]),a[n-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<n;++i){let s=new Uint32Array(80);for(let d=0;d<16;++d)s[d]=a[i][d];for(let d=16;d<80;++d)s[d]=ql(s[d-3]^s[d-8]^s[d-14]^s[d-16],1);let u=r[0],c=r[1],l=r[2],m=r[3],p=r[4];for(let d=0;d<80;++d){let f=Math.floor(d/20),y=ql(u,5)+sP(f,c,l,m)+p+t[f]+s[d]>>>0;p=m,m=l,l=ql(c,30)>>>0,c=u,u=y}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+p>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var uP=aP("v5",80,cP),yg=uP,Eg="2.30.45",hg=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Ea={pageview:"pageview",event:"event"},cs=class{constructor({client:t,uuidGenerator:r=go}){this.client=t,this.uuidGenerator=r}},jl=class extends cs{constructor({client:t,uuidGenerator:r=go}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=hg(window.location),this.lastReferrer=dn()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:dn()?document.title:"",encoding:dn()?document.characterSet:"UTF-8"},o={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),o),n),r)}updateLocationForNextPageView(t,r){let{pageViewId:o,referrer:n,location:a}=this.getNextValues(t,r);this.lastReferrer=n,this.pageViewId=o,this.currentLocation=a,t===Ea.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===Ea.pageview?this.nextPageViewId:this.pageViewId,referrer:t===Ea.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===Ea.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=n=>n.replace(/^\/?(.*)$/,"/$1");return`${(n=>n.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return hg(window.location)}},Rr=class e{constructor(t,r){if(!ss(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let o=new URL(t);return r.some(n=>new RegExp(n.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(o.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[o,n]=r;if(o.length!==32||isNaN(parseInt(n)))return null;let a=o.substring(0,8)+"-"+o.substring(8,12)+"-"+o.substring(12,16)+"-"+o.substring(16,20)+"-"+o.substring(20,32);return ss(a)?new e(a,Number.parseInt(n)*1e3):null}};Rr.cvo_cid="cvo_cid";Rr.expirationTime=120;var Dl=class extends cs{constructor({client:t,uuidGenerator:r=go}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return w(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),o=yield this.client.getCurrentVisitorId();return r.searchParams.set(Rr.cvo_cid,new Rr(o,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};Dl.Id="link";var nt=Object.keys;function as(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Tl=128,qg=192,Sg=224,Cg=240;function lP(e){return(e&248)===Cg?4:(e&Cg)===Sg?3:(e&Sg)===qg?2:1}function dP(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let o=Number.parseInt(e.substring(r-2,r),16);if((o&Tl)!=Tl)break;if(r-=3,(o&qg)!=Tl){t-r>=lP(o)*3&&(r=t);break}}return e.substring(0,r)}var Nl={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},mP=nt(Nl).map(e=>Nl[e]),pP=[...mP].join("|"),fP=new RegExp(`^(${pP}$)`),gP={svcAction:"svc_action",svcActionData:"svc_action_data"},yP=e=>nt(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let o=Nl[r]||r;return Object.assign(Object.assign({},t),{[o]:e[r]})},{}),hP=e=>fP.test(e),SP=[hP],xg={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Rg={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ke={action:"pa",list:"pal",listSource:"pls"},us={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},CP=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Ml={id:"quoteId",affiliation:"quoteAffiliation"},Ql={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},xP={add:ke,bookmark_add:ke,bookmark_remove:ke,click:ke,checkout:ke,checkout_option:ke,detail:ke,impression:ke,remove:ke,refund:Object.assign(Object.assign({},ke),us),purchase:Object.assign(Object.assign({},ke),us),quickview:ke,quote:Object.assign(Object.assign({},ke),Ml),review:Object.assign(Object.assign({},ke),Ql)},RP=nt(xg).map(e=>xg[e]),FP=nt(Rg).map(e=>Rg[e]),vP=nt(ke).map(e=>ke[e]),AP=nt(us).map(e=>us[e]),PP=nt(Ql).map(e=>Ql[e]),bP=nt(Ml).map(e=>Ml[e]),wP=[...RP,"custom"].join("|"),IP=[...FP,"custom"].join("|"),Tg="(pr[0-9]+)",Og="(il[0-9]+pi[0-9]+)",EP=new RegExp(`^${Tg}(${wP})$`),qP=new RegExp(`^(${Og}(${IP}))|(il[0-9]+nm)$`),TP=new RegExp(`^(${vP.join("|")})$`),OP=new RegExp(`^(${AP.join("|")})$`),kP=new RegExp(`^${Tg}custom$`),VP=new RegExp(`^${Og}custom$`),jP=new RegExp(`^(${[...CP,...PP,...bP].join("|")})$`),DP=e=>EP.test(e),NP=e=>qP.test(e),MP=e=>TP.test(e),QP=e=>OP.test(e),LP=e=>jP.test(e),UP=[NP,DP,MP,QP,LP],BP=[kP,VP],_P={anonymizeIp:"aip"},$P={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},zP={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},WP=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],HP=Object.assign(Object.assign(Object.assign(Object.assign({},_P),$P),zP),WP.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Ll=Object.assign(Object.assign({},HP),gP),GP=e=>{let t=!!e.action&&xP[e.action]||{};return nt(e).reduce((r,o)=>{let n=t[o]||Ll[o]||o;return Object.assign(Object.assign({},r),{[n]:e[o]})},{})},KP=nt(Ll).map(e=>Ll[e]),YP=e=>KP.indexOf(e)!==-1,JP=e=>e==="custom",ZP=e=>[...UP,...SP,YP,JP].some(t=>t(e)),XP=e=>nt(e).reduce((t,r)=>{let o=eb(r);return o?Object.assign(Object.assign({},t),tb(o,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),eb=e=>{let t;return[...BP].every(r=>{var o;return t=(o=r.exec(e))===null||o===void 0?void 0:o[1],!t}),t},tb=(e,t)=>nt(t).reduce((r,o)=>Object.assign(Object.assign({},r),{[`${e}${o}`]:t[o]}),{}),Ul=class{constructor(t){this.opts=t}sendEvent(t,r){return w(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:o,preprocessRequest:n}=this.opts,a=yield this.getQueryParamsForEventType(t),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${o}/analytics/${t}?${a}`,r,n),u=this.encodeForEventType(t,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,o){return w(this,void 0,void 0,function*(){let n=t,a=r;if(o){let i=yield o({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;n=s||t;try{a=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:a,url:n}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return w(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:o}=this.opts,n=yield o.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return[ee.click,ee.custom,ee.search,ee.view].indexOf(t)!==-1}encodeEventToJson(t,r,o){let n=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return o&&(n=`access_token=${encodeURIComponent(o)}&${n}`),n}},Bl=class{sendEvent(t,r){return w(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return w(this,void 0,void 0,function*(){return Promise.resolve()})}},Fg=globalThis.fetch,ls=class{constructor(t){this.opts=t}sendEvent(t,r){return w(this,void 0,void 0,function*(){let{baseUrl:o,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${o}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),a?yield a(s,"analyticsFetch"):{}),{url:c}=u,l=Zt(u,["url"]),m;try{m=yield Fg(c,l)}catch(p){console.error("An error has occured when sending the event.",p);return}if(m.ok){let p=yield m.json();return p.visitorId&&n.setCurrentVisitorId(p.visitorId),p}else{try{m.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,m,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return w(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield Fg(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[ee.click,ee.custom,ee.search,ee.view].indexOf(t)!==-1}getVisitorIdParam(){return w(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},_l=class{constructor(t,r){kl()&&wg()?this.storage=new Vl:kl()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new pn),this.client=new ls(t),this.beaconClient=new Ul(t),window.addEventListener("beforeunload",()=>{let o=r();for(let{eventType:n,payload:a}of o)this.beaconClient.sendEvent(n,a)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},$l=class{constructor(t,r){this.storage=r||new pn,this.client=new ls(t)}getClientDependingOnEventType(t){return this.client}},ds=class{constructor(){this.storage=new pn,this.client=new Bl}getClientDependingOnEventType(t){return this.client}},rb="xx",ob=e=>e?.startsWith(rb)||!1,nb=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function ab(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var ib=["1",1,"yes",!0];function ms(){let e=[];return Ol()&&e.push(window.doNotTrack),zl()&&e.push(navigator.doNotTrack,navigator.msDoNotTrack,navigator.globalPrivacyControl),e.some(t=>ib.indexOf(t)!==-1)}var kg="v15",Vg={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function sb(e=Vg.default,t=kg,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let o=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${o?"":"/rest"}/${t}`}var cb="38824e1f-37f5-42d3-8372-a4b8fa9df946",Ot=class{get defaultOptions(){return{endpoint:Vg.default,isCustomEndpoint:!1,token:"",version:kg,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Eg}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[YA,zA].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};ms()?this.runtime=new ds:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(ee.view,{newEventType:ee.view,addClientIdParameter:!0}),this.addEventTypeMapping(ee.click,{newEventType:ee.click,addClientIdParameter:!0}),this.addEventTypeMapping(ee.custom,{newEventType:ee.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ee.search,{newEventType:ee.search,addClientIdParameter:!0})}initRuntime(t){return Ol()&&dn()?new _l(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(ab()&&console.warn(nb),new $l(t))}get storage(){return this.runtime.storage}determineVisitorId(){return w(this,void 0,void 0,function*(){try{return Ol()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||go()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),go()}})}getCurrentVisitorId(){return w(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return w(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return w(this,void 0,void 0,function*(){if(ss(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(yg(t,yg(r,cb)))}})}getParameters(t,...r){return w(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return w(this,void 0,void 0,function*(){let o=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,o)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(go()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(ms())return null;try{let r=new URL(t).searchParams.get(Rr.cvo_cid);if(r==null)return null;let o=Rr.fromString(r);return!o||!dn()||!o.validate(document.referrer,this.acceptedLinkReferrers)?null:o.clientId}catch{}return null}resolveParameters(t,...r){return w(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:o=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[t]||{};return yield[d=>o.length>0?this.parseVariableArgumentsPayload(o,d):d[0],d=>w(this,void 0,void 0,function*(){return Object.assign(Object.assign({},d),{visitorId:n?yield this.getCurrentVisitorId():""})}),d=>w(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},d),{clientId:yield this.getCurrentVisitorId()}):d}),d=>a?this.ensureAnonymousUserWhenUsingApiKey(d):d,d=>this.beforeSendHooks.reduce((f,y)=>w(this,void 0,void 0,function*(){let S=yield f;return yield y(t,S)}),d)].reduce((d,f)=>w(this,void 0,void 0,function*(){let y=yield d;return yield f(y)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return w(this,void 0,void 0,function*(){let{usesMeasurementProtocol:o=!1}=this.eventTypeMapping[t]||{};return yield[m=>this.setTrackingIdIfTrackingIdNotPresent(m),m=>this.removeEmptyPayloadValues(m,t),m=>this.validateParams(m,t),m=>o?GP(m):m,m=>o?this.removeUnknownParameters(m):m,m=>o?this.processCustomParameters(m):this.mapCustomParametersToCustomData(m)].reduce((m,p)=>w(this,void 0,void 0,function*(){let d=yield m;return yield p(d)}),Promise.resolve(r))})}makeEvent(t,...r){return w(this,void 0,void 0,function*(){let{newEventType:o=t}=this.eventTypeMapping[t]||{},n=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,n);return{eventType:o,payload:a,log:i=>w(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:o,payload:Object.assign(Object.assign({},a),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(t,Object.assign(Object.assign({},n),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return w(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return w(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:o}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,o)}})}clear(){this.storage.removeItem("visitorId"),new is().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return w(this,void 0,void 0,function*(){return this.makeEvent(ee.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,o=Zt(t,["searchQueryUid"]);return w(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(o)).log({searchQueryUid:r})})}makeClickEvent(t){return w(this,void 0,void 0,function*(){return this.makeEvent(ee.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,o=Zt(t,["searchQueryUid"]);return w(this,void 0,void 0,function*(){return(yield this.makeClickEvent(o)).log({searchQueryUid:r})})}makeCustomEvent(t){return w(this,void 0,void 0,function*(){return this.makeEvent(ee.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,o=Zt(t,["lastSearchQueryUid"]);return w(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(o)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return w(this,void 0,void 0,function*(){return this.makeEvent(ee.view,t)})}sendViewEvent(t){return w(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return w(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return w(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let o={};for(let n=0,a=r.length;n<a;n++){let i=r[n];if(typeof i=="string")o[t[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},o),i)}return o}isKeyAllowedEmpty(t,r){return({[ee.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let o=n=>typeof n<"u"&&n!==null&&n!=="";return Object.keys(t).filter(n=>this.isKeyAllowedEmpty(r,n)||o(t[n])).reduce((n,a)=>Object.assign(Object.assign({},n),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(o=>{if(ZP(o))return!0;console.log(o,"is not processed by coveoua")}).reduce((o,n)=>Object.assign(Object.assign({},o),{[n]:t[n]}),{})}processCustomParameters(t){let{custom:r}=t,o=Zt(t,["custom"]),n={};r&&as(r)&&(n=this.lowercaseKeys(r));let a=XP(o);return Object.assign(Object.assign({},n),a)}mapCustomParametersToCustomData(t){let{custom:r}=t,o=Zt(t,["custom"]);if(r&&as(r)){let n=this.lowercaseKeys(r);return Object.assign(Object.assign({},o),{customData:Object.assign(Object.assign({},n),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),o={};return r.forEach(n=>{o[n.toLowerCase()]=t[n]}),o}validateParams(t,r){let{anonymizeIp:o}=t,n=Zt(t,["anonymizeIp"]);return o!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${o}`.toLowerCase())==-1&&(n.anonymizeIp=1),(r==ee.view||r==ee.click||r==ee.search||r==ee.custom)&&(n.originLevel3=this.limit(n.originLevel3,1024)),r==ee.view&&(n.location=this.limit(n.location,1024)),(r=="pageview"||r=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,o=Zt(t,["userId"]);return ob(this.options.token)&&!r?(o.userId="anonymous",o):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,o=Zt(t,["trackingId"]);return r?t:(o.hasOwnProperty("custom")&&as(o.custom)&&(o.custom.hasOwnProperty("context_website")||o.custom.hasOwnProperty("siteName"))&&(o.trackingId=o.custom.context_website||o.custom.siteName),o.hasOwnProperty("customData")&&as(o.customData)&&(o.customData.hasOwnProperty("context_website")||o.customData.hasOwnProperty("siteName"))&&(o.trackingId=o.customData.context_website||o.customData.siteName),o)}limit(t,r){return typeof t=="string"?dP(t,r):t}get baseUrl(){return sb(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Xt;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Xt||(Xt={}));var I;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2",e.generatedAnswerCitationClick="generatedAnswerCitationClick"})(I||(I={}));var vg={[I.triggerNotify]:"queryPipelineTriggers",[I.triggerExecute]:"queryPipelineTriggers",[I.triggerQuery]:"queryPipelineTriggers",[I.triggerRedirect]:"queryPipelineTriggers",[I.queryError]:"errors",[I.queryErrorBack]:"errors",[I.queryErrorClear]:"errors",[I.queryErrorRetry]:"errors",[I.pagerNext]:"getMoreResults",[I.pagerPrevious]:"getMoreResults",[I.pagerNumber]:"getMoreResults",[I.pagerResize]:"getMoreResults",[I.pagerScrolling]:"getMoreResults",[I.facetSearch]:"facet",[I.facetShowLess]:"facet",[I.facetShowMore]:"facet",[I.recommendation]:"recommendation",[I.likeSmartSnippet]:"smartSnippet",[I.dislikeSmartSnippet]:"smartSnippet",[I.expandSmartSnippet]:"smartSnippet",[I.collapseSmartSnippet]:"smartSnippet",[I.openSmartSnippetFeedbackModal]:"smartSnippet",[I.closeSmartSnippetFeedbackModal]:"smartSnippet",[I.sendSmartSnippetReason]:"smartSnippet",[I.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[I.clearRecentQueries]:"recentQueries",[I.recentResultClick]:"recentlyClickedDocuments",[I.clearRecentResults]:"recentlyClickedDocuments",[I.showLessFoldedResults]:"folding",[I.caseDetach]:"case",[I.likeGeneratedAnswer]:"generatedAnswer",[I.dislikeGeneratedAnswer]:"generatedAnswer",[I.openGeneratedAnswerSource]:"generatedAnswer",[I.generatedAnswerStreamEnd]:"generatedAnswer",[I.generatedAnswerSourceHover]:"generatedAnswer",[I.generatedAnswerCopyToClipboard]:"generatedAnswer",[I.generatedAnswerHideAnswers]:"generatedAnswer",[I.generatedAnswerShowAnswers]:"generatedAnswer",[I.generatedAnswerExpand]:"generatedAnswer",[I.generatedAnswerCollapse]:"generatedAnswer",[I.generatedAnswerFeedbackSubmit]:"generatedAnswer",[I.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[Xt.expandToFullUI]:"interface",[Xt.openUserActions]:"User Actions",[Xt.showPrecedingSessions]:"User Actions",[Xt.showFollowingSessions]:"User Actions",[Xt.clickViewedDocument]:"User Actions",[Xt.clickPageView]:"User Actions",[Xt.createArticle]:"createArticle"},fn=class{constructor(){this.runtime=new ds,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ee.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ee.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ee.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ee.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Eg}};function ub(e){let t="";return e.filter(r=>{let o=r!==t;return t=r,o})}function lb(e){return e.map(t=>t.replace(/;/g,""))}function jg(e){let r=e.join(";");return r.length<=256?r:jg(e.slice(1))}var Ag=e=>{let t=lb(e),r=ub(t);return jg(r)};function Pg(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Ag(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Ag(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var ps=class{constructor(t,r){this.opts=t,this.provider=r;let o=t.enableAnalytics===!1||ms();this.coveoAnalyticsClient=o?new fn:new Ot(t)}disable(){this.coveoAnalyticsClient=new fn}enable(){this.coveoAnalyticsClient=new Ot(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(I.interfaceLoad)}logInterfaceLoad(){return w(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(I.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return w(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(I.recommendation)}logRecommendation(){return w(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(I.recommendationOpen,t,r)}logRecommendationOpen(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(I.staticFilterClearAll,t)}logStaticFilterClearAll(t){return w(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(I.staticFilterSelect,t)}logStaticFilterSelect(t){return w(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(I.staticFilterDeselect,t)}logStaticFilterDeselect(t){return w(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(I.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return w(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(I.interfaceChange,t)}logInterfaceChange(t){return w(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(I.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return w(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(I.didyoumeanClick)}logDidYouMeanClick(){return w(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(I.resultsSort,t)}logResultsSort(t){return w(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(I.searchboxSubmit)}logSearchboxSubmit(){return w(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(I.searchboxClear)}logSearchboxClear(){return w(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(I.searchboxAsYouType)}logSearchboxAsYouType(){return w(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(I.breadcrumbFacet,t)}logBreadcrumbFacet(t){return w(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(I.breadcrumbResetAll)}logBreadcrumbResetAll(){return w(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(I.documentQuickview,t,r)}logDocumentQuickview(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(I.documentOpen,t,r)}logDocumentOpen(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(I.omniboxAnalytics,Pg(t))}logOmniboxAnalytics(t){return w(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(I.omniboxFromLink,Pg(t))}logOmniboxFromLink(t){return w(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(I.searchFromLink)}logSearchFromLink(){return w(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(I.triggerNotify,t)}logTriggerNotify(t){return w(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(I.triggerExecute,t)}logTriggerExecute(t){return w(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(I.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return w(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(I.undoTriggerQuery,t)}logUndoTriggerQuery(t){return w(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(I.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return w(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(I.pagerResize,t)}logPagerResize(t){return w(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(I.pagerNumber,t)}logPagerNumber(t){return w(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(I.pagerNext,t)}logPagerNext(t){return w(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(I.pagerPrevious,t)}logPagerPrevious(t){return w(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(I.pagerScrolling)}logPagerScrolling(){return w(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(I.facetClearAll,t)}logFacetClearAll(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(I.facetSearch,t)}logFacetSearch(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(I.facetSelect,t)}logFacetSelect(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(I.facetDeselect,t)}logFacetDeselect(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(I.facetExclude,t)}logFacetExclude(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(I.facetUnexclude,t)}logFacetUnexclude(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(I.facetSelectAll,t)}logFacetSelectAll(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(I.facetUpdateSort,t)}logFacetUpdateSort(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(I.facetShowMore,t)}logFacetShowMore(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(I.facetShowLess,t)}logFacetShowLess(t){return w(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(I.queryError,t)}logQueryError(t){return w(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return w(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(I.queryErrorBack);return{description:t.description,log:()=>w(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(I.queryErrorBack)})}})}logQueryErrorBack(){return w(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return w(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(I.queryErrorRetry);return{description:t.description,log:()=>w(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(I.queryErrorRetry)})}})}logQueryErrorRetry(){return w(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return w(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(I.queryErrorClear);return{description:t.description,log:()=>w(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(I.queryErrorClear)})}})}logQueryErrorClear(){return w(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(I.likeSmartSnippet)}logLikeSmartSnippet(){return w(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(I.dislikeSmartSnippet)}logDislikeSmartSnippet(){return w(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(I.expandSmartSnippet)}logExpandSmartSnippet(){return w(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(I.collapseSmartSnippet)}logCollapseSmartSnippet(){return w(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(I.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return w(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(I.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return w(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(I.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(I.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return w(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(I.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return w(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(I.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return w(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(I.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return w(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(I.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(I.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(I.copyToClipboard,t,r)}logCopyToClipboard(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(I.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(I.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(I.recentQueryClick)}logRecentQueryClick(){return w(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(I.clearRecentQueries)}logClearRecentQueries(){return w(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(I.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(I.clearRecentResults)}logClearRecentResults(){return w(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(I.noResultsBack)}logNoResultsBack(){return w(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(I.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(I.showLessFoldedResults)}logShowLessFoldedResults(){return w(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var o;return{actionCause:r,customData:(o=t.payload)===null||o===void 0?void 0:o.customData}}makeCustomEvent(t,r,o=vg[t]){return w(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:o,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(t,r,o=vg[t]){return w(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,o)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,o){return w(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),o),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(t,r,o){return w(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,o)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return w(this,void 0,void 0,function*(){let o=yield this.getBaseSearchEventRequest(t,r),n=yield this.coveoAnalyticsClient.makeSearchEvent(o);return{description:this.makeEventDescription(n,t),log:({searchUID:a})=>n.log({searchQueryUid:a})}})}makeClickEvent(t,r,o,n){return w(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},o),n))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),i=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(t,r,o,n){return w(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,o,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var o,n;return w(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(n=(o=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(o)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return w(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ot?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(I.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return w(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(I.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return w(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(I.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return w(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCitationClick(t,r){return this.makeClickEvent(I.generatedAnswerCitationClick,Object.assign(Object.assign({},t),{documentPosition:1}),{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logGeneratedAnswerCitationClick(t,r){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCitationClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(I.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(I.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(I.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(I.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(I.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(I.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(I.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(I.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(I.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return w(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(I.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return w(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(I.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return w(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},fs=Object.assign({},Ea),bg=Object.keys(fs).map(e=>fs[e]),mn=class extends jl{constructor({client:t,uuidGenerator:r=go}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>bg.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(bg.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(fs.pageview,{newEventType:ee.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(fs.event,{newEventType:ee.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var o;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((o=this.actionData)!==null&&o!==void 0?o:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),n),r)}getTicketPayload(){return yP(this.ticket)}};mn.Id="svc";var gs;(function(e){e.click="click",e.flowStart="flowStart"})(gs||(gs={}));var ot;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.documentSuggestionClick="documentSuggestionClick",e.documentSuggestionQuickview="documentSuggestionQuickview",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(ot||(ot={}));var ys;(function(e){e.quit="Quit",e.solved="Solved"})(ys||(ys={}));var hs=class{constructor(t,r){var o;this.options=t,this.provider=r;let n=((o=t.enableAnalytics)!==null&&o!==void 0?o:!0)&&!ms();this.coveoAnalyticsClient=n?new Ot(t):new fn,this.svc=new mn({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new fn,this.svc=new mn({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Ot(this.options),this.svc=new mn({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(ot.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(ot.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(ot.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.logClickEvent(ot.documentSuggestionClick,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logQuickviewDocumentSuggestion(t){return this.logClickEvent(ot.documentSuggestionQuickview,t.suggestion.suggestion,{contentIDKey:"permanentId",contentIDValue:t.suggestion.permanentId})}logRateDocumentSuggestion(t){return this.svc.setAction(ot.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(ot.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(ot.caseCancelled,{reason:ys.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(ot.caseSolved,{reason:ys.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(ot.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",gs.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",gs.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}getBaseEventRequest(t){var r,o;return w(this,void 0,void 0,function*(){let n=Object.assign({},t);return Object.assign(Object.assign({},this.getOrigins()),{customData:n,language:(r=this.provider)===null||r===void 0?void 0:r.getLanguage(),anonymous:(o=this.provider)===null||o===void 0?void 0:o.getIsAnonymous(),clientId:yield this.getClientId()})})}getClientId(){return this.coveoAnalyticsClient instanceof Ot?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getOrigins(){var t,r,o,n,a;return{originContext:(r=(t=this.provider)===null||t===void 0?void 0:t.getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:(o=this.provider)===null||o===void 0?void 0:o.getOriginLevel1(),originLevel2:(n=this.provider)===null||n===void 0?void 0:n.getOriginLevel2(),originLevel3:(a=this.provider)===null||a===void 0?void 0:a.getOriginLevel3()}}logClickEvent(t,r,o,n){var a,i;return w(this,void 0,void 0,function*(){let s=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},o),n))),{searchQueryUid:(i=(a=this.provider)===null||a===void 0?void 0:a.getSearchUID())!==null&&i!==void 0?i:"",actionCause:t});return this.coveoAnalyticsClient.sendClickEvent(s)})}};var Ss=()=>"default";var db=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},yo=class{constructor(t){this.getState=t;ye(this,"state");this.state=t()}getLanguage(){return db(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,o=t?.contextValues||{},n={};for(let[a,i]of Object.entries(o)){let s=`context_${a}`;n[s]=i}return r.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=io),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Ss()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var Dg=e=>new Ot(e).getCurrentVisitorId(),Oa=(e,t)=>typeof t=="function"?(...r)=>{let o=Ca(r[0]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics preprocessRequest. Returning original request."),o}}:void 0,ka=(e,t)=>(...r)=>{let o=Ca(r[1]);try{return t.apply(t,r)}catch(n){return e.error(n,"Error in analytics hook. Returning original request."),o}};var Va=class extends yo{getSearchUID(){return this.state.documentSuggestion?.status.lastResponseId??""}},Ng=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:o,provider:n=new Va(t)})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl??qe(a.configuration.organizationId,a.configuration.environment,"analytics"),u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new hs({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Oa(e,o),beforeSendHooks:[ka(e,r),(m,p)=>(e.info({...p,type:m,endpoint:s,token:i},"Analytics request"),p)]},n);return c||l.disable(),l};function Cs(){return{desiredCount:5,numberOfValues:8,set:{}}}var pb=(e,t)=>e.categoryFacetSet[t]?.request;var Gl=(e,t)=>{let r=pb(e,t);return At(r?.currentValues??[])};function xs(){return{}}function Mg(e){return{request:e}}function gn(){return{}}function Qg(e){return{request:e}}function yn(){return{}}function Lg(e){return{request:e,hasBreadcrumbs:!0}}function hn(){return{}}function Rs(e){return{facetSet:e.facetSet??hn(),categoryFacetSet:e.categoryFacetSet??xs(),dateFacetSet:e.dateFacetSet??gn(),numericFacetSet:e.numericFacetSet??yn(),automaticFacetSet:e.automaticFacetSet??Cs()}}var Kl=e=>{let t=[];return yb(e).forEach((r,o)=>{let n=Ab(e,r.facetId),a=Fb(r,o+1);if(gb(r)){if(!!!Gl(e,r.facetId).length)return;t.push({...a,...xb(e,r.facetId),facetType:n,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=Ug(i,s+1,n),c=fb(r)?Bg(i):Sb(i);t.push({...a,...u,...c})})}),hb(e).forEach((r,o)=>{let n=Rb(r,o+1);r.values.forEach((a,i)=>{if(a.state==="idle")return;let s=Ug(a,i+1,"specific"),u=Bg(a);t.push({...n,...s,...u})})}),t},fb=e=>e.type==="specific",gb=e=>e.type==="hierarchical",yb=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),hb=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),Ug=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Sb=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Bg=e=>({displayValue:e.value,value:e.value}),Cb=(e,t)=>Gl(e,t).map(o=>o.value).join(";"),xb=(e,t)=>{let o=Cb(e,t);return{value:o,valuePosition:1,displayValue:o}},Rb=(e,t)=>({title:_g(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Fb=(e,t)=>({title:_g(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),_g=(e,t)=>`${e}_${t}`,vb=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Ab=(e,t)=>{let r=vb(e,t);return r?r.type:"specific"};import{isNullOrUndefined as Pb}from"../../bueno/v1.1.0/bueno.esm.js";var Sn=e=>{if(bb(e)){let t=Object.values(e.answer.queries).pop()?.data;return typeof t=="object"&&t!==null&&"answerId"in t?t.answerId:void 0}if(wb(e))return e.search?.response?.extendedResults?.generativeQuestionAnsweringId},bb=e=>"answer"in e&&"generatedAnswer"in e&&!Pb(e.generatedAnswer?.answerConfigurationId),wb=e=>"search"in e&&e.search!==void 0&&typeof e.search=="object";var Ib=N(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t));var Ve=()=>({q:"",enableQuerySyntax:!1});function ja(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Je(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:ja(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:ja(),extendedResults:{},searchAction:void 0}}import{EnumValue as $g,isArray as Eb,RecordValue as qb,StringValue as Tb}from"../../bueno/v1.1.0/bueno.esm.js";var zg=(r=>(r.Ascending="ascending",r.Descending="descending",r))(zg||{}),Wg=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(Wg||{}),Yl=e=>{if(Eb(e))return e.map(t=>Yl(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Hg=()=>({by:"relevancy"});var MQ=new qb({values:{by:new $g({enum:Wg,required:!0}),order:new $g({enum:zg}),field:new Tb}});function ho(){return Yl(Hg())}var Da=class Da extends yo{constructor(){super(...arguments);ye(this,"getFacetRequest",r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response)}getFacetState(){return Kl(Rs(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||Da.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||Je().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),o=this.state.search?.response.pipeline||this.state.pipeline||Da.fallbackPipelineName;return r?o:void 0}getBaseMetadata(){let r=this.getState(),o=super.getBaseMetadata(),n=Sn(r);return n&&(o.generativeQuestionAnsweringId=n),o}getFacetMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetValue:o,facetTitle:`${a}_${r}`}}getFacetClearAllMetadata(r){let n=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:n,facetTitle:`${n}_${r}`}}getFacetUpdateSortMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,criteria:o,facetTitle:`${a}_${r}`}}getRangeBreadcrumbFacetMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetRangeEnd:o.end,facetRangeEndInclusive:o.endInclusive,facetRangeStart:o.start,facetTitle:`${a}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??ho()}}getStaticFilterToggleMetadata(r,o){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:o}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,o){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:a,categoryFacetPath:o,categoryFacetTitle:`${a}_${r}`}}getOmniboxAnalyticsMetadata(r,o){let n=this.state.querySuggest?.[r],a=n.completions.map(c=>c.expression),i=n.partialQueries.length-1,s=n.partialQueries[i]||"",u=n.responseId;return{...this.getBaseMetadata(),suggestionRanking:a.indexOf(o),partialQuery:s,partialQueries:n.partialQueries.length>0?n.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:u}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),o={};return r.generatedAnswer?.isVisible!==void 0&&(o.showGeneratedAnswer=r.generatedAnswer.isVisible),o}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Ve().q}get responseTime(){return this.state.search?.duration||Je().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||Je().response.totalCountFiltered}};ye(Da,"fallbackPipelineName","default");var Fr=Da,Gg=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:o,provider:n})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl??qe(a.configuration.organizationId,a.configuration.environment,"analytics"),u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new ps({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:Oa(e,o),beforeSendHooks:[ka(e,r),(m,p)=>(e.info({...p,type:m,endpoint:s,token:i},"Analytics request"),p)]},n);return c||l.disable(),l},Jl=()=>{let t=Tt.getInstance().getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};var Zl=()=>"";function Kg(e,t){return{...new Fr(t).getBaseMetadata(),actionCause:e,type:e}}function kb(e){return Object.assign(e,{instantlyCallable:!0})}function Vb(e,t){let r=a=>kb(_(e,a)),o=r(async(a,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await t({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(o,{prepare:async({getState:a,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await t({getState:a,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return{description:c,action:r(async(m,{getState:p,extra:d})=>await l({state:p(),extra:d}))}}}),o}var Yg=(e,t,r)=>{function o(...n){let a=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return Nb(a)}return o},jb=e=>e.configuration.analytics.analyticsMode==="legacy",Db=e=>e.configuration.analytics.analyticsMode==="next",Nb=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:o,analyticsType:n,analyticsConfigurator:a,providerClass:i})=>(r??(r=s=>new i(s)),Vb(e,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let m=[],p={log:async({state:C})=>{for(let v of m)await v(C)}},d=s(),f=a({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),y=await t(f,s());p.description=y?.description,m.push(async C=>{jb(C)&&await Mb(y,r,C,l,f.coveoAnalyticsClient)});let{emit:S}=Ia(d);return m.push(async C=>{if(Db(C)&&n&&o){let v=o(C);await Ub(S,n,v)}}),p}));async function Mb(e,t,r,o,n){t(()=>r);let a=await e?.log({searchUID:t(()=>r).getSearchUID()});o.info({client:n,response:a},"Analytics response")}var Qb=e=>r=>(o,n)=>Promise.resolve({description:{actionCause:e},log:async a=>{r(o,n)}}),Se=Yg(e=>Gg({...e,provider:e.provider||new Fr(e.getState)}),e=>e,Fr),SL=Yg(Ng,Qb("caseAssist"),Va);var Lb={urihash:new Fs,sourcetype:new Fs,permanentid:new Fs},CL={uniqueId:k,raw:new Ob({values:Lb}),title:k,uri:k,clickUri:k,rankingModifier:new Fs({required:!1,emptyAllowed:!0})};async function Ub(e,t,r){await e(t,r)}import{BooleanValue as Bb}from"../../bueno/v1.1.0/bueno.esm.js";var vs=g("facet/updateFacetAutoSelection",e=>F(e,{allow:new Bb({required:!0})}));var As=class extends Fr{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let o in r)for(let n in r[o].cache)if(r[o].cache[n].isActive)return r[o].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let o in r)for(let n in r[o].cache)if(r[o].cache[n].isActive)return r[o].cache[n];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Ve().q}get responseTime(){return this.activeInstantResultCache?.duration??Je().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??Je().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var Jg=()=>Se("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new As(e)),Zg=()=>({actionCause:"searchboxAsYouType"});var Xl={id:k},Wb={...Xl,q:me},DL=g("instantResults/register",e=>F(e,Xl)),Ps=g("instantResults/updateQuery",e=>F(e,Wb)),NL=g("instantResults/clearExpired",e=>F(e,Xl));import{NumberValue as Hb}from"../../bueno/v1.1.0/bueno.esm.js";var bs=new Hb({required:!0,min:0}),Xg=g("pagination/registerNumberOfResults",e=>F(e,bs)),ey=g("pagination/updateNumberOfResults",e=>F(e,bs)),ty=g("pagination/registerPage",e=>F(e,bs)),ws=g("pagination/updatePage",e=>F(e,bs)),ry=g("pagination/nextPage"),oy=g("pagination/previousPage");import{BooleanValue as Gb,StringValue as Kb}from"../../bueno/v1.1.0/bueno.esm.js";var vr=g("query/updateQuery",e=>F(e,{q:new Kb,enableQuerySyntax:new Gb}));import{isNullOrUndefined as Yb}from"../../bueno/v1.1.0/bueno.esm.js";var So=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:t.capture??t.clientId!=="",source:pr(e)}});var Is=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??et(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&So(e.configuration.analytics,t,r),...e.excerptLength&&!Yb(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});import{NumberValue as Ey}from"../../bueno/v1.1.0/bueno.esm.js";import{isNullOrUndefined as Jb}from"../../bueno/v1.1.0/bueno.esm.js";var Cn=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await Dg(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Jl()&&{pageId:Jl()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:pr(e)}}}};var xn=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??et(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{actionsHistory:Tt.getInstance().getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Cn(e.configuration.analytics,t),...e.excerptLength&&!Jb(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Co=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var ed=()=>Se("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),Ar=e=>Se("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Ve().q,aq:r.advancedSearchQueries?.aq||Co().aq,cq:r.advancedSearchQueries?.cq||Co().cq,dq:r.advancedSearchQueries?.dq||Co().dq,errorType:e.type,errorMessage:e.message}));var Ma=zt(Es(),1),uy=zt(ny(),1);import{NumberValue as Xb,Schema as ew,StringValue as cy}from"../../bueno/v1.1.0/bueno.esm.js";var qs=zt(Es(),1),iy=zt(ay(),1);qs.default.extend(iy.default);var Ts="YYYY/MM/DD@HH:mm:ss",Zb="1401-01-01";function xo(e,t){let r=(0,qs.default)(e,t);return!r.isValid()&&!t?(0,qs.default)(e,Ts):r}function Na(e){return e.format(Ts)}function sy(e){return Na(xo(e))===e}function Os(e,t){let r=xo(e,t);if(!r.isValid()){let o=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?n:o}`)}sd(r)}function sd(e){if(e.isBefore(Zb))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Ma.default.extend(uy.default);var ly=["past","now","next"],dy=["minute","hour","day","week","month","quarter","year"],tw=e=>{let t=e==="now";return{amount:new Xb({required:!t,min:1}),unit:new cy({required:!t,constrainTo:dy}),period:new cy({required:!0,constrainTo:ly})}};function Ro(e){if(typeof e=="string"&&!kt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?cd(e):e;new ew(tw(t.period)).validate(t);let r=py(t),o=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${o}`);sd(r)}function my(e){let{period:t,amount:r,unit:o}=e;switch(t){case"past":case"next":return`${t}-${r}-${o}`;case"now":return t}}function py(e){let{period:t,amount:r,unit:o}=e;switch(t){case"past":return(0,Ma.default)().subtract(r,o);case"next":return(0,Ma.default)().add(r,o);case"now":return(0,Ma.default)()}}function Qa(e){return Na(py(cd(e)))}function fy(e){return e.toLocaleLowerCase().split("-")}function kt(e){let[t,r,o]=fy(e);if(t==="now")return!0;if(!ly.includes(t)||!dy.includes(o))return!1;let n=parseInt(r);return!(Number.isNaN(n)||n<=0)}function gy(e){return!!e&&typeof e=="object"&&"period"in e}function cd(e){let[t,r,o]=fy(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:o||void 0}}function rw(e){return Ro(e),cd(e)}function yy(e){return e.type==="dateRange"}function hy(e){return`start${e}`}function Sy(e){return`end${e}`}var Cy=()=>({dateFacetValueMap:{}});function ow(e,t,r){let o=e.start,n=e.end;return kt(o)&&(o=Qa(o),r.dateFacetValueMap[t][hy(o)]=e.start),kt(n)&&(n=Qa(n),r.dateFacetValueMap[t][Sy(n)]=e.end),{...e,start:o,end:n}}function xy(e,t){if(yy(e)){let{facetId:r,currentValues:o}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:o.map(n=>ow(n,r,t))}}return e}function Pr(e){let t=Cy();return{request:{...e,facets:e.facets?.map(o=>xy(o,t))},mappings:t}}function nw(e,t,r){return{...e,start:r.dateFacetValueMap[t][hy(e.start)]||e.start,end:r.dateFacetValueMap[t][Sy(e.end)]||e.end}}function aw(e,t){return e.facetId in t.dateFacetValueMap}function iw(e,t){return aw(e,t)?{...e,values:e.values.map(r=>nw(r,e.facetId,t))}:e}function ks(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(o=>iw(o,t))}}:e}import{isNullOrUndefined as Iy}from"../../bueno/v1.1.0/bueno.esm.js";import{isNullOrUndefined as QU}from"../../bueno/v1.1.0/bueno.esm.js";var Vs=e=>e.success!==void 0,at=e=>e.error!==void 0;import{StringValue as dw}from"../../bueno/v1.1.0/bueno.esm.js";var ZU=g("didYouMean/enable"),XU=g("didYouMean/disable"),eB=g("didYouMean/automaticCorrections/disable"),tB=g("didYouMean/automaticCorrections/enable"),Rn=g("didYouMean/correction",e=>F(e,k)),rB=g("didYouMean/automaticCorrections/mode",e=>F(e,new dw({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));var ud=()=>Se("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic());var Ry=()=>({actionCause:"didYouMeanAutomatic"});function Fy(){return{contextValues:{}}}var js=()=>!1;function vy(){return{contextValues:{}}}function ld(){return{enabled:!0,tabs:{}}}function Ds(){return{freezeFacetOrder:!1,facets:{}}}function Fn(){return[]}function br(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Ns(){return{}}function Ay(){return{}}function Py(){return{}}function Vt(e){return{context:e.context||Fy(),dictionaryFieldContext:e.dictionaryFieldContext||vy(),facetSet:e.facetSet||hn(),numericFacetSet:e.numericFacetSet||yn(),dateFacetSet:e.dateFacetSet||gn(),categoryFacetSet:e.categoryFacetSet||xs(),automaticFacetSet:e.automaticFacetSet??Cs(),pagination:e.pagination||br(),query:e.query||Ve(),tabSet:e.tabSet||Py(),advancedSearchQueries:e.advancedSearchQueries||Co(),staticFilterSet:e.staticFilterSet||Ay(),querySet:e.querySet||Ns(),sortCriteria:e.sortCriteria||ho(),pipeline:e.pipeline||Zl(),searchHub:e.searchHub||Ss(),facetOptions:e.facetOptions||Ds(),facetOrder:e.facetOrder??Fn(),debug:e.debug??js()}}import{RecordValue as mw}from"../../bueno/v1.1.0/bueno.esm.js";var QB=new mw({values:{undoneQuery:me},options:{required:!0}}),by=()=>Se("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null);import{RecordValue as pw,StringValue as fw}from"../../bueno/v1.1.0/bueno.esm.js";var Ms=g("trigger/query/ignore",e=>F(e,new fw({emptyAllowed:!0,required:!0}))),Qs=g("trigger/query/modification",e=>F(e,new pw({values:{originalQuery:ne,modification:ne}})));function wr(e){return Object.values(e).map(t=>t.request)}function dd(e,t){let r={};e.forEach(a=>{r[a.facetId]=a});let o=[];t.forEach(a=>{a in r&&(o.push(r[a]),delete r[a])});let n=Object.values(r);return[...o,...n]}function wy(e){return wr(e).map(t=>{let o=t.currentValues.some(({state:n})=>n!=="idle");return t.generateAutomaticRanges&&!o?{...t,currentValues:[]}:t})}var md={alphanumericDescending:{type:"alphanumeric",order:"descending"},alphanumericNaturalDescending:{type:"alphanumericNatural",order:"descending"}};function gw(e){return wr(e).map(t=>{let r=md[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function yw(e){return[...gw(e.facetSet??{}),...wy(e.numericFacetSet??{}),...wy(e.dateFacetSet??{}),...wr(e.categoryFacetSet??{})]}function hw(e){return yw(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function pd(e){return dd(hw(e),e.facetOrder??[])}var Er=async(e,t)=>{let r=xw(e),o=pd(e),n=Sw(e),a=await xn(e,t),i=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Pr({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...o.length&&{facets:o},...e.pagination&&{numberOfResults:i(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:n}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function Sw(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(Cw).filter(r=>r.currentValues.length>0):void 0}function Cw(e){let{field:t,label:r,values:o}=e,n=o.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:n}}function xw(e){let t=e.advancedSearchQueries?.cq.trim()||"",o=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",n=Rw(e);return[t,o,...n].filter(a=>!!a).join(" AND ")}function Rw(e){return Object.values(e.staticFilterSet||{}).map(r=>{let o=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),n=o.map(a=>a.expression).join(" OR ");return o.length>1?`(${n})`:n})}var qr=class{constructor(t,r=o=>{this.dispatch(vr({q:o}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},o){let n=Date.now(),a=ks(await this.extra.apiClient.search(r,o),t),i=Date.now()-n,s=this.getState().query?.q||"";return{response:a,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return at(t.response)?(this.dispatch(Ar(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),o=this.getSuccessResponse(t);if(!o||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:u}=o;if(!n||!a)return null;let c=i.length===0&&s&&s.length!==0,l=!Iy(u)&&!Iy(u.correctedQuery);if(!c&&!l)return null;let p=c?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(qt(Vt(this.getState()))),p}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),o=this.getSuccessResponse(t);if(!o.queryCorrections)return null;let{correctedQuery:n}=o.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return at(a.response)?(this.dispatch(Ar(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(qt(Vt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:o.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:ud()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:o,originalQuery:n}=r.queryCorrection;return this.onUpdateQueryForCorrection(o),{...t,response:{...r},queryExecuted:o,automaticallyCorrected:!0,originalQuery:n,analyticsAction:ud()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),o=this.getSuccessResponse(t);this.analyticsAction?.()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,o),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let o=r.triggers.find(s=>s.type==="query")?.content||"";if(!o)return null;if(this.getState().triggers?.queryModification.queryToIgnore===o)return this.dispatch(Ms("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(o);return at(i.response)?(this.dispatch(Ar(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(qt(Vt(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:by()})}getStateAfterResponse(t,r,o,n){return{...o,query:{q:t,enableQuerySyntax:o.query?.enableQuerySyntax??Ve().enableQuerySyntax},search:{...Je(),duration:r,response:n,results:n.results}}}processSuccessResponse(t){return this.dispatch(qt(Vt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return Vs(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Er(this.getState()),{origin:"mainSearch"});return this.dispatch(Rn(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Qs({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Er(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var Ls=_("search/executeSearch",async(e,t)=>{let r=t.getState();return await _s(r,t,e)}),Us=_("search/fetchPage",async(e,t)=>{let r=t.getState();return await gd(r,t,e)}),Bs=_("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await yd(t,r)}),qy=_("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await Pw(t,e,r)}),w_=_("search/fetchInstantResults",async(e,t)=>fd(e,t)),Fw=async(e,t)=>{let r=await Er(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},vw=async(e,t,r)=>{let o=await xn(e);return Pr({...o,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},Aw=async(e,t)=>{let r=await Er(e,t);return r.request.numberOfResults=0,r},Ty=e=>{e.configuration.analytics.enabled&&Tt.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function fd(e,t){F(e,{id:k,q:k,maxResultsPerQuery:new Ey({required:!0,min:1}),cacheTimeout:new Ey});let{q:r,maxResultsPerQuery:o}=e,n=t.getState(),a=new qr({...t,analyticsAction:Jg()},c=>{t.dispatch(Ps({q:c,id:e.id}))}),i=await vw(n,r,o),s=await a.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await a.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function gd(e,t,r){Ty(e);let{analyticsClientMiddleware:o,preprocessRequest:n,logger:a}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:n,logger:a}),s=new qr({...t,analyticsAction:r}),u=await Er(e,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function yd(e,t){let{analyticsClientMiddleware:r,preprocessRequest:o,logger:n}=e.extra,{description:a}=await ed().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:o,logger:n}),i=new qr({...e,analyticsAction:ed()}),s=await Fw(t,a),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function Pw(e,t,r){let{analyticsClientMiddleware:o,preprocessRequest:n,logger:a}=e.extra,{description:i}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:o,preprocessRequest:n,logger:a}),s=new qr({...e,analyticsAction:t}),u=await Aw(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function _s(e,t,r){Ty(e);let{analyticsClientMiddleware:o,preprocessRequest:n,logger:a}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:o,preprocessRequest:n,logger:a});i?.actionCause&&t.dispatch(La({actionCause:i.actionCause}));let s=await Er(e,i),u=new qr({...t,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}import{isNullOrUndefined as ky}from"../../bueno/v1.1.0/bueno.esm.js";var hd=N(e=>e.staticFilterSet,e=>Object.values(e||{}).map(r=>{let o=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),n=o.map(a=>a.expression).join(" OR ");return o.length>1?`(${n})`:n}));var it=async(e,t,r)=>{let o=Ow(e),n=bw(e),a=ww(e),i=e.configuration.analytics.analyticsMode==="legacy"?await xn(e,r):Is(e,t,r),s=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Pr({...i,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...o&&{cq:o},...n.length&&{facets:n},...e.pagination&&{numberOfResults:s(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function bw(e){return dd(Ew(e),e.facetOrder??[])}function ww(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(Iw).filter(r=>r.currentValues.length>0):void 0}function Iw(e){let{field:t,label:r,values:o}=e,n=o.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:n}}function Ew(e){return qw(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function qw(e){return[...Tw(e.facetSet??{}),...Oy(e.numericFacetSet??{}),...Oy(e.dateFacetSet??{}),...wr(e.categoryFacetSet??{})]}function Tw(e){return wr(e).map(t=>{let r=md[t.sortCriteria];return r?{...t,sortCriteria:r}:t})}function Oy(e){return wr(e).map(t=>{let r=t.currentValues,o=r.some(({state:a})=>a!=="idle"),n=r.some(a=>a.previousState);return t.generateAutomaticRanges&&!o&&!n?{...t,currentValues:[]}:t})}function Ow(e){let t=e.advancedSearchQueries?.cq.trim()||"",o=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",n=hd(e);return[t,o,...n].filter(a=>!!a).join(" AND ")}var Tr=class{constructor(t,r=o=>{this.dispatch(vr({q:o}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},o){let n=Date.now(),a=ks(await this.extra.apiClient.search(r,o),t),i=Date.now()-n,s=this.getState().query?.q||"";return{response:a,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return at(t.response)?(this.dispatch(Ar(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),o=this.getSuccessResponse(t);if(!o||!r.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:u}=o;if(!n||!a)return null;let c=i.length===0&&s&&s.length!==0,l=!ky(u)&&!ky(u.correctedQuery);if(!c&&!l)return null;let p=c?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(qt(Vt(this.getState()))),p}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),o=this.getSuccessResponse(t);if(!o.queryCorrections)return null;let{correctedQuery:n}=o.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return at(a.response)?(this.dispatch(Ar(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(qt(Vt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:o.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:o,originalQuery:n}=r.queryCorrection;return this.onUpdateQueryForCorrection(o),{...t,response:{...r},queryExecuted:o,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let o=r.triggers.find(s=>s.type==="query")?.content||"";if(!o)return null;if(this.getState().triggers?.queryModification.queryToIgnore===o)return this.dispatch(Ms("")),null;let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(o);return at(i.response)?(this.dispatch(Ar(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(qt(Vt(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(t){return this.dispatch(qt(Vt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return Vs(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:o}=Ry(),n=await this.fetchFromAPI(await it(r,this.extra.navigatorContext,{actionCause:o}),{origin:"mainSearch"});return this.dispatch(Rn(t)),n}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Qs({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await it(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var Vw=_("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;F(e,{q:new kw,enableQuerySyntax:new Vy,clearFilters:new Vy}),e.clearFilters&&(r(Et()),r(ts())),r(vs({allow:!0})),r(vr({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ws(1))}),La=g("search/updateSearchAction"),ie=_("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return _s(r,t,e.legacy);Ny(r);let o=e.next?My(e.next):void 0;t.dispatch(La(e.next));let n=await it(r,t.extra.navigatorContext,o),a=new Tr({...t,analyticsAction:o??{}}),i=await a.fetchFromAPI(n,{origin:"mainSearch"});return await a.process(i)}),f1=_("search/fetchPage",async(e,t)=>{let r=t.getState();if(Ny(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return gd(r,t,e.legacy);let o=new Tr({...t,analyticsAction:e.next}),n=await it(r,t.extra.navigatorContext,e.next),a=await o.fetchFromAPI(n,{origin:"mainSearch"});return await o.process(a)}),g1=_("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return yd(t,r);let o=Kg("browseResults",t.getState),n=new Tr({...t,analyticsAction:o}),a=await jw(r,t.extra.navigatorContext,o),i=await n.fetchFromAPI(a,{origin:"mainSearch"});return await n.process(i)}),Dy=_("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return _s(r,t,e.legacy);let o=new Tr({...t,analyticsAction:{}}),n=await Nw(r,t.extra.navigatorContext),a=await o.fetchFromAPI(n,{origin:"facetValues"});return await o.process(a)}),y1=_("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return fd(e,t);F(e,{id:k,q:k,maxResultsPerQuery:new jy({required:!0,min:1}),cacheTimeout:new jy});let{q:o,maxResultsPerQuery:n}=e,a=My(Zg()),i=await Dw(r,t.extra.navigatorContext,o,n,a),s=new Tr({...t,analyticsAction:a},l=>{t.dispatch(Ps({q:l,id:e.id}))}),u=await s.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),c=await s.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),jw=async(e,t,r)=>{let o=await it(e,t,r);return o.request={...o.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},o},Dw=async(e,t,r,o,n)=>{let a=Is(e,t,n);return Pr({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:o,q:r})},Nw=async(e,t,r)=>{let o=await it(e,t,r);return o.request.numberOfResults=0,o},Ny=e=>{e.configuration.analytics.enabled&&Tt.getInstance().addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},My=e=>({actionCause:e.actionCause,type:e.actionCause});import{BooleanValue as Qy,NumberValue as Ly,RecordValue as Or,StringValue as Ua}from"../../bueno/v1.1.0/bueno.esm.js";var $s={q:new Ua,enableQuerySyntax:new Qy,aq:new Ua,cq:new Ua,firstResult:new Ly({min:0}),numberOfResults:new Ly({min:0}),sortCriteria:new Ua,f:new Or,fExcluded:new Or,cf:new Or,nf:new Or,mnf:new Or,df:new Or,debug:new Qy,sf:new Or,tab:new Ua,af:new Or};var we=g("searchParameters/restore",e=>F(e,$s)),Uy=g("searchParameters/restoreTab",e=>F(e,k));function vn(e,t){let{facetId:r,criterion:o}=t,n=e[r]?.request;n&&(n.sortCriteria=o)}function Ba(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,previousState:t.state!=="idle"?t.state:void 0,state:"idle"})),e.preventAutoSelect=!0)}function By(e,t){e&&(e.numberOfValues=t)}import{ArrayValue as Wy,BooleanValue as Fd,NumberValue as xd,RecordValue as vd,StringValue as Js,Value as Rd}from"../../bueno/v1.1.0/bueno.esm.js";import{ArrayValue as Sd,BooleanValue as zs,NumberValue as _y,RecordValue as Cd,StringValue as kr}from"../../bueno/v1.1.0/bueno.esm.js";var Ws=new kr({regex:/^[a-zA-Z0-9-_]+$/}),Hs=new kr({required:!0}),b1=new Sd({each:new kr}),w1=new kr,I1=new zs,Gs=new zs,Ks=new _y({min:0}),_a=new _y({min:1}),Ys=new zs({required:!0}),Mw=new Cd,Qw=new kr,Lw={captions:Mw,numberOfValues:_a,query:Qw},E1=new Cd({values:Lw}),$y=new Cd({options:{required:!1},values:{type:new kr({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new Sd({required:!0,max:25,each:new kr({emptyAllowed:!1,required:!0})})}}),q1=new zs,zy=new Sd({min:1,max:25,required:!1,each:new kr({emptyAllowed:!1,required:!0})});import{NumberValue as Uw}from"../../bueno/v1.1.0/bueno.esm.js";var jt={value:k,numberOfResults:new Uw({min:0}),state:k};var Bw={facetId:Y,field:new Js({required:!0,emptyAllowed:!0}),tabs:new vd({options:{required:!1},values:{included:new Wy({each:new Js}),excluded:new Wy({each:new Js})}}),activeTab:new Js({required:!1}),filterFacetCount:new Fd({required:!1}),injectionDepth:new xd({required:!1,min:0}),numberOfValues:new xd({required:!1,min:1}),sortCriteria:new Rd({required:!1}),resultsMustMatch:new Rd({required:!1}),allowedValues:$y,customSort:zy},Zs=g("facet/register",e=>F(e,Bw)),Xs=g("facet/toggleSelectValue",e=>F(e,{facetId:Y,selection:new vd({values:jt})})),ec=g("facet/toggleExcludeValue",e=>F(e,{facetId:Y,selection:new vd({values:jt})})),ze=g("facet/deselectAll",e=>F(e,Y)),Hy=g("facet/updateSortCriterion",e=>F(e,{facetId:Y,criterion:new Rd({required:!0})})),Gy=g("facet/updateNumberOfValues",e=>F(e,{facetId:Y,numberOfValues:new xd({required:!0,min:1})})),Ky=g("facet/updateIsFieldExpanded",e=>F(e,{facetId:Y,isFieldExpanded:new Fd({required:!0})})),Yy=g("facet/updateFreezeCurrentValues",e=>F(e,{facetId:Y,freezeCurrentValues:new Fd({required:!0})}));var X1=B(hn(),e=>{e.addCase(Zs,(t,r)=>{let{facetId:o}=r.payload;o in t||(t[o]=Lg($w(r.payload)))}).addCase(xe.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(we,(t,r)=>{let o=r.payload.f||{},n=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],u=o[i]||[],c=n[i]||[],l=u.length+c.length,m=s.currentValues.filter(p=>!u.includes(p.value)&&!c.includes(p.value));s.currentValues=[...u.map(Zy),...c.map(Xy),...m.map(zw)],s.preventAutoSelect=l>0,s.numberOfValues=Math.max(l,s.numberOfValues)})}).addCase(Xs,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a)return;a.preventAutoSelect=!0;let i=a.currentValues.find(u=>u.value===n.value);if(!i){tc(a,n);return}let s=i.state==="selected";i.previousState=i.state,i.state=s?"idle":"selected",a.freezeCurrentValues=!0}).addCase(ec,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a)return;a.preventAutoSelect=!0;let i=a.currentValues.find(u=>u.value===n.value);if(!i){tc(a,n);return}let s=i.state==="excluded";i.previousState=i.state,i.state=s?"idle":"excluded",a.freezeCurrentValues=!0}).addCase(Yy,(t,r)=>{let{facetId:o,freezeCurrentValues:n}=r.payload,a=t[o]?.request;a&&(a.freezeCurrentValues=n)}).addCase(ze,(t,r)=>{Ba(t[r.payload]?.request)}).addCase(Et,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Ba(r))}).addCase(ts,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Ba(r))}).addCase(vs,(t,r)=>Object.values(t).forEach(o=>{o.request.preventAutoSelect=!r.payload.allow})).addCase(Hy,(t,r)=>{vn(t,r.payload)}).addCase(Gy,(t,r)=>{let{facetId:o,numberOfValues:n}=r.payload;By(t[o]?.request,n)}).addCase(Ky,(t,r)=>{let{facetId:o,isFieldExpanded:n}=r.payload,a=t[o]?.request;a&&(a.isFieldExpanded=n)}).addCase(ie.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>Jy(t[n.facetId]?.request,n))}).addCase(Dy.fulfilled,(t,r)=>{r.payload.response.facets.forEach(n=>Jy(t[n.facetId]?.request,n))}).addCase(Ye,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a)return;let{rawValue:i}=n,{currentValues:s}=a,u=s.find(l=>l.value===i);if(u){u.state="selected";return}let c=Zy(i);tc(a,c),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(yt,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a)return;let{rawValue:i}=n,{currentValues:s}=a,u=s.find(l=>l.value===i);if(u){u.state="excluded";return}let c=Xy(i);tc(a,c),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Jt,(t,r)=>{if(!(r.payload in t))return;let{request:o}=t[r.payload];Ba(o)})});function tc(e,t){let{currentValues:r}=e,o=r.findIndex(a=>a.state==="idle"),n=o===-1?r.length:o;e.currentValues.splice(n,0,t),o>-1&&e.currentValues.pop(),e.numberOfValues=e.currentValues.length}function Jy(e,t){e&&(e.currentValues=t.values.map(Ad),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var _w={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function $w(e){return{..._w,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function Ad(e){let{value:t,state:r}=e;return{value:t,state:r}}function Zy(e){return{value:e,state:"selected"}}function Xy(e){return{value:e,state:"excluded"}}function zw(e){return{...e,state:"idle"}}var oc={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function nc(e,t){let{request:r}=t,{facetId:o}=r;if(o in e)return;let n=eh(r);r.numberOfValues=n,e[o]=t}function ac(e,t,r){let o=e[t]?.request;o&&(o.currentValues=r,o.numberOfValues=eh(o))}function ic(e,t,r){let o=e[t]?.request;if(!o)return;let n=rc(o.currentValues,r);if(!n)return;let a=n.state==="selected";n.previousState=n.state,n.state=a?"idle":"selected",o.preventAutoSelect=!0}function sc(e,t,r){let o=e[t]?.request;if(!o)return;let n=rc(o.currentValues,r);if(!n)return;let a=n.state==="excluded";n.previousState=n.state,n.state=a?"idle":"excluded",o.preventAutoSelect=!0}function Vr(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(o=>{o.state!=="idle"&&(o.previousState=o.state),o.state="idle"})}function cc(e,t){Object.entries(e).forEach(([r,{request:o}])=>{let n=t[r]||[];o.currentValues.forEach(s=>(!!rc(n,s)&&(s.state="selected"),s));let a=n.filter(s=>!rc(o.currentValues,s)),i=o.currentValues;i.push(...a),o.numberOfValues=Math.max(o.numberOfValues,i.length)})}function uc(e,t,r){t.forEach(o=>{let n=o.facetId,a=e[n]?.request;if(!a)return;let i=r(o.values);a.currentValues=i,a.preventAutoSelect=!1})}function rc(e,t){let{start:r,end:o}=t;return e.find(n=>n.start===r&&n.end===o)}function $a(e,t){let{start:r,end:o,endInclusive:n}=t;return e.find(a=>a.start===r&&a.end===o&&a.endInclusive===n)}function eh(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:o}=e;return t?Math.max(o,r.length):r.length}import{ArrayValue as dc,BooleanValue as wd,NumberValue as nh,RecordValue as Wa,StringValue as bd,Value as ah}from"../../bueno/v1.1.0/bueno.esm.js";function jr(e){let t=th(e.start,e),r=th(e.end,e),o=e.endInclusive??!1,n=e.state??"idle";return{start:t,end:r,endInclusive:o,state:n}}function th(e,t){let{dateFormat:r}=t;return gy(e)?(Ro(e),my(e)):typeof e=="string"&&kt(e)?(Ro(e),e):(Os(e,r),Na(xo(e,r)))}import{Value as Ww}from"../../bueno/v1.1.0/bueno.esm.js";var za=g("rangeFacet/updateSortCriterion",e=>F(e,{facetId:Y,criterion:new Ww({required:!0})}));import{BooleanValue as oh,NumberValue as lc,RecordValue as rh}from"../../bueno/v1.1.0/bueno.esm.js";var Fo={state:k,start:new lc({required:!0}),end:new lc({required:!0}),endInclusive:new oh({required:!0}),numberOfResults:new lc({required:!0,min:0})},ht={start:k,end:k,endInclusive:new oh({required:!0}),state:k,numberOfResults:new lc({required:!0,min:0})},Pd=e=>({facetId:Y,selection:typeof e.start=="string"?new rh({values:ht}):new rh({values:Fo})});var Hw={start:k,end:k,endInclusive:new wd({required:!0}),state:k},Gw={facetId:Y,field:k,tabs:new Wa({options:{required:!1},values:{included:new dc({each:new bd}),excluded:new dc({each:new bd})}}),activeTab:new bd({required:!1}),currentValues:new dc({required:!1,each:new Wa({values:Hw})}),generateAutomaticRanges:new wd({required:!0}),filterFacetCount:new wd({required:!1}),injectionDepth:new nh({required:!1,min:0}),numberOfValues:new nh({required:!1,min:1}),sortCriteria:new ah({required:!1}),rangeAlgorithm:new ah({required:!1})};function ih(e){return kt(e)?Qa(e):e}function Ha(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:o}=jr(t);if(xo(ih(r)).isAfter(xo(ih(o))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var Ga=g("dateFacet/register",e=>{try{return he(e,Gw),Ha(e),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}}),An=g("dateFacet/toggleSelectValue",e=>F(e,{facetId:Y,selection:new Wa({values:ht})})),Pn=g("dateFacet/toggleExcludeValue",e=>F(e,{facetId:Y,selection:new Wa({values:ht})})),mc=g("dateFacet/updateFacetValues",e=>{try{return he(e,{facetId:Y,values:new dc({each:new Wa({values:ht})})}),Ha({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}}),sh=za,ch=ze;var Kw=B(gn(),e=>{e.addCase(Ga,(t,r)=>{let{payload:o}=r,n=Yw(o);nc(t,Mg(n))}).addCase(xe.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase(we,(t,r)=>{let o=r.payload.df||{};cc(t,o)}).addCase(An,(t,r)=>{let{facetId:o,selection:n}=r.payload;ic(t,o,n)}).addCase(Pn,(t,r)=>{let{facetId:o,selection:n}=r.payload;sc(t,o,n)}).addCase(mc,(t,r)=>{let{facetId:o,values:n}=r.payload;ac(t,o,n)}).addCase(ch,(t,r)=>{Vr(t,r.payload)}).addCase(Et,t=>{Object.keys(t).forEach(r=>{Vr(t,r)})}).addCase(sh,(t,r)=>{vn(t,r.payload)}).addCase(ie.fulfilled,(t,r)=>{let o=r.payload.response.facets;uc(t,o,pc)}).addCase(Jt,(t,r)=>{Vr(t,r.payload)})});function Yw(e){return{...oc,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function pc(e){return e.map(t=>{let{numberOfResults:r,...o}=t;return o})}import{ArrayValue as fc,BooleanValue as Ed,NumberValue as gc,RecordValue as Ka,StringValue as Id,Value as uh}from"../../bueno/v1.1.0/bueno.esm.js";var Jw={state:k,start:new gc({required:!0}),end:new gc({required:!0}),endInclusive:new Ed({required:!0})},Zw={facetId:Y,field:k,tabs:new Ka({options:{required:!1},values:{included:new fc({each:new Id}),excluded:new fc({each:new Id})}}),activeTab:new Id({required:!1}),currentValues:new fc({required:!1,each:new Ka({values:Jw})}),generateAutomaticRanges:new Ed({required:!0}),filterFacetCount:new Ed({required:!1}),injectionDepth:new gc({required:!1,min:0}),numberOfValues:new gc({required:!1,min:1}),sortCriteria:new uh({required:!1}),rangeAlgorithm:new uh({required:!1})};function Ya(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var Ja=g("numericFacet/register",e=>{try{return F(e,Zw),Ya(e),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}}),bn=g("numericFacet/toggleSelectValue",e=>F(e,{facetId:Y,selection:new Ka({values:Fo})})),wn=g("numericFacet/toggleExcludeValue",e=>F(e,{facetId:Y,selection:new Ka({values:Fo})})),yc=g("numericFacet/updateFacetValues",e=>{try{return he(e,{facetId:Y,values:new fc({each:new Ka({values:Fo})})}),Ya({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}}),lh=za,dh=ze;var mh=B(yn(),e=>{e.addCase(Ja,(t,r)=>{let{payload:o}=r,n=Xw(o);nc(t,Qg(n))}).addCase(xe.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase(we,(t,r)=>{let o=r.payload.nf||{};cc(t,o)}).addCase(bn,(t,r)=>{let{facetId:o,selection:n}=r.payload;ic(t,o,n)}).addCase(wn,(t,r)=>{let{facetId:o,selection:n}=r.payload;sc(t,o,n)}).addCase(yc,(t,r)=>{let{facetId:o,values:n}=r.payload;ac(t,o,n)}).addCase(dh,(t,r)=>{Vr(t,r.payload)}).addCase(Et,t=>{Object.keys(t).forEach(r=>{Vr(t,r)})}).addCase(lh,(t,r)=>{vn(t,r.payload)}).addCase(ie.fulfilled,(t,r)=>{let o=r.payload.response.facets;uc(t,o,qd)}).addCase(Jt,(t,r)=>{Vr(t,r.payload)})});function Xw(e){return{...oc,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function qd(e){return e.map(t=>{let{numberOfResults:r,...o}=t;return o})}import{RecordValue as eI,StringValue as tI}from"../../bueno/v1.1.0/bueno.esm.js";var ae=_("commerce/productListing/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let a=t(),i=await o.getProductListing(tt(a,n));return Te(i)?r(i.error):{response:i.success}}),Dr=_("commerce/productListing/fetchMoreProducts",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let a=t();if(!Op(a))return null;let s=sr(a),c=ya(a)/s,l=await o.getProductListing({...tt(a,n),page:c});return Te(l)?r(l.error):{response:l.success}}),rI={child:new eI({options:{required:!0},values:{permanentid:new tI({required:!0})}})},In=g("commerce/productListing/promoteChildToParent",e=>F(e,rI));import{NumberValue as ph,RecordValue as St}from"../../bueno/v1.1.0/bueno.esm.js";var En={f:new St,fExcluded:new St,lf:new St,cf:new St,nf:new St,nfExcluded:new St,mnf:new St,mnfExcluded:new St,df:new St,dfExcluded:new St,sortCriteria:new St,page:new ph({min:0}),perPage:new ph({min:1})};var je=g("commerce/productListingParameters/restore",e=>F(e,En));import{NumberValue as oI}from"../../bueno/v1.1.0/bueno.esm.js";var fh=(e,t,r)=>({...fr(t,r),query:t.querySet[e]});var Nr=g("commerce/querySuggest/clear",e=>F(e,{id:k})),De=_("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,validatePayload:n,navigatorContext:a}})=>{n(e,{id:k});let i=t(),s=fh(e.id,i,a),u=await o.querySuggest(s);return Te(u)?r(u.error):{id:e.id,query:s.query,...u.success}}),qn=g("commerce/querySuggest/register",e=>F(e,{id:k,count:new oI({min:0})})),Dt=g("commerce/querySuggest/selectSuggestion",e=>F(e,{id:k,expression:me}));import{StringValue as nI}from"../../bueno/v1.1.0/bueno.esm.js";var hc={q:new nI,...En};var fe=g("commerce/searchParameters/restore",e=>F(e,hc));import{NumberValue as dI}from"../../bueno/v1.1.0/bueno.esm.js";import{ArrayValue as aI,BooleanValue as iI,NumberValue as sI,StringValue as cI,Value as uI}from"../../bueno/v1.1.0/bueno.esm.js";var lI={state:new uI({required:!0}),numberOfResults:new sI({required:!0,min:0}),value:new cI({required:!0,emptyAllowed:!0}),path:new aI({required:!0,each:k}),moreValuesAvailable:new iI({required:!1})};function Za(e){e.children.forEach(t=>{Za(t)}),he({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},lI)}var vo=g("commerce/facets/categoryFacet/updateNumberOfValues",e=>F(e,{facetId:k,numberOfValues:new dI({required:!1,min:1})})),Nt=g("commerce/facets/categoryFacet/toggleSelectValue",e=>{try{return he(e.facetId,k),Za(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}});import{ArrayValue as mI,RecordValue as Td}from"../../bueno/v1.1.0/bueno.esm.js";var st=g("commerce/facets/dateFacet/toggleSelectValue",e=>F(e,{facetId:k,selection:new Td({values:ht})})),ct=g("commerce/facets/dateFacet/toggleExcludeValue",e=>F(e,{facetId:k,selection:new Td({values:ht})})),Tn=g("commerce/facets/dateFacet/updateValues",e=>{try{return he(e,{facetId:k,values:new mI({each:new Td({values:ht})})}),Ha({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}});var gh=(e,t,r,o)=>{let n=t.categoryFacetSearchSet[e].options.query,a=`*${n}*`,i=t.commerceFacetSet[Xa(e)]?.request,s=i&&pI(i)?i&&fI(i):[],u=s.length?[s]:[],c=r?n:t.commerceQuery?.query,l=t.categoryFacetSearchSet[e].options.numberOfValues,{url:m,accessToken:p,organizationId:d,trackingId:f,language:y,country:S,currency:C,clientId:v,context:h,...x}=tt(t,o);return{url:m,accessToken:p,organizationId:d,facetId:Xa(e),facetQuery:r?"*":a,numberOfValues:l,ignorePaths:u,trackingId:f,language:y,country:S,currency:C,clientId:v,context:h,query:c,...!r&&{...x}}};function pI(e){return e.type==="hierarchical"}var fI=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};var yh=(e,t,r,o)=>{let n=t.facetSearchSet[e].options.query,a=t.facetSearchSet[e].options.numberOfValues,i=`*${n}*`,s=r?n:t.commerceQuery?.query,{url:u,accessToken:c,organizationId:l,trackingId:m,language:p,country:d,currency:f,clientId:y,context:S,...C}=tt(t,o);return{url:u,accessToken:c,organizationId:l,facetId:Xa(e),facetQuery:r?"*":i,numberOfValues:a,trackingId:m,language:p,country:d,currency:f,clientId:y,context:S,query:s,...!r&&{...C}}};var hh=e=>async({facetId:t,facetSearchType:r},{getState:o,extra:{validatePayload:n,navigatorContext:a,apiClient:i}})=>{let s=o();n(t,k);let u=gI(s,t)||yI(s,t)?yh(t,s,e,a):gh(t,s,e,a),c=await i.facetSearch(u,r);return{facetId:t,response:c}},ut=_("commerce/facetSearch/executeSearch",hh(!1)),We=_("commerce/facetSearch/facetFieldSuggest",hh(!0)),gI=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,yI=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,Sc="field_suggestion:";function Xa(e){return e.startsWith(Sc)?e.slice(Sc.length):e}function Ie(e){return e.startsWith(Sc)?e:`${Sc}${e}`}import{RecordValue as hI}from"../../bueno/v1.1.0/bueno.esm.js";var lt=g("commerce/facets/locationFacet/toggleSelectValue",e=>F(e,{facetId:k,selection:new hI({values:jt})}));import{ArrayValue as SI,BooleanValue as CI,NumberValue as Sh,RecordValue as Od,StringValue as xI}from"../../bueno/v1.1.0/bueno.esm.js";var He=g("commerce/facets/numericFacet/toggleSelectValue",e=>F(e,{facetId:k,selection:new Od({values:xc})})),Ge=g("commerce/facets/numericFacet/toggleExcludeValue",e=>F(e,{facetId:k,selection:new Od({values:xc})})),Cc=g("commerce/facets/numericFacet/updateValues",e=>{try{return he(e,{facetId:k,values:new SI({each:new Od({values:xc})})}),Ya({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}}),Mr=g("commerce/facets/numericFacet/updateManualRange",e=>he(e,{facetId:k,...xc})),xc={state:new xI({required:!0,constrainTo:["idle","selected","excluded"]}),start:new Sh({required:!0}),end:new Sh({required:!0}),endInclusive:new CI({required:!0})};import{RecordValue as Ch}from"../../bueno/v1.1.0/bueno.esm.js";var dt=g("commerce/facets/regularFacet/toggleExcludeValue",e=>F(e,{facetId:k,selection:new Ch({values:jt})})),mt=g("commerce/facets/regularFacet/toggleSelectValue",e=>F(e,{facetId:k,selection:new Ch({values:jt})}));function kd(e,t){for(let r of Object.keys(e))delete e[r];t.payload.f&&xh(e,t.payload.f,"regular"),t.payload.lf&&xh(e,t.payload.lf,"location"),t.payload.nf&&Rh(e,t.payload.nf,"numericalRange"),t.payload.mnf&&RI(e,t.payload.mnf),t.payload.df&&Rh(e,t.payload.df,"dateRange"),t.payload.cf&&FI(e,t.payload.cf)}function xh(e,t,r){let o=Object.entries(t);for(let[n,a]of o)e[n]={request:{...Rc(n),type:r,values:a.map(i=>{let s={...Vd(),value:i};switch(r){case"regular":return s;case"location":return s}})}}}function Rh(e,t,r){let o=Object.entries(t);for(let[n,a]of o)e[n]={request:{...Rc(n),type:r,values:a.map(i=>{let s={start:i.start,end:i.end,endInclusive:i.endInclusive,...Vd()};switch(r){case"dateRange":return s;case"numericalRange":return s}})}}}function RI(e,t){let r=Object.entries(t);for(let[o,n]of r)e[o]={request:{...Rc(o),type:"numericalRange",interval:"continuous",values:n.map(a=>({start:a.start,end:a.end,endInclusive:a.endInclusive,...Vd()}))}}}function FI(e,t){let r=Object.entries(t);for(let[o,n]of r)e[o]={request:{...Rc(o),type:"hierarchical",values:[],delimitingCharacter:"|",retrieveCount:8}},jd(e[o].request,n)}function Rc(e){return{facetId:e,field:e,isFieldExpanded:!1,preventAutoSelect:!1}}function Vd(){return{state:"selected",isAutoSelected:!1,isSuggested:!1,moreValuesAvailable:!0}}function Fh(e){return{state:"selected",value:e}}function jd(e,t,r){e.values=vI(t),e.numberOfValues=r,e.preventAutoSelect=!0}function vI(e){if(!e.length)return[];let t=ei(e[0]),r=t,[o,...n]=e;for(let a of n){let i=ei(a);r.children.push(i),r=i}return r.state="selected",[t]}function ei(e){return{children:[],state:"idle",value:e}}function vh(){return{}}var oe=B(vh(),e=>{e.addCase(ae.fulfilled,Ah).addCase(K.fulfilled,Ah).addCase(We.fulfilled,(t,r)=>Ph(t,Ie(r.payload.facetId))).addCase(De.fulfilled,(t,r)=>{if(r.payload.fieldSuggestionsFacets)for(let{facetId:o}of r.payload.fieldSuggestionsFacets)Ph(t,Ie(o))}).addCase(mt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Fc(a))return;a.preventAutoSelect=!0;let i=a.values.find(s=>s.value===n.value);if(!i){rr(a,n);return}tr(i,"select"),a.freezeCurrentValues=!0}).addCase(lt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!AI(a))return;let i=a.values.find(s=>s.value===n.value);if(!i){rr(a,n);return}tr(i,"select")}).addCase(He,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Dd(a))return;a.preventAutoSelect=!0;let i=$a(a.values,n);if(!i){rr(a,n);return}if(tr(i,"select"),a.numberOfValues=a.initialNumberOfValues,a.interval==="continuous"&&i.state==="idle"){a.values=[];return}}).addCase(st,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Nd(a))return;a.preventAutoSelect=!0;let i=$a(a.values,n);if(!i){rr(a,n);return}tr(i,"select")}).addCase(Nt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!vc(a))return;let{path:i}=n,s=i.slice(0,i.length-1),u=PI(a,s),c=u.find(l=>l.value===n.value);c||(c=ei(n.value),u.push(c)),c.state=c.state==="idle"?"selected":"idle",c.state==="selected"&&(a.numberOfValues=a.initialNumberOfValues,a.retrieveCount=a.initialNumberOfValues)}).addCase(dt,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Fc(a))return;a.preventAutoSelect=!0;let i=a.values.find(s=>s.value===n.value);if(!i){rr(a,n);return}tr(i,"exclude"),a.freezeCurrentValues=!0}).addCase(Ge,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Dd(a))return;a.preventAutoSelect=!0;let i=$a(a.values,n);if(!i){rr(a,n);return}if(tr(i,"exclude"),a.numberOfValues=a.initialNumberOfValues,a.interval==="continuous"&&i.state==="idle"){a.values=[];return}}).addCase(ct,(t,r)=>{let{facetId:o,selection:n}=r.payload,a=t[o]?.request;if(!a||!Nd(a))return;a.preventAutoSelect=!0;let i=$a(a.values,n);if(!i){rr(a,n);return}tr(i,"exclude"),a.numberOfValues=a.initialNumberOfValues}).addCase(vo,(t,r)=>{let{facetId:o,numberOfValues:n}=r.payload,a=t[o]?.request;vc(a)&&qI(a,n)}).addCase(Ye,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a||!Fc(a))return;let{rawValue:i}=n;a.freezeCurrentValues=!0,a.preventAutoSelect=!0;let s=a.values.find(u=>u.value===i);if(!s){rr(a,Fh(i));return}tr(s,"select")}).addCase(yt,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!a||!Fc(a))return;let{rawValue:i}=n;a.freezeCurrentValues=!0,a.preventAutoSelect=!0;let s=a.values.find(u=>u.value===i);if(!s){rr(a,{state:"excluded",value:i});return}tr(s,"exclude")}).addCase(rt,(t,r)=>{let{facetId:o,value:n}=r.payload,a=t[o]?.request;if(!vc(a))return;let i=[...n.path,n.rawValue];jd(a,i,a.initialNumberOfValues)}).addCase(Cc,(t,r)=>{let{facetId:o,values:n}=r.payload,a=t[o]?.request;!a||!Dd(a)||(a.values=n,a.numberOfValues=n.length)}).addCase(Tn,(t,r)=>{let{facetId:o,values:n}=r.payload,a=t[o]?.request;!a||!Nd(a)||(a.values=pc(n),a.numberOfValues=n.length)}).addCase(lo,(t,r)=>{let{facetId:o,numberOfValues:n}=r.payload,a=t[o]?.request;a&&(a.numberOfValues=n)}).addCase(mo,(t,r)=>{let{facetId:o,isFieldExpanded:n}=r.payload,a=t[o]?.request;a&&(a.isFieldExpanded=n)}).addCase(rn,(t,r)=>Object.values(t).forEach(o=>{o.request.preventAutoSelect=!r.payload.allow})).addCase(po,(t,r)=>{let{facetId:o,freezeCurrentValues:n}=r.payload,a=t[o]?.request;a&&(a.freezeCurrentValues=n)}).addCase(Oe,(t,r)=>{let{facetId:o}=r.payload,n=t[o]?.request;n&&Qd(n)}).addCase(Mr,(t,r)=>{let{facetId:o}=r.payload,n=t[o]?.request;n&&Qd(n)}).addCase(Ce,EI).addCase(gr,Md).addCase(ce,Md).addCase(le,Md).addCase(fe,kd).addCase(je,kd)});function Fc(e){return e.type==="regular"}function AI(e){return e.type==="location"}function Dd(e){return e.type==="numericalRange"}function Nd(e){return e.type==="dateRange"}function vc(e){return e?.type==="hierarchical"}function Ah(e,t){let r=new Set(Object.keys(e)),o=t.payload.response.facets;for(let n of o)bI(e,n,r);for(let n of r)delete e[n]}function Ph(e,t){let r=e[t]?.request;r||(e[t]={request:{}},r=e[t].request,r.initialNumberOfValues=10,r.values=[])}function Qd(e){let t=()=>{e.values.forEach(r=>{r.state="idle"})};switch(e.type){case"hierarchical":e.initialNumberOfValues=void 0,e.numberOfValues=void 0,e.values=[],e.preventAutoSelect=!0;break;case"numericalRange":e.numberOfValues=e.initialNumberOfValues,t();break;default:t();break}}function PI(e,t){let r=e.values;for(let o of t){let n=r[0];(!n||o!==n.value)&&(n=ei(o),r.length=0,r.push(n)),n.state="idle",r=n.children}return r}function tr(e,t){switch(e.state){case"idle":e.state=t==="exclude"?"excluded":"selected";break;case"excluded":e.state=t==="exclude"?"idle":"selected";break;case"selected":e.state=t==="exclude"?"excluded":"idle";break;default:break}}function bI(e,t,r){let o=t.facetId??t.field,n=e[o]?.request;n?r.delete(o):(e[o]={request:{}},n=e[o].request),n.initialNumberOfValues===void 0&&(n.initialNumberOfValues=t.numberOfValues),n.facetId=o,n.displayName=t.displayName,n.numberOfValues=t.numberOfValues,n.field=t.field,n.type=t.type,n.values=wI(t)??[],n.freezeCurrentValues=!1,n.preventAutoSelect=!1,t.type==="hierarchical"&&vc(n)?n.delimitingCharacter=t.delimitingCharacter:t.type==="numericalRange"&&(n.interval=t.interval,t.domain&&(n.domain={min:t.domain.min,max:t.domain.max,increment:t.domain.increment}))}function wI(e){switch(e.type){case"numericalRange":return qd(e.values);case"dateRange":return pc(e.values);case"hierarchical":return e.values.map(bh);case"regular":return e.values.map(Ad);case"location":return e.values.map(II);default:return}}function bh(e){let t=e.children.map(bh),{state:r,value:o}=e;return{children:t,state:r,value:o}}function II(e){let{value:t,state:r}=e;return{value:t,state:r}}function rr(e,t){let{values:r}=e,o=r.findIndex(a=>a.state==="idle"),n=o===-1?r.length:o;e.values.splice(n,0,t),o>-1&&e.values.pop(),e.numberOfValues=e.values.length}function EI(e){Object.values(e).forEach(t=>Qd(t.request))}function Md(e){Object.values(e).forEach(t=>{t.request.values=[]})}function qI(e,t){e.numberOfValues=t,e.retrieveCount=t}function wh(){return[]}var pt=B(wh(),e=>{e.addCase(De.fulfilled,(t,r)=>r.payload.fieldSuggestionsFacets??[])});function Ih(){return{}}var Pc=B(Ih(),e=>e.addCase(Mr,(t,r)=>{let{facetId:o,...n}=r.payload;t[o]={manualRange:n}}).addCase(Ge,(t,r)=>{Ac(t,r.payload.facetId)}).addCase(He,(t,r)=>{Ac(t,r.payload.facetId)}).addCase(Oe,(t,r)=>{Ac(t,r.payload.facetId)}).addCase(fe,(t,r)=>{Eh(t,r.payload.mnf)}).addCase(je,(t,r)=>{Eh(t,r.payload.mnf)}).addCase(Ce,t=>{for(let r of Object.keys(t))Ac(t,r)})),Ac=(e,t)=>{e[t]&&(e[t]={manualRange:void 0})},Eh=(e,t)=>{for(let r of Object.keys(e))delete e[r];t&&Object.entries(t).forEach(([r,o])=>{let n=o[0];e[r]={manualRange:n}})};import{RecordValue as VI,StringValue as jI}from"../../bueno/v1.1.0/bueno.esm.js";import{Schema as TI,StringValue as OI}from"../../bueno/v1.1.0/bueno.esm.js";var bc={slotId:k,productId:new OI({required:!1,emptyAllowed:!1})},qh=new TI(bc);import{isNullOrUndefined as kI}from"../../bueno/v1.1.0/bueno.esm.js";var ti=N((e,t)=>e.recommendations&&e.recommendations[t]?.products.length||0,e=>e),Th=N((e,t)=>({total:Oi(e,t),current:ti(e,t)}),({current:e,total:t})=>e<t),Oh=N((e,t)=>e.recommendations?e.recommendations[t]?.isLoading:!1,e=>kI(e)?!1:e);var kh=(e,t,r,o)=>{let n=Yi(t,r,e);return{...n,context:{...n.context,...o?{product:{productId:o}}:{},purchased:Qf(t.cart)},slotId:e}},Ct=_("commerce/recommendations/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let{slotId:a,productId:i}=e,s=kh(a,t(),n,i),u=await o.getRecommendations(s);return Te(u)?r(u.error):{response:u.success}}),Qr=_("commerce/recommendations/fetchMore",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{let a=e.slotId,i=t();if(Th(i,a))return null;let u=Ti(i,a),l=ti(i,a)/u,m={...kh(a,i,n),page:l},p=await o.getRecommendations(m);return Te(p)?r(p.error):{response:p.success}}),On=g("commerce/recommendations/registerSlot",e=>F(e,bc)),DI={child:new VI({options:{required:!0},values:{permanentid:new jI({required:!0})}}),...bc},kn=g("commerce/recommendations/promoteChildToParent",e=>F(e,DI));import{EnumValue as NI}from"../../bueno/v1.1.0/bueno.esm.js";var xt=g("commerce/sort/apply",e=>F(e,{by:new NI({enum:Pt,required:!0})}));var Mt=B(jp(),e=>{e.addCase(yr,(t,r)=>{let o=wc(t,r.payload?.slotId);o&&o.page<o.totalPages-1&&++o.page}).addCase(hr,(t,r)=>{let o=wc(t,r.payload?.slotId);o&&o.page>0&&--o.page}).addCase(It,(t,r)=>{let o=wc(t,r.payload.slotId);o&&r.payload.page>=0&&r.payload.page<o.totalPages&&(o.page=r.payload.page)}).addCase(Kt,(t,r)=>{let o=wc(t,r.payload.slotId);o&&(o.page=0,o.perPage=r.payload.pageSize)}).addCase(ae.fulfilled,(t,r)=>{t.principal=r.payload.response.pagination}).addCase(K.fulfilled,(t,r)=>{t.principal=r.payload.response.pagination}).addCase(Ct.fulfilled,(t,r)=>{t.recommendations[r.meta.arg.slotId]=r.payload.response.pagination}).addCase(on,(t,r)=>{let o=r.payload.slotId;o in t.recommendations||(t.recommendations[o]=ur())}).addCase(Ce,Ze).addCase(Oe,Ze).addCase(mt,Ze).addCase(dt,Ze).addCase(lt,Ze).addCase(He,Ze).addCase(Ge,Ze).addCase(st,Ze).addCase(ct,Ze).addCase(Nt,Ze).addCase(xt,Ze).addCase(ce,Ze).addCase(le,Ze).addCase(fe,Vh).addCase(je,Vh)});function wc(e,t){return t?e.recommendations[t]:e.principal}function Ze(e){e.principal.page=ur().page}function Vh(e,t){t.payload.page?e.principal.page=t.payload.page:e.principal.page=ur().page,t.payload.perPage&&(e.principal.perPage=t.payload.perPage)}var ft=g("app/setError");var Ic=()=>({error:null,isLoading:!1,requestId:"",responseId:"",facets:[],products:[]});var Vn=B(Ic(),e=>{e.addCase(ae.rejected,(t,r)=>{Ld(t,r.payload)}).addCase(Dr.rejected,(t,r)=>{Ld(t,r.payload)}).addCase(ae.fulfilled,(t,r)=>{let o=Nh(r.payload);jh(t,r.payload.response),t.products=r.payload.response.products.map((n,a)=>Mh(n,o+a+1,r.payload.response.responseId))}).addCase(Dr.fulfilled,(t,r)=>{if(!r.payload)return;let o=Nh(r.payload);jh(t,r.payload.response),t.products=t.products.concat(r.payload.response.products.map((n,a)=>Mh(n,o+a+1,r.payload?.response.responseId)))}).addCase(ae.pending,(t,r)=>{Dh(t,r.meta.requestId)}).addCase(Dr.pending,(t,r)=>{Dh(t,r.meta.requestId)}).addCase(In,(t,r)=>{let{products:o}=t,n,a=o.findIndex(m=>(n=m.children.find(p=>p.permanentid===r.payload.child.permanentid),!!n));if(a===-1||n===void 0)return;let i=o[a].responseId,s=o[a].position,{children:u,totalNumberOfChildren:c}=o[a],l={...n,children:u,totalNumberOfChildren:c,position:s,responseId:i};o.splice(a,1,l)}).addCase(le,()=>Ic()).addCase(ce,()=>Ic()).addCase(ft,(t,r)=>{Ld(t,r.payload)})});function Ld(e,t){e.error=t||null,e.isLoading=!1}function jh(e,t){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1}function Dh(e,t){e.isLoading=!0,e.requestId=t}function Nh(e){let t=e.response.pagination;return t.page*t.perPage}function Mh(e,t,r){let o=e.children.some(s=>s.permanentid===e.permanentid);if(e.children.length===0||o)return{...e,position:t,responseId:r};let{children:n,totalNumberOfChildren:a,...i}=e;return{...e,children:[i,...n],position:t,responseId:r}}var Re=B(Di(),e=>{e.addCase(pe,(t,r)=>({...t,...r.payload})).addCase(fe,(t,r)=>{t.query=r.payload.q??""}).addCase(Dt,(t,r)=>{t.query=r.payload.expression})});var Qh=()=>({}),Lh=()=>({headline:"",error:null,isLoading:!1,responseId:"",products:[],productId:void 0});var jn=B(Qh(),e=>{e.addCase(On,(t,r)=>{let o=r.payload.slotId,n=r.payload.productId;if(!(o in t)){if(!n){t[o]=Uh();return}t[o]=Uh({productId:n})}}).addCase(Ct.rejected,(t,r)=>{Ud(t,r.meta.arg.slotId,r.payload)}).addCase(Qr.rejected,(t,r)=>{Ud(t,r.meta.arg.slotId,r.payload)}).addCase(Ct.fulfilled,(t,r)=>{let o=r.meta.arg.slotId,n=r.payload.response;Bh(t,o,n);let a=t[o];if(!a)return;let i=$h(r.payload);a.products=n.products.map((s,u)=>zh(s,i+u+1,n.responseId))}).addCase(Qr.fulfilled,(t,r)=>{if(!r.payload)return;let o=r.meta.arg.slotId,n=r.payload.response;Bh(t,o,n);let a=t[o];if(!a)return;let i=$h(r.payload);a.products=a.products.concat(n.products.map((s,u)=>zh(s,i+u+1,n.responseId)))}).addCase(Ct.pending,(t,r)=>{_h(t,r.meta.arg.slotId)}).addCase(Qr.pending,(t,r)=>{_h(t,r.meta.arg.slotId)}).addCase(kn,(t,r)=>{let o=t[r.payload.slotId];if(!o)return;let{products:n}=o,a,i=n.findIndex(p=>(a=p.children.find(d=>d.permanentid===r.payload.child.permanentid),!!a));if(i===-1||a===void 0)return;let s=n[i].responseId,u=n[i].position,{children:c,totalNumberOfChildren:l}=n[i],m={...a,children:c,totalNumberOfChildren:l,position:u,responseId:s};n.splice(i,1,m)}).addCase(ft,(t,r)=>{Object.keys(t).forEach(o=>{Ud(t,o,r.payload)})})});function Uh(e){return{...Lh(),...e}}function Ud(e,t,r){let o=e[t];o&&(o.error=r??null,o.isLoading=!1)}function Bh(e,t,r){let o=e[t];o&&(o.error=null,o.headline=r.headline,o.responseId=r.responseId,o.isLoading=!1)}function _h(e,t){let r=e[t];r&&(r.isLoading=!0)}function $h(e){let t=e.response.pagination;return t.page*t.perPage}function zh(e,t,r){let o=e.children.some(s=>s.permanentid===e.permanentid);if(e.children.length===0||o)return{...e,position:t,responseId:r};let{children:n,totalNumberOfChildren:a,...i}=e;return{...e,children:[i,...n],position:t,responseId:r}}var Ec=()=>({error:null,isLoading:!1,requestId:"",responseId:"",products:[],facets:[],queryExecuted:""});var Qt=B(Ec(),e=>{e.addCase(K.rejected,(t,r)=>{Wh(t,r.payload)}).addCase(Cr.rejected,(t,r)=>{Wh(t,r.payload)}).addCase(K.fulfilled,(t,r)=>{let o=Kh(r.payload);Gh(t,r.payload.response,r.payload.queryExecuted),t.products=r.payload.response.products.map((n,a)=>Yh(n,o+a+1,r.payload.response.responseId))}).addCase(Cr.fulfilled,(t,r)=>{if(!r.payload)return;let o=Kh(r.payload);Gh(t,r.payload.response,r.payload.queryExecuted),t.products=t.products.concat(r.payload.response.products.map((n,a)=>Yh(n,o+a+1,r.payload?.response.responseId)))}).addCase(K.pending,(t,r)=>{Hh(t,r.meta.requestId)}).addCase(Cr.pending,(t,r)=>{Hh(t,r.meta.requestId)}).addCase(cn,(t,r)=>{let{products:o}=t,n,a=o.findIndex(m=>(n=m.children.find(p=>p.permanentid===r.payload.child.permanentid),!!n));if(a===-1||n===void 0)return;let i=o[a].responseId,s=o[a].position,{children:u,totalNumberOfChildren:c}=o[a],l={...n,children:u,totalNumberOfChildren:c,position:s,responseId:i};o.splice(a,1,l)}).addCase(le,()=>Ec()).addCase(ce,()=>Ec()).addCase(ft,(t,r)=>{t.error=r.payload,t.isLoading=!1})});function Wh(e,t){e.error=t||null,e.isLoading=!1}function Hh(e,t){e.isLoading=!0,e.requestId=t}function Gh(e,t,r){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1,e.queryExecuted=r??""}function Kh(e){let t=e.response.pagination;return t.page*t.perPage}function Yh(e,t,r){let o=e.children.some(s=>s.permanentid===e.permanentid);if(e.children.length===0||o)return{...e,position:t,responseId:r};let{children:n,totalNumberOfChildren:a,...i}=e;return{...e,children:[i,...n],position:t,responseId:r}}var Lt=B(to(),e=>{e.addCase(xt,(t,r)=>{t.appliedSort=r.payload}).addCase(ae.fulfilled,Jh).addCase(K.fulfilled,Jh).addCase(ce,to).addCase(le,to).addCase(fe,Xh).addCase(je,Xh)});function Jh(e,t){let r=t.payload.response;e.appliedSort=Zh(r.sort.appliedSort),e.availableSorts=r.sort.availableSorts.map(Zh)}var Zh=e=>e.sortCriteria==="relevance"?bt():{by:"fields",fields:(e.fields||[]).map(({field:t,direction:r,displayName:o})=>({name:t,direction:r,displayName:o}))};function Xh(e,t){if(t.payload.sortCriteria){e.appliedSort=t.payload.sortCriteria;return}e.appliedSort=to().appliedSort}function Bd(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function _d(e,t){let r=[],o=[],n=[],a=[];return t.forEach(i=>{switch(i.type){case"redirect":r.push(i.content);break;case"query":o.push(i.content);break;case"execute":n.push({functionName:i.content.name,params:i.content.params});break;case"notify":a.push(i.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=n,e.notifications=a,e}function eS(e,t){return e.queryModification={...t,queryToIgnore:""},e}function tS(e,t){return e.queryModification.queryToIgnore=t,e}var rS=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var Ut=B(rS(),e=>e.addCase(K.pending,Bd).addCase(K.fulfilled,(t,r)=>_d(t,r.payload.response.triggers)).addCase(ae.pending,Bd).addCase(ae.fulfilled,(t,r)=>_d(t,r.payload.response.triggers)).addCase(nn,(t,r)=>eS(t,r.payload)).addCase(Sr,(t,r)=>tS(t,r.payload.q)));var $d=B(io,e=>e);var Bt=B(Fn(),e=>{e.addCase(ie.fulfilled,zd).addCase(ae.fulfilled,zd).addCase(K.fulfilled,zd).addCase(fe,oS).addCase(je,oS).addCase(xe.fulfilled,(t,r)=>r.payload?.facetOrder??t).addCase(le,()=>Fn()).addCase(ce,()=>Fn())});function zd(e,t){return t.payload.response.facets.map(r=>r.facetId)}function oS(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.lf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.mnf??{})]}function ri(e,t,r){let{facetId:o}=t;if(e[o])return;let n=!1,a={...Lr,...t},i=r();e[o]={options:a,isLoading:n,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function qc(e,t){let{facetId:r,...o}=t,n=e[r];n&&(n.options={...n.options,...o})}function Ur(e,t,r){let o=e[t];o&&(o.requestId=r,o.isLoading=!0)}function Br(e,t){let r=e[t];r&&(r.isLoading=!1)}function Tc(e,t,r){let{facetId:o,response:n}=t,a=e[o];a&&a.requestId===r&&(a.isLoading=!1,a.response=n)}function Oc(e,t,r){let{facetId:o,response:n}=t,a=e[o];a&&a.requestId===r&&(a.isLoading=!1,"success"in n&&(a.response=n.success))}function kc(e,t,r,o){let{facetId:n,response:a}=t,i=Ie(n),s=e[i];if(!s)ri(e,{facetId:i},o),s=e[i];else if(s.requestId!==r)return;s.isLoading=!1,"success"in a&&(s.response=a.success)}function nS(e,t,r,o){if(t.fieldSuggestionsFacets)for(let n of t.fieldSuggestionsFacets)n.facetId in e||n.type!=="regular"||(e[n.facetId]={options:{...Lr,query:t.query??""},isLoading:!1,response:o(),initialNumberOfValues:Lr.numberOfValues,requestId:r})}function aS(e,t,r,o){if(t.fieldSuggestionsFacets)for(let n of t.fieldSuggestionsFacets){let a=Ie(n.facetId);a in e||n.type!=="hierarchical"||(e[a]={options:{...Lr,query:t.query??""},isLoading:!1,response:o(),initialNumberOfValues:Lr.numberOfValues,requestId:r})}}function oi(e,t,r){let{facetId:o}=t,n=e[o];n&&(n.requestId="",n.isLoading=!1,n.response=r(),n.options.numberOfValues=n.initialNumberOfValues,n.options.query=Lr.query)}function or(e,t){Object.keys(e).forEach(r=>oi(e,{facetId:r},t))}var Lr={captions:{},numberOfValues:10,query:""};var iS=async(e,t,r,o)=>{let n=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:i,query:s,numberOfValues:u}=n,{field:c,delimitingCharacter:l,basePath:m,filterFacetCount:p}=a,d=MI(a),f=d.length?[d]:[],y=`*${s}*`;return{url:t.configuration.search.apiBaseUrl??et(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:m,captions:i,numberOfValues:u,query:y,field:c,delimitingCharacter:l,ignorePaths:f,filterFacetCount:p,type:"hierarchical",...o?{}:{searchContext:(await it(t,r)).request}}},MI=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var sS=async(e,t,r,o)=>{let{captions:n,query:a,numberOfValues:i}=t.facetSearchSet[e].options,{field:s,currentValues:u,filterFacetCount:c}=t.facetSet[e].request,l=u.filter(p=>p.state!=="idle").map(p=>p.value),m=`*${a}*`;return{url:t.configuration.search.apiBaseUrl??et(t.configuration.organizationId,t.configuration.environment),accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:i,query:m,field:s,ignoreValues:l,filterFacetCount:c,type:"specific",...o?{}:{searchContext:(await it(t,r)).request}}};var cS=e=>async(t,{getState:r,extra:{apiClient:o,validatePayload:n,navigatorContext:a}})=>{let i=r(),s;n(t,k),QI(i,t)?s=await sS(t,i,a,e):s=await iS(t,i,a,e);let u=await o.facetSearch(s);return{facetId:t,response:u}},_r=_("facetSearch/executeSearch",cS(!1)),n2=_("facetSearch/executeSearch",cS(!0)),Dn=g("facetSearch/clearResults",e=>F(e,{facetId:Y})),QI=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;function uS(){return{}}var $r=B(uS(),e=>{e.addCase(Xi,(t,r)=>{let o=r.payload;ri(t,o,Ao)}).addCase(xr,(t,r)=>{qc(t,r.payload)}).addCase(ut.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Ur(t,o,r.meta.requestId)}).addCase(We.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Ur(t,o,r.meta.requestId)}).addCase(_r.pending,(t,r)=>{let o=r.meta.arg;Ur(t,o,r.meta.requestId)}).addCase(ut.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,o)}).addCase(We.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,Ie(o))}).addCase(_r.rejected,(t,r)=>{let o=r.meta.arg;Br(t,o)}).addCase(ut.fulfilled,(t,r)=>{Oc(t,r.payload,r.meta.requestId)}).addCase(We.fulfilled,(t,r)=>{kc(t,r.payload,r.meta.requestId,Ao)}).addCase(De.fulfilled,(t,r)=>{aS(t,r.payload,r.meta.requestId,Ao)}).addCase(_r.fulfilled,(t,r)=>{Tc(t,r.payload,r.meta.requestId)}).addCase(Dn,(t,{payload:{facetId:r}})=>{oi(t,{facetId:r},Ao)}).addCase(ae.fulfilled,t=>or(t,Ao)).addCase(K.fulfilled,t=>or(t,Ao)).addCase(ie.fulfilled,t=>{or(t,Ao)})});function Ao(){return{moreValuesAvailable:!1,values:[]}}function lS(){return{}}var Nn=B(lS(),e=>{e.addCase(es,(t,r)=>{let o=r.payload;ri(t,o,zr)}).addCase(xr,(t,r)=>{qc(t,r.payload)}).addCase(ut.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Ur(t,o,r.meta.requestId)}).addCase(We.pending,(t,r)=>{let{facetId:o}=r.meta.arg;Ur(t,Ie(o),r.meta.requestId)}).addCase(_r.pending,(t,r)=>{let o=r.meta.arg;Ur(t,o,r.meta.requestId)}).addCase(ut.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,o)}).addCase(We.rejected,(t,r)=>{let{facetId:o}=r.meta.arg;Br(t,Ie(o))}).addCase(_r.rejected,(t,r)=>{let o=r.meta.arg;Br(t,o)}).addCase(ut.fulfilled,(t,r)=>{Oc(t,r.payload,r.meta.requestId)}).addCase(We.fulfilled,(t,r)=>{kc(t,r.payload,r.meta.requestId,zr)}).addCase(De.fulfilled,(t,r)=>{nS(t,r.payload,r.meta.requestId,zr)}).addCase(_r.fulfilled,(t,r)=>{Tc(t,r.payload,r.meta.requestId)}).addCase(Dn,(t,{payload:r})=>{oi(t,r,zr)}).addCase(ie.fulfilled,t=>{or(t,zr)}).addCase(ae.fulfilled,t=>or(t,zr)).addCase(K.fulfilled,t=>or(t,zr)).addCase(le,t=>or(t,zr))});function zr(){return{moreValuesAvailable:!1,values:[]}}var Wd=(e,t)=>{let{referrer:r,userAgent:o,location:n,clientId:a}=e.getMeta("");return{...t?t():{},referrer:r,userAgent:o,location:n,clientId:a}};var LI=N(e=>e.advancedSearchQueries,e=>{if(!e)return{};let{aq:t,cq:r,dq:o,lq:n}=e;return{...t&&{aq:t},...r&&{cq:r},...o&&{dq:o},...n&&{lq:n}}});var UI=N(e=>e.context,e=>e);import{ArrayValue as fS,BooleanValue as BI,NumberValue as _I,RecordValue as $I,StringValue as jc}from"../../bueno/v1.1.0/bueno.esm.js";var Vc=e=>Se({prefix:"analytics/generatedAnswer/streamEnd",__legacy__getBuilder:(t,r)=>{let o=Sn(r),n=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return o?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:o,answerGenerated:e,answerTextIsEmpty:n}):null},analyticsType:"Rga.AnswerReceived",analyticsPayloadBuilder:t=>({answerId:Sn(t)??"",answerGenerated:e??!1})});var dS=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:qe(e.configuration.organizationId,e.configuration.environment),streamId:e.search.extendedResults?.generativeQuestionAnsweringId});var mS=["text/plain","text/markdown"];var Mn=new jc({required:!0}),gS=new jc,Qn=new BI({required:!0}),zI={id:Mn,title:Mn,uri:Mn,permanentid:Mn,clickUri:gS},yS=new jc({required:!0,constrainTo:mS}),Z2=g("generatedAnswer/setIsVisible",e=>F(e,Qn)),X2=g("generatedAnswer/setIsEnabled",e=>F(e,Qn)),Gd=g("generatedAnswer/updateMessage",e=>F(e,{textDelta:Mn})),Kd=g("generatedAnswer/updateCitations",e=>F(e,{citations:new fS({required:!0,each:new $I({values:zI})})})),WI=g("generatedAnswer/updateError",e=>F(e,{message:gS,code:new _I({min:0})})),HI=g("generatedAnswer/resetAnswer"),eK=g("generatedAnswer/like"),tK=g("generatedAnswer/dislike"),rK=g("generatedAnswer/feedbackModal/open"),oK=g("generatedAnswer/expand"),nK=g("generatedAnswer/collapse"),aK=g("generatedAnswer/setId",e=>F(e,{id:new jc({required:!0})})),iK=g("generatedAnswer/feedbackModal/close"),sK=g("generatedAnswer/sendFeedback"),Hd=g("generatedAnswer/setIsLoading",e=>F(e,Qn)),pS=g("generatedAnswer/setIsStreaming",e=>F(e,Qn)),Yd=g("generatedAnswer/setAnswerContentFormat",e=>F(e,yS)),cK=g("generatedAnswer/updateResponseFormat",e=>F(e,{contentFormat:new fS({each:yS,default:["text/plain"]})})),uK=g("knowledge/updateAnswerConfigurationId",e=>F(e,Mn)),lK=g("generatedAnswer/registerFieldsToIncludeInCitations",e=>F(e,hf)),GI=g("generatedAnswer/setIsAnswerGenerated",e=>F(e,Qn)),Jd=g("generatedAnswer/setCannotAnswer",e=>F(e,Qn)),dK=_("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:o,extra:n,getState:a}=t,{search:i}=a(),{queryExecuted:s}=i,{setAbortControllerRef:u}=e,c=await dS(r),l=(d,f)=>{switch(d){case"genqa.headerMessageType":{let y=JSON.parse(f);o(Yd(y.contentFormat));break}case"genqa.messageType":o(Gd(JSON.parse(f)));break;case"genqa.citationsType":o(Kd(JSON.parse(f)));break;case"genqa.endOfStreamType":{let y=JSON.parse(f).answerGenerated,S=s.length!==0&&!y;o(Jd(S)),o(pS(!1)),o(GI(y)),o(Vc(y));break}default:r.debug&&n.logger.warn(`Unknown payloadType: "${d}"`)}};o(Hd(!0));let m=d=>d.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,p=n.streamingClient?.streamGeneratedAnswer(c,{write:d=>{m(c)&&(o(Hd(!1)),d.payload&&d.payloadType&&l(d.payloadType,d.payload))},abort:d=>{m(c)&&o(WI(d))},close:()=>{m(c)&&o(pS(!1))},resetAnswer:()=>{m(c)&&o(HI())}});p?u(p):o(Hd(!1))});var KI=N(e=>e.pipeline,e=>e);var hS=N(e=>e.query,e=>e);import{isNullOrUndefined as SK}from"../../bueno/v1.1.0/bueno.esm.js";var YI=N(e=>e.search,e=>e?.searchAction?.actionCause||"");var JI=N(e=>e.searchHub,e=>e);var Dc=N(e=>e,e=>{if(!e)return"";for(let t in e)if(e[t].isActive)return e[t].id;return""}),ZI=N(e=>e,e=>{let t=Dc(e);return t&&e?e[t].expression:""});async function CS(e,t){let r=e.getReader(),o;for(;!(o=await r.read()).done;)t(o.value)}function xS(e){let t,r,o,n=!1;return function(i){t===void 0?(t=i,r=0,o=-1):t=eE(t,i);let s=t.length,u=0;for(;r<s;){n&&(t[r]===10&&(u=++r),n=!1);let c=-1;for(;r<s&&c===-1;++r)switch(t[r]){case 58:o===-1&&(o=r-u);break;case 13:n=!0,c=r;break;case 10:c=r;break}if(c===-1)break;e(t.subarray(u,c),o),u=r,o=-1}u===s?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function RS(e,t,r){let o=SS(),n=new TextDecoder;return function(i,s){if(i.length===0)r?.(o),o=SS();else if(s>0){let u=n.decode(i.subarray(0,s)),c=s+(i[s+1]===32?2:1),l=n.decode(i.subarray(c));switch(u){case"data":o.data=o.data?`${o.data}
${l}`:l;break;case"event":o.event=l;break;case"id":e(o.id=l);break;case"retry":XI(l,o,t);break}}}}function XI(e,t,r){let o=parseInt(e,10);Number.isNaN(o)||r(t.retry=o)}function eE(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function SS(){return{data:"",event:"",id:"",retry:void 0}}var Zd="text/event-stream",tE=1e3,FS="last-event-id";function vS(){return typeof window<"u"}function AS(e,{signal:t,headers:r,onopen:o,onmessage:n,onclose:a,onerror:i,openWhenHidden:s,fetch:u,...c}){return new Promise((l,m)=>{let p={...r};p.accept||(p.accept=Zd);let d;function f(){d?.abort(),document.hidden||x()}!s&&vS()&&document.addEventListener("visibilitychange",f);let y=tE,S;function C(){vS()&&document.removeEventListener("visibilitychange",f),clearTimeout(S),d?.abort()}t?.addEventListener("abort",()=>{C(),l()});let v=u??fetch,h=o??rE;async function x(){d=AbortController?new AbortController:null;try{let E=await v(e,{...c,headers:p,signal:d?.signal});await h(E),await CS(E.body,xS(RS(P=>{P?p[FS]=P:delete p[FS]},P=>{y=P},n))),a?.(),C(),l()}catch(E){if(!d?.signal?.aborted)try{let P=i?.(E)??y;clearTimeout(S),S=setTimeout(x,P)}catch(P){C(),m(P)}}}x()})}function rE(e){let t=e.headers.get("content-type");if(!t?.startsWith(Zd))throw new Error(`Expected content-type to be ${Zd}, Actual: ${t}`)}function PS(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var bS=Rt;function MS(e,t){if(e===t||!(bS(e)&&bS(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),o=Object.keys(e),n=r.length===o.length,a=Array.isArray(t)?[]:{};for(let i of r)a[i]=MS(e[i],t[i]),n&&(n=e[i]===a[i]);return n?e:a}function Ln(e){let t=0;for(let r in e)t++;return t}var wS=e=>[].concat(...e);function oE(e){return new RegExp("(^|:)//").test(e)}function nE(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Qc(e){return e!=null}function aE(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var iE=e=>e.replace(/\/$/,""),sE=e=>e.replace(/^\//,"");function cE(e,t){if(!e)return t;if(!t)return e;if(oE(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=iE(e),t=sE(t),`${e}${r}${t}`}function uE(e,t,r){return e.has(t)?e.get(t):e.set(t,r).get(t)}var IS=(...e)=>fetch(...e),lE=e=>e.status>=200&&e.status<=299,dE=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function ES(e){if(!Rt(e))return e;let t={...e};for(let[r,o]of Object.entries(t))o===void 0&&delete t[r];return t}function QS({baseUrl:e,prepareHeaders:t=m=>m,fetchFn:r=IS,paramsSerializer:o,isJsonContentType:n=dE,jsonContentType:a="application/json",jsonReplacer:i,timeout:s,responseHandler:u,validateStatus:c,...l}={}){return typeof fetch>"u"&&r===IS&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(p,d,f)=>{let{getState:y,extra:S,endpoint:C,forced:v,type:h}=d,x,{url:E,headers:P=new Headers(l.headers),params:R=void 0,responseHandler:A=u??"json",validateStatus:b=c??lE,timeout:q=s,...M}=typeof p=="string"?{url:p}:p,j,O=d.signal;q&&(j=new AbortController,d.signal.addEventListener("abort",j.abort),O=j.signal);let T={...l,signal:O,...M};P=new Headers(ES(P)),T.headers=await t(P,{getState:y,arg:p,extra:S,endpoint:C,forced:v,type:h,extraOptions:f})||P;let D=H=>typeof H=="object"&&(Rt(H)||Array.isArray(H)||typeof H.toJSON=="function");if(!T.headers.has("content-type")&&D(T.body)&&T.headers.set("content-type",a),D(T.body)&&n(T.headers)&&(T.body=JSON.stringify(T.body,i)),R){let H=~E.indexOf("?")?"&":"?",X=o?o(R):new URLSearchParams(ES(R));E+=H+X}E=cE(e,E);let V=new Request(E,T);x={request:new Request(E,T)};let L,z=!1,J=j&&setTimeout(()=>{z=!0,j.abort()},q);try{L=await r(V)}catch(H){return{error:{status:z?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(H)},meta:x}}finally{J&&clearTimeout(J),j?.signal.removeEventListener("abort",j.abort)}let te=L.clone();x.response=te;let G,Z="";try{let H;if(await Promise.all([m(L,A).then(X=>G=X,X=>H=X),te.text().then(X=>Z=X,()=>{})]),H)throw H}catch(H){return{error:{status:"PARSING_ERROR",originalStatus:L.status,data:Z,error:String(H)},meta:x}}return b(L,G)?{data:G,meta:x}:{error:{status:L.status,data:G},meta:x}};async function m(p,d){if(typeof d=="function")return d(p);if(d==="content-type"&&(d=n(p.headers)?"json":"text"),d==="json"){let f=await p.text();return f.length?JSON.parse(f):null}return p.text()}}var Un=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function mE(e=0,t=5){let r=Math.min(e,t),o=~~((Math.random()+.4)*(300<<r));await new Promise(n=>setTimeout(a=>n(a),o))}function pE(e,t){throw Object.assign(new Un({error:e,meta:t}),{throwImmediately:!0})}var qS={},fE=(e,t)=>async(r,o,n)=>{let a=[5,(t||qS).maxRetries,(n||qS).maxRetries].filter(l=>l!==void 0),[i]=a.slice(-1),u={maxRetries:i,backoff:mE,retryCondition:(l,m,{attempt:p})=>p<=i,...t,...n},c=0;for(;;)try{let l=await e(r,o,n);if(l.error)throw new Un(l);return l}catch(l){if(c++,l.throwImmediately){if(l instanceof Un)return l.value;throw l}if(l instanceof Un&&!u.retryCondition(l.value.error,r,{attempt:c,baseQueryApi:o,extraOptions:n}))return l.value;await u.backoff(c,u.maxRetries)}},LS=Object.assign(fE,{fail:pE}),om=g("__rtkq/focused"),US=g("__rtkq/unfocused"),nm=g("__rtkq/online"),BS=g("__rtkq/offline");function am(e){return e.type==="query"}function gE(e){return e.type==="mutation"}function im(e){return e.type==="infinitequery"}function sm(e,t,r,o,n,a){return yE(e)?e(t,r,o,n).filter(Qc).map(em).map(a):Array.isArray(e)?e.map(em).map(a):[]}function yE(e){return typeof e=="function"}function em(e){return typeof e=="string"?{type:e}:e}function hE(e,t){return e.catch(t)}var ai=Symbol("forceQueryFn"),tm=e=>typeof e[ai]=="function";function SE({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:r,mutationThunk:o,api:n,context:a}){let i=new Map,s=new Map,{unsubscribeQueryResult:u,removeMutationResult:c,updateSubscriptionOptions:l}=n.internalActions;return{buildInitiateQuery:C,buildInitiateInfiniteQuery:v,buildInitiateMutation:h,getRunningQueryThunk:m,getRunningMutationThunk:p,getRunningQueriesThunk:d,getRunningMutationsThunk:f};function m(x,E){return P=>{let R=a.endpointDefinitions[x],A=e({queryArgs:E,endpointDefinition:R,endpointName:x});return i.get(P)?.[A]}}function p(x,E){return P=>s.get(P)?.[E]}function d(){return x=>Object.values(i.get(x)||{}).filter(Qc)}function f(){return x=>Object.values(s.get(x)||{}).filter(Qc)}function y(x){}function S(x,E){let P=(R,{subscribe:A=!0,forceRefetch:b,subscriptionOptions:q,[ai]:M,...j}={})=>(O,T)=>{let D=e({queryArgs:R,endpointDefinition:E,endpointName:x}),V,Q={...j,type:"query",subscribe:A,forceRefetch:b,subscriptionOptions:q,endpointName:x,originalArgs:R,queryCacheKey:D,[ai]:M};if(am(E))V=t(Q);else{let{direction:re,initialPageParam:se}=j;V=r({...Q,direction:re,initialPageParam:se})}let L=n.endpoints[x].select(R),z=O(V),J=L(T());let{requestId:te,abort:G}=z,Z=J.requestId!==te,H=i.get(O)?.[D],X=()=>L(T()),ue=Object.assign(M?z.then(X):Z&&!H?Promise.resolve(J):Promise.all([H,z]).then(X),{arg:R,requestId:te,subscriptionOptions:q,queryCacheKey:D,abort:G,async unwrap(){let re=await ue;if(re.isError)throw re.error;return re.data},refetch:()=>O(P(R,{subscribe:!1,forceRefetch:!0})),unsubscribe(){A&&O(u({queryCacheKey:D,requestId:te}))},updateSubscriptionOptions(re){ue.subscriptionOptions=re,O(l({endpointName:x,requestId:te,queryCacheKey:D,options:re}))}});if(!H&&!Z&&!M){let re=uE(i,O,{});re[D]=ue,ue.then(()=>{delete re[D],Ln(re)||i.delete(O)})}return ue};return P}function C(x,E){return S(x,E)}function v(x,E){return S(x,E)}function h(x){return(E,{track:P=!0,fixedCacheKey:R}={})=>(A,b)=>{let q=o({type:"mutation",endpointName:x,originalArgs:E,track:P,fixedCacheKey:R}),M=A(q);let{requestId:j,abort:O,unwrap:T}=M,D=hE(M.unwrap().then(z=>({data:z})),z=>({error:z})),V=()=>{A(c({requestId:j,fixedCacheKey:R}))},Q=Object.assign(D,{arg:M.arg,requestId:j,abort:O,unwrap:T,reset:V}),L=s.get(A)||{};return s.set(A,L),L[j]=Q,Q.then(()=>{delete L[j],Ln(L)||s.delete(A)}),R&&(L[R]=Q,Q.then(()=>{L[R]===Q&&(delete L[R],Ln(L)||s.delete(A))})),Q}}}function CE(e){return e}var Nc=(e={})=>({...e,[ma]:!0});function xE({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:o,api:n,assertTagType:a,selectors:i}){let s=(A,b,q,M)=>(j,O)=>{let T=r[A],D=o({queryArgs:b,endpointDefinition:T,endpointName:A});if(j(n.internalActions.queryResultPatched({queryCacheKey:D,patches:q})),!M)return;let V=n.endpoints[A].select(b)(O()),Q=sm(T.providesTags,V.data,void 0,b,{},a);j(n.internalActions.updateProvidedBy({queryCacheKey:D,providedTags:Q}))};function u(A,b,q=0){let M=[b,...A];return q&&M.length>q?M.slice(0,-1):M}function c(A,b,q=0){let M=[...A,b];return q&&M.length>q?M.slice(1):M}let l=(A,b,q,M=!0)=>(j,O)=>{let D=n.endpoints[A].select(b)(O()),V={patches:[],inversePatches:[],undo:()=>j(n.util.patchQueryData(A,b,V.inversePatches,M))};if(D.status==="uninitialized")return V;let Q;if("data"in D)if(_e(D.data)){let[L,z,J]=Ai(D.data,q);V.patches.push(...z),V.inversePatches.push(...J),Q=L}else Q=q(D.data),V.patches.push({op:"replace",path:[],value:Q}),V.inversePatches.push({op:"replace",path:[],value:D.data});return V.patches.length===0||j(n.util.patchQueryData(A,b,V.patches,M)),V},m=(A,b,q)=>M=>M(n.endpoints[A].initiate(b,{subscribe:!1,forceRefetch:!0,[ai]:()=>({data:q})})),p=(A,b)=>A.query&&A[b]?A[b]:CE,d=async(A,{signal:b,abort:q,rejectWithValue:M,fulfillWithValue:j,dispatch:O,getState:T,extra:D})=>{let V=r[A.endpointName];try{let Q=p(V,"transformResponse"),L={signal:b,abort:q,dispatch:O,getState:T,extra:D,endpoint:A.endpointName,type:A.type,forced:A.type==="query"?f(A,T()):void 0,queryCacheKey:A.type==="query"?A.queryCacheKey:void 0},z=A.type==="query"?A[ai]:void 0,J,te=async(Z,H,X,ue)=>{if(H==null&&Z.pages.length)return Promise.resolve({data:Z});let re={queryArg:A.originalArgs,pageParam:H},se=await G(re),de=ue?u:c;return{data:{pages:de(Z.pages,se.data,X),pageParams:de(Z.pageParams,H,X)}}};async function G(Z){let H,{extraOptions:X}=V;if(z?H=z():V.query?H=await t(V.query(Z),L,X):H=await V.queryFn(Z,L,X,re=>t(re,L,X)),typeof process<"u",H.error)throw new Un(H.error,H.meta);let ue=await Q(H.data,H.meta,Z);return{...H,data:ue}}if(A.type==="query"&&"infiniteQueryOptions"in V){let{infiniteQueryOptions:Z}=V,{maxPages:H=1/0}=Z,X,ue={pages:[],pageParams:[]},re=i.selectQueryEntry(T(),A.queryCacheKey)?.data,de=f(A,T())&&!A.direction||!re?ue:re;if("direction"in A&&A.direction&&de.pages.length){let Ue=A.direction==="backward",ir=(Ue?_S:rm)(Z,de);X=await te(de,ir,H,Ue)}else{let{initialPageParam:Ue=Z.initialPageParam}=A,Xe=re?.pageParams??[],ir=Xe[0]??Ue,jo=Xe.length;X=await te(de,ir,H),z&&(X={data:X.data.pages[0]});for(let Do=1;Do<jo;Do++){let oa=rm(Z,X.data);X=await te(X.data,oa,H)}}J=X}else J=await G(A.originalArgs);return j(J.data,Nc({fulfilledTimeStamp:Date.now(),baseQueryMeta:J.meta}))}catch(Q){let L=Q;if(L instanceof Un){let z=p(V,"transformErrorResponse");try{return M(await z(L.value,L.meta,A.originalArgs),Nc({baseQueryMeta:L.meta}))}catch(J){L=J}}throw typeof process<"u",console.error(L),L}};function f(A,b){let q=i.selectQueryEntry(b,A.queryCacheKey),M=i.selectConfig(b).refetchOnMountOrArgChange,j=q?.fulfilledTimeStamp,O=A.forceRefetch??(A.subscribe&&M);return O?O===!0||(Number(new Date)-Number(j))/1e3>=O:!1}let y=()=>_(`${e}/executeQuery`,d,{getPendingMeta({arg:b}){let q=r[b.endpointName];return Nc({startedTimeStamp:Date.now(),...im(q)?{direction:b.direction}:{}})},condition(b,{getState:q}){let M=q(),j=i.selectQueryEntry(M,b.queryCacheKey),O=j?.fulfilledTimeStamp,T=b.originalArgs,D=j?.originalArgs,V=r[b.endpointName],Q=b.direction;return tm(b)?!0:j?.status==="pending"?!1:f(b,M)||am(V)&&V?.forceRefetch?.({currentArg:T,previousArg:D,endpointState:j,state:M})?!0:!(O&&!Q)},dispatchConditionRejection:!0}),S=y(),C=y(),v=_(`${e}/executeMutation`,d,{getPendingMeta(){return Nc({startedTimeStamp:Date.now()})}}),h=A=>"force"in A,x=A=>"ifOlderThan"in A,E=(A,b,q)=>(M,j)=>{let O=h(q)&&q.force,T=x(q)&&q.ifOlderThan,D=(Q=!0)=>{let L={forceRefetch:Q,isPrefetch:!0};return n.endpoints[A].initiate(b,L)},V=n.endpoints[A].select(b)(j());if(O)M(D());else if(T){let Q=V?.fulfilledTimeStamp;if(!Q){M(D());return}(Number(new Date)-Number(new Date(Q)))/1e3>=T&&M(D())}else M(D(!1))};function P(A){return b=>b?.meta?.arg?.endpointName===A}function R(A,b){return{matchPending:Uo(Ii(A),P(b)),matchFulfilled:Uo(Ht(A),P(b)),matchRejected:Uo(Xr(A),P(b))}}return{queryThunk:S,mutationThunk:v,infiniteQueryThunk:C,prefetch:E,updateQueryData:l,upsertQueryData:m,patchQueryData:s,buildMatchThunkActions:R}}function rm(e,{pages:t,pageParams:r}){let o=t.length-1;return e.getNextPageParam(t[o],t,r[o],r)}function _S(e,{pages:t,pageParams:r}){return e.getPreviousPageParam?.(t[0],t,r[0],r)}function $S(e,t,r,o){return sm(r[e.meta.arg.endpointName][t],Ht(e)?e.payload:void 0,fa(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,o)}function Mc(e,t,r){let o=e[t];o&&r(o)}function ii(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function TS(e,t,r){let o=e[ii(t)];o&&r(o)}var ni={};function RE({reducerPath:e,queryThunk:t,mutationThunk:r,serializeQueryArgs:o,context:{endpointDefinitions:n,apiUid:a,extractRehydrationInfo:i,hasRehydrationInfo:s},assertTagType:u,config:c}){let l=g(`${e}/resetApiState`);function m(P,R,A,b){var q;P[q=R.queryCacheKey]??(P[q]={status:"uninitialized",endpointName:R.endpointName}),Mc(P,R.queryCacheKey,M=>{M.status="pending",M.requestId=A&&M.requestId?M.requestId:b.requestId,R.originalArgs!==void 0&&(M.originalArgs=R.originalArgs),M.startedTimeStamp=b.startedTimeStamp;let j=n[b.arg.endpointName];im(j)&&"direction"in R&&(M.direction=R.direction)})}function p(P,R,A,b){Mc(P,R.arg.queryCacheKey,q=>{if(q.requestId!==R.requestId&&!b)return;let{merge:M}=n[R.arg.endpointName];if(q.status="fulfilled",M)if(q.data!==void 0){let{fulfilledTimeStamp:j,arg:O,baseQueryMeta:T,requestId:D}=R,V=Wt(q.data,Q=>M(Q,A,{arg:O.originalArgs,baseQueryMeta:T,fulfilledTimeStamp:j,requestId:D}));q.data=V}else q.data=A;else q.data=n[R.arg.endpointName].structuralSharing??!0?MS(Ke(q.data)?Lu(q.data):q.data,A):A;delete q.error,q.fulfilledTimeStamp=R.fulfilledTimeStamp})}let d=eo({name:`${e}/queries`,initialState:ni,reducers:{removeQueryResult:{reducer(P,{payload:{queryCacheKey:R}}){delete P[R]},prepare:Bo()},cacheEntriesUpserted:{reducer(P,R){for(let A of R.payload){let{queryDescription:b,value:q}=A;m(P,b,!0,{arg:b,requestId:R.meta.requestId,startedTimeStamp:R.meta.timestamp}),p(P,{arg:b,requestId:R.meta.requestId,fulfilledTimeStamp:R.meta.timestamp,baseQueryMeta:{}},q,!0)}},prepare:P=>({payload:P.map(b=>{let{endpointName:q,arg:M,value:j}=b,O=n[q];return{queryDescription:{type:"query",endpointName:q,originalArgs:b.arg,queryCacheKey:o({queryArgs:M,endpointDefinition:O,endpointName:q})},value:j}}),meta:{[ma]:!0,requestId:qi(),timestamp:Date.now()}})},queryResultPatched:{reducer(P,{payload:{queryCacheKey:R,patches:A}}){Mc(P,R,b=>{b.data=Bu(b.data,A.concat())})},prepare:Bo()}},extraReducers(P){P.addCase(t.pending,(R,{meta:A,meta:{arg:b}})=>{let q=tm(b);m(R,b,q,A)}).addCase(t.fulfilled,(R,{meta:A,payload:b})=>{let q=tm(A.arg);p(R,A,b,q)}).addCase(t.rejected,(R,{meta:{condition:A,arg:b,requestId:q},error:M,payload:j})=>{Mc(R,b.queryCacheKey,O=>{if(!A){if(O.requestId!==q)return;O.status="rejected",O.error=j??M}})}).addMatcher(s,(R,A)=>{let{queries:b}=i(A);for(let[q,M]of Object.entries(b))(M?.status==="fulfilled"||M?.status==="rejected")&&(R[q]=M)})}}),f=eo({name:`${e}/mutations`,initialState:ni,reducers:{removeMutationResult:{reducer(P,{payload:R}){let A=ii(R);A in P&&delete P[A]},prepare:Bo()}},extraReducers(P){P.addCase(r.pending,(R,{meta:A,meta:{requestId:b,arg:q,startedTimeStamp:M}})=>{q.track&&(R[ii(A)]={requestId:b,status:"pending",endpointName:q.endpointName,startedTimeStamp:M})}).addCase(r.fulfilled,(R,{payload:A,meta:b})=>{b.arg.track&&TS(R,b,q=>{q.requestId===b.requestId&&(q.status="fulfilled",q.data=A,q.fulfilledTimeStamp=b.fulfilledTimeStamp)})}).addCase(r.rejected,(R,{payload:A,error:b,meta:q})=>{q.arg.track&&TS(R,q,M=>{M.requestId===q.requestId&&(M.status="rejected",M.error=A??b)})}).addMatcher(s,(R,A)=>{let{mutations:b}=i(A);for(let[q,M]of Object.entries(b))(M?.status==="fulfilled"||M?.status==="rejected")&&q!==M?.requestId&&(R[q]=M)})}}),y=eo({name:`${e}/invalidation`,initialState:ni,reducers:{updateProvidedBy:{reducer(P,R){var q,M;let{queryCacheKey:A,providedTags:b}=R.payload;for(let j of Object.values(P))for(let O of Object.values(j)){let T=O.indexOf(A);T!==-1&&O.splice(T,1)}for(let{type:j,id:O}of b){let T=(q=P[j]??(P[j]={}))[M=O||"__internal_without_id"]??(q[M]=[]);T.includes(A)||T.push(A)}},prepare:Bo()}},extraReducers(P){P.addCase(d.actions.removeQueryResult,(R,{payload:{queryCacheKey:A}})=>{for(let b of Object.values(R))for(let q of Object.values(b)){let M=q.indexOf(A);M!==-1&&q.splice(M,1)}}).addMatcher(s,(R,A)=>{var q,M;let{provided:b}=i(A);for(let[j,O]of Object.entries(b))for(let[T,D]of Object.entries(O)){let V=(q=R[j]??(R[j]={}))[M=T||"__internal_without_id"]??(q[M]=[]);for(let Q of D)V.includes(Q)||V.push(Q)}}).addMatcher(Ft(Ht(t),fa(t)),(R,A)=>{let b=$S(A,"providesTags",n,u),{queryCacheKey:q}=A.meta.arg;y.caseReducers.updateProvidedBy(R,y.actions.updateProvidedBy({queryCacheKey:q,providedTags:b}))})}}),S=eo({name:`${e}/subscriptions`,initialState:ni,reducers:{updateSubscriptionOptions(P,R){},unsubscribeQueryResult(P,R){},internal_getRTKQSubscriptions(){}}}),C=eo({name:`${e}/internalSubscriptions`,initialState:ni,reducers:{subscriptionsUpdated:{reducer(P,R){return Bu(P,R.payload)},prepare:Bo()}}}),v=eo({name:`${e}/config`,initialState:{online:aE(),focused:nE(),middlewareRegistered:!1,...c},reducers:{middlewareRegistered(P,{payload:R}){P.middlewareRegistered=P.middlewareRegistered==="conflict"||a!==R?"conflict":!0}},extraReducers:P=>{P.addCase(nm,R=>{R.online=!0}).addCase(BS,R=>{R.online=!1}).addCase(om,R=>{R.focused=!0}).addCase(US,R=>{R.focused=!1}).addMatcher(s,R=>({...R}))}}),h=No({queries:d.reducer,mutations:f.reducer,provided:y.reducer,subscriptions:C.reducer,config:v.reducer}),x=(P,R)=>h(l.match(R)?void 0:P,R),E={...v.actions,...d.actions,...S.actions,...C.actions,...f.actions,...y.actions,resetApiState:l};return{reducer:x,actions:E}}var Xd=Symbol.for("RTKQ/skipToken"),zS={status:"uninitialized"},OS=Wt(zS,()=>{}),kS=Wt(zS,()=>{});function FE({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let o=h=>OS,n=h=>kS;return{buildQuerySelector:p,buildInfiniteQuerySelector:d,buildMutationSelector:f,selectInvalidatedBy:y,selectCachedArgsForQuery:S,selectApiState:i,selectQueries:s,selectMutations:c,selectQueryEntry:u,selectConfig:l};function a(h){return{...h,...PS(h.status)}}function i(h){return h[t]}function s(h){return i(h)?.queries}function u(h,x){return s(h)?.[x]}function c(h){return i(h)?.mutations}function l(h){return i(h)?.config}function m(h,x,E){return P=>{if(P===Xd)return r(o,E);let R=e({queryArgs:P,endpointDefinition:x,endpointName:h});return r(b=>u(b,R)??OS,E)}}function p(h,x){return m(h,x,a)}function d(h,x){let{infiniteQueryOptions:E}=x;function P(R){let A={...R,...PS(R.status)},{isLoading:b,isError:q,direction:M}=A,j=M==="forward",O=M==="backward";return{...A,hasNextPage:C(E,A.data),hasPreviousPage:v(E,A.data),isFetchingNextPage:b&&j,isFetchingPreviousPage:b&&O,isFetchNextPageError:q&&j,isFetchPreviousPageError:q&&O}}return m(h,x,P)}function f(){return h=>{let x;return typeof h=="object"?x=ii(h)??Xd:x=h,r(x===Xd?n:R=>i(R)?.mutations?.[x]??kS,a)}}function y(h,x){let E=h[t],P=new Set;for(let R of x.filter(Qc).map(em)){let A=E.provided[R.type];if(!A)continue;let b=(R.id!==void 0?A[R.id]:wS(Object.values(A)))??[];for(let q of b)P.add(q)}return wS(Array.from(P.values()).map(R=>{let A=E.queries[R];return A?[{queryCacheKey:R,endpointName:A.endpointName,originalArgs:A.originalArgs}]:[]}))}function S(h,x){return Object.values(s(h)).filter(E=>E?.endpointName===x&&E.status!=="uninitialized").map(E=>E.originalArgs)}function C(h,x){return x?rm(h,x)!=null:!1}function v(h,x){return!x||!h.getPreviousPageParam?!1:_S(h,x)!=null}}var VS=WeakMap?new WeakMap:void 0,jS=({endpointName:e,queryArgs:t})=>{let r="",o=VS?.get(t);if(typeof o=="string")r=o;else{let n=JSON.stringify(t,(a,i)=>(i=typeof i=="bigint"?{$bigint:i.toString()}:i,i=Rt(i)?Object.keys(i).sort().reduce((s,u)=>(s[u]=i[u],s),{}):i,i));Rt(t)&&VS?.set(t,n),r=n}return`${e}(${r})`};function vE(...e){return function(r){let o=Lo(c=>r.extractRehydrationInfo?.(c,{reducerPath:r.reducerPath??"api"})),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:o,serializeQueryArgs(c){let l=jS;if("serializeQueryArgs"in c.endpointDefinition){let m=c.endpointDefinition.serializeQueryArgs;l=p=>{let d=m(p);return typeof d=="string"?d:jS({...p,queryArgs:d})}}else r.serializeQueryArgs&&(l=r.serializeQueryArgs);return l(c)},tagTypes:[...r.tagTypes||[]]},a={endpointDefinitions:{},batch(c){c()},apiUid:qi(),extractRehydrationInfo:o,hasRehydrationInfo:Lo(c=>o(c)!=null)},i={injectEndpoints:u,enhanceEndpoints({addTagTypes:c,endpoints:l}){if(c)for(let m of c)n.tagTypes.includes(m)||n.tagTypes.push(m);if(l)for(let[m,p]of Object.entries(l))typeof p=="function"?p(a.endpointDefinitions[m]):Object.assign(a.endpointDefinitions[m]||{},p);return i}},s=e.map(c=>c.init(i,n,a));function u(c){let l=c.endpoints({query:m=>({...m,type:"query"}),mutation:m=>({...m,type:"mutation"}),infiniteQuery:m=>({...m,type:"infinitequery"})});for(let[m,p]of Object.entries(l)){if(c.overrideExisting!==!0&&m in a.endpointDefinitions){if(c.overrideExisting==="throw")throw new Error(gt(39));typeof process<"u";continue}typeof process<"u",a.endpointDefinitions[m]=p;for(let d of s)d.injectEndpoint(m,p)}return i}return i.injectEndpoints({endpoints:r.endpoints})}}function nr(e,...t){return Object.assign(e,...t)}var AE=({api:e,queryThunk:t,internalState:r})=>{let o=`${e.reducerPath}/subscriptions`,n=null,a=null,{updateSubscriptionOptions:i,unsubscribeQueryResult:s}=e.internalActions,u=(d,f)=>{var S,C;if(i.match(f)){let{queryCacheKey:v,requestId:h,options:x}=f.payload;return d?.[v]?.[h]&&(d[v][h]=x),!0}if(s.match(f)){let{queryCacheKey:v,requestId:h}=f.payload;return d[v]&&delete d[v][h],!0}if(e.internalActions.removeQueryResult.match(f))return delete d[f.payload.queryCacheKey],!0;if(t.pending.match(f)){let{meta:{arg:v,requestId:h}}=f,x=d[S=v.queryCacheKey]??(d[S]={});return x[`${h}_running`]={},v.subscribe&&(x[h]=v.subscriptionOptions??x[h]??{}),!0}let y=!1;if(t.fulfilled.match(f)||t.rejected.match(f)){let v=d[f.meta.arg.queryCacheKey]||{},h=`${f.meta.requestId}_running`;y||(y=!!v[h]),delete v[h]}if(t.rejected.match(f)){let{meta:{condition:v,arg:h,requestId:x}}=f;if(v&&h.subscribe){let E=d[C=h.queryCacheKey]??(d[C]={});E[x]=h.subscriptionOptions??E[x]??{},y=!0}}return y},c=()=>r.currentSubscriptions,p={getSubscriptions:c,getSubscriptionCount:d=>{let y=c()[d]??{};return Ln(y)},isRequestSubscribed:(d,f)=>!!c()?.[d]?.[f]};return(d,f)=>{if(n||(n=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(d))return n=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(d))return[!1,p];let y=u(r.currentSubscriptions,d),S=!0;if(y){a||(a=setTimeout(()=>{let h=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,x]=Ai(n,()=>h);f.next(e.internalActions.subscriptionsUpdated(x)),n=h,a=null},500));let C=typeof d.type=="string"&&!!d.type.startsWith(o),v=t.rejected.match(d)&&d.meta.condition&&!!d.meta.arg.subscribe;S=!C&&!v}return[S,!1]}};function PE(e){for(let t in e)return!1;return!0}var bE=2147483647/1e3-1,wE=({reducerPath:e,api:t,queryThunk:r,context:o,internalState:n,selectors:{selectQueryEntry:a,selectConfig:i}})=>{let{removeQueryResult:s,unsubscribeQueryResult:u,cacheEntriesUpserted:c}=t.internalActions,l=Ft(u.match,r.fulfilled,r.rejected,c.match);function m(S){let C=n.currentSubscriptions[S];return!!C&&!PE(C)}let p={},d=(S,C,v)=>{let h=C.getState(),x=i(h);if(l(S)){let E;if(c.match(S))E=S.payload.map(P=>P.queryDescription.queryCacheKey);else{let{queryCacheKey:P}=u.match(S)?S.payload:S.meta.arg;E=[P]}f(E,C,x)}if(t.util.resetApiState.match(S))for(let[E,P]of Object.entries(p))P&&clearTimeout(P),delete p[E];if(o.hasRehydrationInfo(S)){let{queries:E}=o.extractRehydrationInfo(S);f(Object.keys(E),C,x)}};function f(S,C,v){let h=C.getState();for(let x of S){let E=a(h,x);y(x,E?.endpointName,C,v)}}function y(S,C,v,h){let E=o.endpointDefinitions[C]?.keepUnusedDataFor??h.keepUnusedDataFor;if(E===1/0)return;let P=Math.max(0,Math.min(E,bE));if(!m(S)){let R=p[S];R&&clearTimeout(R),p[S]=setTimeout(()=>{m(S)||v.dispatch(s({queryCacheKey:S})),delete p[S]},P*1e3)}}return d},DS=new Error("Promise never resolved before cacheEntryRemoved."),IE=({api:e,reducerPath:t,context:r,queryThunk:o,mutationThunk:n,internalState:a,selectors:{selectQueryEntry:i,selectApiState:s}})=>{let u=Ei(o),c=Ei(n),l=Ht(o,n),m={};function p(C,v,h){let x=m[C];x?.valueResolved&&(x.valueResolved({data:v,meta:h}),delete x.valueResolved)}function d(C){let v=m[C];v&&(delete m[C],v.cacheEntryRemoved())}let f=(C,v,h)=>{let x=y(C);function E(P,R,A,b){let q=i(h,R),M=i(v.getState(),R);!q&&M&&S(P,b,R,v,A)}if(o.pending.match(C))E(C.meta.arg.endpointName,x,C.meta.requestId,C.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(C))for(let{queryDescription:P,value:R}of C.payload){let{endpointName:A,originalArgs:b,queryCacheKey:q}=P;E(A,q,C.meta.requestId,b),p(q,R,{})}else if(n.pending.match(C))v.getState()[t].mutations[x]&&S(C.meta.arg.endpointName,C.meta.arg.originalArgs,x,v,C.meta.requestId);else if(l(C))p(x,C.payload,C.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(C)||e.internalActions.removeMutationResult.match(C))d(x);else if(e.util.resetApiState.match(C))for(let P of Object.keys(m))d(P)};function y(C){return u(C)?C.meta.arg.queryCacheKey:c(C)?C.meta.arg.fixedCacheKey??C.meta.requestId:e.internalActions.removeQueryResult.match(C)?C.payload.queryCacheKey:e.internalActions.removeMutationResult.match(C)?ii(C.payload):""}function S(C,v,h,x,E){let P=r.endpointDefinitions[C],R=P?.onCacheEntryAdded;if(!R)return;let A={},b=new Promise(D=>{A.cacheEntryRemoved=D}),q=Promise.race([new Promise(D=>{A.valueResolved=D}),b.then(()=>{throw DS})]);q.catch(()=>{}),m[h]=A;let M=e.endpoints[C].select(P.type==="query"?v:h),j=x.dispatch((D,V,Q)=>Q),O={...x,getCacheEntry:()=>M(x.getState()),requestId:E,extra:j,updateCachedData:P.type==="query"?D=>x.dispatch(e.util.updateQueryData(C,v,D)):void 0,cacheDataLoaded:q,cacheEntryRemoved:b},T=R(v,O);Promise.resolve(T).catch(D=>{if(D!==DS)throw D})}return f},EE=({api:e,context:{apiUid:t},reducerPath:r})=>(o,n)=>{e.util.resetApiState.match(o)&&n.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},qE=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:o,queryThunk:n,api:a,assertTagType:i,refetchQuery:s,internalState:u})=>{let{removeQueryResult:c}=a.internalActions,l=Ft(Ht(o),fa(o)),m=Ft(Ht(o,n),Xr(o,n)),p=[],d=(S,C)=>{l(S)?y($S(S,"invalidatesTags",r,i),C):m(S)?y([],C):a.util.invalidateTags.match(S)&&y(sm(S.payload,void 0,void 0,void 0,void 0,i),C)};function f(S){let{queries:C,mutations:v}=S;for(let h of[C,v])for(let x in h)if(h[x]?.status==="pending")return!0;return!1}function y(S,C){let v=C.getState(),h=v[e];if(p.push(...S),h.config.invalidationBehavior==="delayed"&&f(h))return;let x=p;if(p=[],x.length===0)return;let E=a.util.selectInvalidatedBy(v,x);t.batch(()=>{let P=Array.from(E.values());for(let{queryCacheKey:R}of P){let A=h.queries[R],b=u.currentSubscriptions[R]??{};A&&(Ln(b)===0?C.dispatch(c({queryCacheKey:R})):A.status!=="uninitialized"&&C.dispatch(s(A)))}})}return d},TE=({reducerPath:e,queryThunk:t,api:r,refetchQuery:o,internalState:n})=>{let a={},i=(d,f)=>{(r.internalActions.updateSubscriptionOptions.match(d)||r.internalActions.unsubscribeQueryResult.match(d))&&c(d.payload,f),(t.pending.match(d)||t.rejected.match(d)&&d.meta.condition)&&c(d.meta.arg,f),(t.fulfilled.match(d)||t.rejected.match(d)&&!d.meta.condition)&&u(d.meta.arg,f),r.util.resetApiState.match(d)&&m()};function s(d,f){let S=f.getState()[e].queries[d],C=n.currentSubscriptions[d];if(!(!S||S.status==="uninitialized"))return C}function u({queryCacheKey:d},f){let y=f.getState()[e],S=y.queries[d],C=n.currentSubscriptions[d];if(!S||S.status==="uninitialized")return;let{lowestPollingInterval:v,skipPollingIfUnfocused:h}=p(C);if(!Number.isFinite(v))return;let x=a[d];x?.timeout&&(clearTimeout(x.timeout),x.timeout=void 0);let E=Date.now()+v;a[d]={nextPollTimestamp:E,pollingInterval:v,timeout:setTimeout(()=>{(y.config.focused||!h)&&f.dispatch(o(S)),u({queryCacheKey:d},f)},v)}}function c({queryCacheKey:d},f){let S=f.getState()[e].queries[d],C=n.currentSubscriptions[d];if(!S||S.status==="uninitialized")return;let{lowestPollingInterval:v}=p(C);if(!Number.isFinite(v)){l(d);return}let h=a[d],x=Date.now()+v;(!h||x<h.nextPollTimestamp)&&u({queryCacheKey:d},f)}function l(d){let f=a[d];f?.timeout&&clearTimeout(f.timeout),delete a[d]}function m(){for(let d of Object.keys(a))l(d)}function p(d={}){let f=!1,y=Number.POSITIVE_INFINITY;for(let S in d)d[S].pollingInterval&&(y=Math.min(d[S].pollingInterval,y),f=d[S].skipPollingIfUnfocused||f);return{lowestPollingInterval:y,skipPollingIfUnfocused:f}}return i},OE=({api:e,context:t,queryThunk:r,mutationThunk:o})=>{let n=Ii(r,o),a=Xr(r,o),i=Ht(r,o),s={};return(c,l)=>{if(n(c)){let{requestId:m,arg:{endpointName:p,originalArgs:d}}=c.meta,f=t.endpointDefinitions[p],y=f?.onQueryStarted;if(y){let S={},C=new Promise((E,P)=>{S.resolve=E,S.reject=P});C.catch(()=>{}),s[m]=S;let v=e.endpoints[p].select(f.type==="query"?d:m),h=l.dispatch((E,P,R)=>R),x={...l,getCacheEntry:()=>v(l.getState()),requestId:m,extra:h,updateCachedData:f.type==="query"?E=>l.dispatch(e.util.updateQueryData(p,d,E)):void 0,queryFulfilled:C};y(d,x)}}else if(i(c)){let{requestId:m,baseQueryMeta:p}=c.meta;s[m]?.resolve({data:c.payload,meta:p}),delete s[m]}else if(a(c)){let{requestId:m,rejectedWithValue:p,baseQueryMeta:d}=c.meta;s[m]?.reject({error:c.payload??c.error,isUnhandledError:!p,meta:d}),delete s[m]}}},kE=({reducerPath:e,context:t,api:r,refetchQuery:o,internalState:n})=>{let{removeQueryResult:a}=r.internalActions,i=(u,c)=>{om.match(u)&&s(c,"refetchOnFocus"),nm.match(u)&&s(c,"refetchOnReconnect")};function s(u,c){let l=u.getState()[e],m=l.queries,p=n.currentSubscriptions;t.batch(()=>{for(let d of Object.keys(p)){let f=m[d],y=p[d];if(!y||!f)continue;(Object.values(y).some(C=>C[c]===!0)||Object.values(y).every(C=>C[c]===void 0)&&l.config[c])&&(Ln(y)===0?u.dispatch(a({queryCacheKey:d})):f.status!=="uninitialized"&&u.dispatch(o(f)))}})}return i};function VE(e){let{reducerPath:t,queryThunk:r,api:o,context:n}=e,{apiUid:a}=n,i={invalidateTags:g(`${t}/invalidateTags`)},s=m=>m.type.startsWith(`${t}/`),u=[EE,wE,qE,TE,IE,OE];return{middleware:m=>{let p=!1,f={...e,internalState:{currentSubscriptions:{}},refetchQuery:l,isThisApiSliceAction:s},y=u.map(v=>v(f)),S=AE(f),C=kE(f);return v=>h=>{if(!Si(h))return v(h);p||(p=!0,m.dispatch(o.internalActions.middlewareRegistered(a)));let x={...m,next:v},E=m.getState(),[P,R]=S(h,x,E),A;if(P?A=v(h):A=R,m.getState()[t]&&(C(h,x,E),s(h)||n.hasRehydrationInfo(h)))for(let b of y)b(h,x,E);return A}},actions:i};function l(m){return e.api.endpoints[m.endpointName].initiate(m.originalArgs,{subscribe:!1,forceRefetch:!0})}}var NS=Symbol(),jE=({createSelector:e=N}={})=>({name:NS,init(t,{baseQuery:r,tagTypes:o,reducerPath:n,serializeQueryArgs:a,keepUnusedDataFor:i,refetchOnMountOrArgChange:s,refetchOnFocus:u,refetchOnReconnect:c,invalidationBehavior:l},m){lp();let p=G=>(typeof process<"u",G);Object.assign(t,{reducerPath:n,endpoints:{},internalActions:{onOnline:nm,onOffline:BS,onFocus:om,onFocusLost:US},util:{}});let d=FE({serializeQueryArgs:a,reducerPath:n,createSelector:e}),{selectInvalidatedBy:f,selectCachedArgsForQuery:y,buildQuerySelector:S,buildInfiniteQuerySelector:C,buildMutationSelector:v}=d;nr(t.util,{selectInvalidatedBy:f,selectCachedArgsForQuery:y});let{queryThunk:h,infiniteQueryThunk:x,mutationThunk:E,patchQueryData:P,updateQueryData:R,upsertQueryData:A,prefetch:b,buildMatchThunkActions:q}=xE({baseQuery:r,reducerPath:n,context:m,api:t,serializeQueryArgs:a,assertTagType:p,selectors:d}),{reducer:M,actions:j}=RE({context:m,queryThunk:h,infiniteQueryThunk:x,mutationThunk:E,serializeQueryArgs:a,reducerPath:n,assertTagType:p,config:{refetchOnFocus:u,refetchOnReconnect:c,refetchOnMountOrArgChange:s,keepUnusedDataFor:i,reducerPath:n,invalidationBehavior:l}});nr(t.util,{patchQueryData:P,updateQueryData:R,upsertQueryData:A,prefetch:b,resetApiState:j.resetApiState,upsertQueryEntries:j.cacheEntriesUpserted}),nr(t.internalActions,j);let{middleware:O,actions:T}=VE({reducerPath:n,context:m,queryThunk:h,mutationThunk:E,infiniteQueryThunk:x,api:t,assertTagType:p,selectors:d});nr(t.util,T),nr(t,{reducer:M,middleware:O});let{buildInitiateQuery:D,buildInitiateInfiniteQuery:V,buildInitiateMutation:Q,getRunningMutationThunk:L,getRunningMutationsThunk:z,getRunningQueriesThunk:J,getRunningQueryThunk:te}=SE({queryThunk:h,mutationThunk:E,infiniteQueryThunk:x,api:t,serializeQueryArgs:a,context:m});return nr(t.util,{getRunningMutationThunk:L,getRunningMutationsThunk:z,getRunningQueryThunk:te,getRunningQueriesThunk:J}),{name:NS,injectEndpoint(G,Z){var ue;let X=(ue=t.endpoints)[G]??(ue[G]={});am(Z)&&nr(X,{name:G,select:S(G,Z),initiate:D(G,Z)},q(h,G)),gE(Z)&&nr(X,{name:G,select:v(),initiate:Q(G)},q(E,G)),im(Z)&&nr(X,{name:G,select:C(G,Z),initiate:V(G,Z)},q(h,G))}}}}),WS=vE(jE());var DE=async(e,t,r)=>{let o=t.getState(),{accessToken:n,environment:a,organizationId:i}=o.configuration,s=o.generatedAnswer.answerConfigurationId,u={...e,headers:{...e?.headers||{},Authorization:`Bearer ${n}`}};try{let c=qe(i,a);return{data:QS({baseUrl:`${c}/rest/organizations/${i}/answer/v1/configs/${s}`})(u,t,r)}}catch(c){return{error:c}}},HS=WS({reducerPath:"answer",baseQuery:LS(DE,{maxRetries:3}),endpoints:()=>({})});var NE=(e,t)=>{let{contentFormat:r}=t;e.contentFormat=r,e.isStreaming=!0,e.isLoading=!1},ME=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},QE=(e,t)=>{e.citations=t.citations},LE=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},UE=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},BE=(e,t,r)=>{let o=JSON.parse(e.data);o.finishReason==="ERROR"&&o.errorMessage&&UE(t,o);let n=o.payload.length?JSON.parse(o.payload):{};switch(o.payloadType){case"genqa.headerMessageType":n.contentFormat&&(NE(t,n),r(Yd(n.contentFormat)));break;case"genqa.messageType":n.textDelta&&(ME(t,n),r(Gd({textDelta:n.textDelta})));break;case"genqa.citationsType":n.citations&&(QE(t,n),r(Kd({citations:n.citations})));break;case"genqa.endOfStreamType":LE(t,n),r(Vc(n.answerGenerated??!1));break}},GS=HS.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),serializeQueryArgs:({endpointName:t,queryArgs:r})=>{let{analytics:o,...n}=r;return`${t}(${JSON.stringify(n)})`},async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:o,updateCachedData:n,dispatch:a}){await o;let{configuration:i,generatedAnswer:s,insightConfiguration:u}=r(),{organizationId:c,environment:l,accessToken:m}=i,p=qe(c,l),d=`${p}/rest/organizations/${c}/insight/v1/configs/${u?.insightId}/answer/${s.answerConfigurationId}/generate`,f=`${p}/rest/organizations/${c}/answer/v1/configs/${s.answerConfigurationId}/generate`;await AS(u?d:f,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${m}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch,onopen:async y=>{let S=y.headers.get("x-answer-id");S&&n(C=>{C.answerId=S})},onmessage:y=>{n(S=>{BE(y,S,a)})},onerror:y=>{throw y},onclose:()=>{n(y=>{a(Jd(!y.generated))})}})}})})}),gY=N(e=>hS(e)?.q,e=>e.search.requestId,e=>e.generatedAnswer.cannotAnswer,e=>e.configuration.analytics.analyticsMode,e=>e.search.searchAction?.actionCause,(e,t,r,o,n)=>({q:e,requestId:t,cannotAnswer:r,analyticsMode:o,actionCause:n}));import{isNullOrUndefined as _E}from"../../bueno/v1.1.0/bueno.esm.js";function $E(e){let t=e.payload?.analyticsAction;return KS(e)&&!_E(t)}function KS(e){return"type"in e}var YS=e=>t=>r=>{let o;$E(r)&&(o=r.payload.analyticsAction,delete r.payload.analyticsAction);let n=t(r);return KS(r)&&(r.type==="search/executeSearch/fullfilled"&&o===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&o===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&o===void 0&&console.error("No analytics action associated with product recommendation:",r)),o!==void 0&&e.dispatch(o),n};import{isNullOrUndefined as ge}from"../../bueno/v1.1.0/bueno.esm.js";import{RecordValue as zE}from"../../bueno/v1.1.0/bueno.esm.js";var FY=g("tab/register",e=>{let t=new zE({values:{id:k,expression:me}});return F(e,t)}),Lc=g("tab/updateActiveTab",e=>F(e,k));var Uc=zt(Es(),1),XS=zt(JS(),1),eC=zt(ZS(),1);Uc.default.extend(eC.default);Uc.default.extend(XS.default);var tC=()=>({organizationId:"",accessToken:"",search:{locale:"en-US",timezone:Uc.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",analyticsMode:"next",source:{}},knowledge:{answerConfigurationId:""},environment:"prod"});var WE=/(^|; )Coveo-Pendragon=([^;]*)/;function mm(){return typeof window>"u"?!1:WE.exec(document.cookie)?.pop()||null}var Bc=B(tC(),e=>e.addCase(dr,(t,r)=>{HE(t,r.payload)}).addCase(Pf,(t,r)=>{GE(t,r.payload)}).addCase(ll,(t,r)=>{KE(t,r.payload)}).addCase(Bi,t=>{t.analytics.enabled=!1}).addCase(_i,t=>{t.analytics.enabled=!0}).addCase(bf,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(wf,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(Lc,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(Uy,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(we,(t,r)=>{ge(r.payload.tab)||(t.analytics.originLevel2=r.payload.tab)}));function HE(e,t){ge(t.accessToken)||(e.accessToken=t.accessToken),e.environment=t.environment??"prod",ge(t.organizationId)||(e.organizationId=t.organizationId)}function GE(e,t){ge(t.proxyBaseUrl)||(e.search.apiBaseUrl=t.proxyBaseUrl),ge(t.locale)||(e.search.locale=t.locale),ge(t.timezone)||(e.search.timezone=t.timezone),ge(t.authenticationProviders)||(e.search.authenticationProviders=t.authenticationProviders)}function KE(e,t){ge(t.enabled)||(e.analytics.enabled=t.enabled),ge(t.originContext)||(e.analytics.originContext=t.originContext),ge(t.originLevel2)||(e.analytics.originLevel2=t.originLevel2),ge(t.originLevel3)||(e.analytics.originLevel3=t.originLevel3),ge(t.proxyBaseUrl)||(e.analytics.apiBaseUrl=t.proxyBaseUrl),ge(t.trackingId)||(e.analytics.trackingId=t.trackingId),ge(t.analyticsMode)||(e.analytics.analyticsMode=t.analyticsMode),ge(t.source)||(e.analytics.source=t.source);try{let r=mm();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r)}catch{}ge(t.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.runtimeEnvironment),ge(t.anonymous)||(e.analytics.anonymous=t.anonymous),ge(t.deviceId)||(e.analytics.deviceId=t.deviceId),ge(t.userDisplayName)||(e.analytics.userDisplayName=t.userDisplayName),ge(t.documentLocation)||(e.analytics.documentLocation=t.documentLocation)}var Ne=Bc;function YE(e){return e.instantlyCallable}var rC=()=>e=>t=>e(YE(t)?t():t);var oC=e=>()=>t=>r=>{let o=r;if(!o.error)return t(r);let n=o.error,a=[o.payload?.errorCode,o.payload?.message].filter(Boolean).join(" - ");if(o.payload?.ignored||e.error(a||n.stack||n.message||n.name||"Error",`Action dispatch error ${o.type}`,r),o.error.name!=="SchemaValidationError")return t(r)},nC=e=>t=>r=>o=>(e.debug({action:o,nextState:t.getState()},`Action dispatched: ${o.type}`),r(o));function aC(e,t){let r={...e},o,n=a=>(i,s)=>{let u=a(i,s);return o?o(u,s):u};return{get combinedReducer(){let a=Xp(Object.entries(t).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return n(No({...a,...r}))},containsAll(a){return Object.keys(a).every(s=>s in r)},add(a){Object.keys(a).filter(i=>!(i in r)).forEach(i=>{r[i]=a[i]})},addCrossReducer(a){o=a}}}function _c(e,t,r){var o,n,a;t===void 0&&(t=50),r===void 0&&(r={});var i=(o=r.isImmediate)!=null&&o,s=(n=r.callback)!=null&&n,u=r.maxWait,c=Date.now(),l=[];function m(){if(u!==void 0){var d=Date.now()-c;if(d+t>=u)return u-d}return t}var p=function(){var d=[].slice.call(arguments),f=this;return new Promise(function(y,S){var C=i&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,c=Date.now(),!i){var h=e.apply(f,d);s&&s(h),l.forEach(function(x){return(0,x.resolve)(h)}),l=[]}},m()),C){var v=e.apply(f,d);return s&&s(v),y(v)}l.push({resolve:y,reject:S})})};return p.cancel=function(d){a!==void 0&&clearTimeout(a),l.forEach(function(f){return(0,f.reject)(d)}),l=[]},p}function JE(e){if(!e||!ZE(e))return null;try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=atob(r),n=decodeURIComponent(o.split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return JSON.parse(n)}catch{return null}}function iC(e,t=60){if(!e)return!1;let r=JE(e);if(!r||typeof r.exp!="number")return!1;let o=Math.floor(Date.now()/1e3);return r.exp<=o+t}function ZE(e){return e?/^[A-Za-z0-9_-]{2,}(?:\.[A-Za-z0-9_-]{2,}){2}$/.test(e):!1}function cC(e,t){let r=0,o=_c(()=>{r=0},500);return n=>a=>async i=>{if(!(typeof i=="function"))return a(i);let u=typeof t=="function";if(u){let m=n.getState(),p=tq(m);if(p&&iC(p)){e.debug("Access token is expired or about to expire, attempting renewal.");try{let d=await t();d?(n.dispatch(dr({accessToken:d})),e.debug("Access token was renewed.")):e.warn("Access token renewal returned an empty token. Please check the #renewAccessToken function.")}catch(d){e.warn(d,"Access token renewal failed. A retry will occur if necessary.")}}}let c=await a(i);if(!XE(c))return c;if(!u)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),sC(n,c.error),c;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),sC(n,c.error),c;r++,o();let l=await eq(t);n.dispatch(dr({accessToken:l})),n.dispatch(i)}}function XE(e){return typeof e=="object"&&e!==null&&"error"in e&&e.error?.name===new zo().name}function sC(e,t){e.dispatch(ft({status:401,statusCode:401,message:t.message,type:t.name}))}async function eq(e){try{return await e()}catch{return""}}function tq(e){return e.configuration.accessToken}function uC({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:o,name:n}){return Fp({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:n,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:o}}).prepend(...r).concat(nC(o.logger))})}function lC(e,t,r){let{reducers:o,navigatorContextProvider:n}=e,a=aC({...o,configurationReducer:r},e.preloadedState??{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let i=t.logger,s={...t,get relay(){return Ia(c.state,n)},get navigatorContext(){return Wd(this.relay,n)}},u=rq(e,s,a),c={addReducers(l){a.containsAll(l)||(a.add(l),u.replaceReducer(a.combinedReducer))},dispatch:u.dispatch,subscribe:u.subscribe,enableAnalytics(){u.dispatch(_i())},disableAnalytics(){u.dispatch(Bi())},get state(){return u.getState()},get relay(){return Ia(this.state,n)},get navigatorContext(){return Wd(this.relay,n)},logger:i,store:u};return c}function rq(e,t,r){let{preloadedState:o,configuration:n}=e,a=n.name||"coveo-headless",i=oq(e,t.logger);return uC({preloadedState:o,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:a})}function oq(e,t){let{renewAccessToken:r}=e.configuration,o=cC(t,r);return[rC,o,oC(t),YS].concat(GS.middleware,e.middlewares||[])}var CC=zt(SC(),1);function xC(e){return(0,CC.pino)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function RC(e,t){let r=Rq(e),o=he,n=Fq(e);return{analyticsClientMiddleware:r,validatePayload:o,preprocessRequest:n,logger:t}}function Rq(e){let{analytics:t}=e,r=(o,n)=>n;return t?.analyticsClientMiddleware||r}function Fq(e){return e.preprocessRequest||Ui}import{BooleanValue as Pq,RecordValue as Wc,Schema as bq,StringValue as Sm}from"../../bueno/v1.1.0/bueno.esm.js";import{BooleanValue as vq,RecordValue as Aq,StringValue as Hr}from"../../bueno/v1.1.0/bueno.esm.js";var FC={organizationId:k,accessToken:k,name:new Hr({required:!1,emptyAllowed:!1}),analytics:new Aq({options:{required:!1},values:{enabled:new vq({required:!1}),originContext:new Hr({required:!1}),originLevel2:new Hr({required:!1}),originLevel3:new Hr({required:!1}),analyticsMode:new Hr({constrainTo:["legacy","next"],required:!1,default:"next"}),proxyBaseUrl:new Hr({required:!1,url:!0}),trackingId:new Hr({required:!1,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),environment:new Hr({required:!1,default:"prod",constrainTo:["prod","hipaa","stg","dev"]})};var vC=new bq({...FC,analytics:new Wc({options:{required:!0},values:{enabled:new Pq({required:!1,default:!0}),proxyBaseUrl:new Sm({required:!1,url:!0}),source:new Wc({options:{required:!1},values:{"@coveo/atomic":ne,"@coveo/quantic":ne}}),trackingId:new Sm({required:!0,emptyAllowed:!1,regex:/^[a-zA-Z0-9_\-.]{1,100}$/})}}),context:new Wc({options:{required:!0},values:Pa}),cart:new Wc({values:fl}),proxyBaseUrl:new Sm({required:!1,url:!0})});function wq(){return{accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",analytics:{trackingId:"sports-ui-samples"},context:{language:"en",country:"US",currency:"USD",view:{url:"https://sports.barca.group"}},cart:{items:[{productId:"SP01057_00001",quantity:1,name:"Kayaker Canoe",price:800},{productId:"SP00081_00001",quantity:1,name:"Bamboo Canoe Paddle",price:120},{productId:"SP04236_00005",quantity:1,name:"Eco-Brave Rashguard",price:33},{productId:"SP04236_00005",quantity:1,name:"Eco-Brave Rashguard",price:33}]},organizationId:"searchuisamples"}}var Iq={productListing:Vn,recommendations:jn,commerceSearch:Qt,commercePagination:Mt,commerceSort:Lt,facetOrder:Bt,fieldSuggestionsOrder:pt,facetSearchSet:Nn,categoryFacetSearchSet:$r,commerceFacetSet:oe,manualNumericFacetSet:Pc,commerceContext:wt,commerceQuery:Re,cart:en,didYouMean:Zi,triggers:Ut};function Eq(e){let t=xC(e.loggerOptions),{configuration:r}=e;qq(r,t);let o=Tq(r,t),n={...RC(r,t),apiClient:o},a={...Iq,configuration:dl,version:$d},i={...e,reducers:a},s=lC(i,n,dl),{state:u,...c}=s,{accessToken:l,environment:m,organizationId:p,analytics:d,proxyBaseUrl:f,context:y,cart:S}=r;return c.dispatch(Go({accessToken:l,environment:m,organizationId:p})),c.dispatch(Yo(d)),f!==void 0&&c.dispatch(Ko({proxyBaseUrl:f})),c.dispatch(ce(y)),S?.items!==void 0&&c.dispatch(mr(S.items)),Jm({...c,get relay(){return s.relay},get[U](){return s.state},get configuration(){return{...s.state.configuration}}})}function qq(e,t){try{vC.validate(e)}catch(r){throw t.error("Commerce engine configuration error",r),r}}function Tq(e,t){return new Li({logger:t,preprocessRequest:e.preprocessRequest||Ui})}function a4(e){return e.addReducers({configuration:Bc}),{disableAnalytics:$i,enableAnalytics:zi,updateAnalyticsConfiguration:Yo,updateBasicConfiguration:Go,updateProxyBaseUrl:Ko}}function u4(e){return e.addReducers({cart:en}),{emitPurchaseEvent:Wi,emitCartActionEvent:Hi,purchase:Xo,setItems:mr,updateItemQuantity:Zo}}function p4(e){return e.addReducers({commerceContext:wt}),{setContext:ce,setView:le,setLocation:tn}}function h4(e){return e.addReducers({commerceFacetSet:oe}),{toggleSelectCategoryFacetValue:Nt,updateCategoryFacetNumberOfValues:vo}}function R4(e){return e.addReducers({commerceFacetSet:oe}),{clearAllCoreFacets:Ce,deleteAllCoreFacets:gr,deselectAllValuesInCoreFacet:Oe,updateAutoSelectionForAllCoreFacets:rn,updateCoreFacetFreezeCurrentValues:po,updateCoreFacetIsFieldExpanded:mo,updateCoreFacetNumberOfValues:lo}}function P4(e){return e.addReducers({commerceFacetSet:oe}),{toggleSelectDateFacetValue:st,toggleExcludeDateFacetValue:ct,updateDateFacetValues:Tn}}function E4(e){return e.addReducers({commerceFacetSet:oe}),{toggleSelectLocationFacetValue:lt}}function k4(e){return e.addReducers({commerceFacetSet:oe}),{toggleSelectNumericFacetValue:He,toggleExcludeNumericFacetValue:Ge,updateNumericFacetValues:Cc}}function N4(e){return e.addReducers({commerceFacetSet:oe}),{toggleExcludeFacetValue:dt,toggleSelectFacetValue:mt}}import{RecordValue as Oq,StringValue as kq}from"../../bueno/v1.1.0/bueno.esm.js";var Cm={id:k},AC={...Cm,query:me},_n=g("commerce/instantProducts/clearExpired",e=>F(e,Cm)),Vq={child:new Oq({options:{required:!0},values:{permanentid:new kq({required:!0})}}),...AC},$n=g("commerce/instantProducts/promoteChildToParent",e=>F(e,Vq)),zn=g("commerce/instantProducts/register",e=>F(e,Cm)),Wn=g("commerce/instantProducts/updateQuery",e=>F(e,AC));function Hc(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var PC=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},bC=(e,t)=>{let{q:r,id:o}=e;r&&(t[o].q=r)},wC=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(([o,n])=>{Hc(n)&&delete t[r].cache[o]})},IC=(e,t,r)=>{for(let n in t)for(let a in t[n].cache)t[n].cache[a].isActive=!1;if(!xm(e,t)){jq(e,t,r);return}let o=xm(e,t);o.isLoading=!0,o.isActive=!0,o.error=null},EC=(e,t,r)=>{let{id:o,q:n,searchUid:a,cacheTimeout:i,totalCountFiltered:s,duration:u}=e;t[o].cache[n]={...xm(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:i?i+Date.now():0,totalCountFiltered:s,duration:u}},qC=(e,t)=>{let{id:r,q:o,error:n}=e;t[r].cache[o].error=n||null,t[r].cache[o].isLoading=!1,t[r].cache[o].isActive=!1},xm=(e,t)=>{let{q:r,id:o}=e;return t[o].cache[r]||null},jq=(e,t,r)=>{let{q:o,id:n}=e;t[n].cache[o]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};function TC(){return{}}var Gc=B(TC(),e=>{e.addCase(zn,(t,r)=>{PC(r.payload,t)}).addCase(Wn,(t,r)=>{bC({...r.payload,q:r.payload.query},t)}).addCase(_n,(t,r)=>{wC(r.payload,t)}).addCase(sn.pending,(t,r)=>{IC(r.meta.arg,t,{products:[]})}).addCase(sn.fulfilled,(t,r)=>{let{response:{products:o,responseId:n,pagination:{totalEntries:a}}}=r.payload;EC({duration:0,searchUid:n,totalCountFiltered:a,...r.meta.arg},t,{products:o.map((i,s)=>Dq(i,s+1,n))})}).addCase(sn.rejected,(t,r)=>{qC(r.meta.arg,t)}).addCase($n,(t,r)=>{let o=t[r.payload.id].cache[r.payload.query];if(!o)return;let n=o.products,a,i=n.findIndex(d=>(a=d.children.find(f=>f.permanentid===r.payload.child.permanentid),!!a));if(i===-1||a===void 0)return;let s=n[i].responseId,u=n[i].position,{children:c,totalNumberOfChildren:l}=n[i],m={...a,children:c,totalNumberOfChildren:l,position:u,responseId:s},p=[...n];p.splice(i,1,m),o.products=p})});function Dq(e,t,r){let o=e.children.some(s=>s.permanentid===e.permanentid);if(e.children.length===0||o)return{...e,position:t,responseId:r};let{children:n,totalNumberOfChildren:a,...i}=e;return{...e,children:[i,...n],position:t,responseId:r}}function t6(e){return e.addReducers({instantProducts:Gc}),{clearExpiredProducts:_n,promoteChildToParent:$n,registerInstantProducts:zn,updateInstantProductsQuery:Wn}}function a6(e){return e.addReducers({commercePagination:Mt}),{registerRecommendationsSlotPagination:on,setPageSize:Kt,selectPage:It,nextPage:yr,previousPage:hr}}var Kc=_("commerce/product/view",async(e,{extra:t,getState:r})=>{let{relay:o}=t,a={currency:Jo(r().commerceContext),product:e};o.emit("ec.productView",a)}),Yc=_("commerce/product/click",async(e,{extra:t,getState:r})=>{let{relay:o}=t,a={currency:Jo(r().commerceContext),...e};o.emit("ec.productClick",a)});function d6(){return{productClick:Yc,productView:Kc}}function g6(e){return e.addReducers({productListing:Vn}),{fetchProductListing:ae,fetchMoreProducts:Dr,promoteChildToParent:In}}function F6(e){return e.addReducers({facetOrder:Bt,commerceFacetSet:oe,commercePagination:Mt,commerceSort:Lt}),{restoreProductListingParameters:je}}function b6(e){return e.addReducers({query:Re}),{updateQuery:pe}}import{isNullOrUndefined as Qq}from"../../bueno/v1.1.0/bueno.esm.js";var ci={id:k,query:me},Rm=g("querySet/register",e=>F(e,ci)),Fm=g("querySet/update",e=>F(e,ci));var Hn=g("commerce/querySet/register",e=>F(e,ci)),bo=g("commerce/querySet/update",e=>F(e,ci));import{NumberValue as Nq}from"../../bueno/v1.1.0/bueno.esm.js";var ui={id:k},vm=g("querySuggest/register",e=>F(e,{...ui,count:new Nq({min:0})})),OC=g("querySuggest/unregister",e=>F(e,ui)),li=g("querySuggest/selectSuggestion",e=>F(e,{...ui,expression:me})),Am=g("querySuggest/clear",e=>F(e,ui)),Jc=_("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,validatePayload:n,navigatorContext:a}})=>{n(e,ui);let i=e.id,s=await Mq(i,t(),a),u=await o.querySuggest(s);return at(u)?r(u.error):{id:i,q:s.q,...u.success}}),Mq=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl??et(t.configuration.organizationId,t.configuration.environment),count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Tt.getInstance().getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await Cn(t.configuration.analytics):So(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var wo=B(Ns(),e=>{e.addCase(Rm,(t,r)=>VC(t,r.payload)).addCase(Hn,(t,r)=>VC(t,r.payload)).addCase(Fm,(t,r)=>{let{id:o,query:n}=r.payload;di(t,o,n)}).addCase(bo,(t,r)=>{let{id:o,query:n}=r.payload;di(t,o,n)}).addCase(li,(t,r)=>{let{id:o,expression:n}=r.payload;di(t,o,n)}).addCase(Dt,(t,r)=>{let{id:o,expression:n}=r.payload;di(t,o,n)}).addCase(K.fulfilled,(t,r)=>{let{queryExecuted:o}=r.payload;Pm(t,o)}).addCase(ie.fulfilled,(t,r)=>{let{queryExecuted:o}=r.payload;Pm(t,o)}).addCase(we,kC).addCase(fe,kC).addCase(xe.fulfilled,(t,r)=>{if(r.payload)for(let[o,n]of Object.entries(r.payload.querySet))di(t,o,n)})});function kC(e,t){Qq(t.payload.q)||Pm(e,t.payload.q)}function Pm(e,t){Object.keys(e).forEach(r=>{e[r]=t})}var di=(e,t,r)=>{t in e&&(e[t]=r)},VC=(e,t)=>{let{id:r,query:o}=t;r in e||(e[r]=o)};function a8(e){return e.addReducers({querySetReducer:wo}),{registerQuerySetQuery:Hn,updateQuerySetQuery:bo}}var jC=()=>({});var Io=B(jC(),e=>e.addCase(vm,(t,r)=>{DC(t,r.payload)}).addCase(qn,(t,r)=>{DC(t,r.payload)}).addCase(OC,(t,r)=>{delete t[r.payload.id]}).addCase(Jc.pending,NC).addCase(Jc.fulfilled,(t,r)=>{let o=t[r.meta.arg.id];if(!o||r.meta.requestId!==o.currentRequestId)return;let{q:n}=r.payload;n&&o.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),o.responseId=r.payload.responseId,o.completions=r.payload.completions,o.isLoading=!1,o.error=null}).addCase(Jc.rejected,MC).addCase(De.pending,NC).addCase(De.fulfilled,(t,r)=>{let o=t[r.meta.arg.id];if(!o||r.meta.requestId!==o.currentRequestId)return;let{query:n}=r.payload;n&&o.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),o.responseId=r.payload.responseId,o.completions=r.payload.completions.map(a=>({expression:a.expression,highlighted:a.highlighted,score:0,executableConfidence:0})),o.isLoading=!1,o.error=null}).addCase(De.rejected,MC).addCase(Am,(t,r)=>{QC(t,r.payload)}).addCase(Nr,(t,r)=>{QC(t,r.payload)}).addCase(ft,(t,r)=>{Object.keys(t).forEach(o=>{let n=t[o];n&&(n.error=r.payload,n.isLoading=!1)})}));function DC(e,t){let r=t.id;r in e||(e[r]=Lq(t))}function Lq(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function NC(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function MC(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function QC(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}function h8(e){return e.addReducers({querySuggest:Io}),{clearQuerySuggest:Nr,fetchQuerySuggestions:De,registerQuerySuggest:qn,selectQuerySuggestion:Dt}}import{ArrayValue as Uq,NumberValue as Bq,StringValue as _q}from"../../bueno/v1.1.0/bueno.esm.js";var bm={queries:new Uq({required:!0,each:new _q({emptyAllowed:!1})}),maxLength:new Bq({required:!0,min:1,default:10})},Zc=g("recentQueries/registerRecentQueries",e=>F(e,bm)),Xc=g("recentQueries/clearRecentQueries");function eu(){return{queries:[],maxLength:10}}var I8=B(eu(),e=>{e.addCase(Zc,wm).addCase(Xc,Im).addCase(ie.fulfilled,(t,r)=>{let o=r.payload.queryExecuted,n=r.payload.response.results;!o.length||!n.length||Em(o,t)})});function wm(e,t){e.queries=Array.from(new Set(t.payload.queries.map(r=>r.trim().toLowerCase()))).slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function Im(e){e.queries=[]}function Em(e,t){let r=e.trim().toLowerCase();if(r==="")return;let o=Array.from(new Set(t.queries.filter(n=>n.trim().toLowerCase()!==r))).slice(0,t.maxLength-1);t.queries=[r,...o]}var tu=g("commerce/recentQueries/clear"),mi=g("commerce/recentQueries/register",e=>F(e,bm));var ru=B(eu(),e=>{e.addCase(mi,wm).addCase(tu,Im).addCase(K.fulfilled,(t,r)=>{let o=r.payload.queryExecuted,n=r.payload.response.products;!o.length||!n.length||Em(o,t)})});function B8(e){return e.addReducers({recentQueries:ru}),{registerRecentQueries:Zc,clearRecentQueries:Xc}}function W8(e){return e.addReducers({recommendations:jn}),{fetchRecommendations:Ct,fetchMoreRecommendations:Qr,promoteChildToParent:kn,registerRecommendationsSlot:On}}function Y8(e){return e.addReducers({commerceSearch:Qt}),{executeSearch:K,fetchMoreProducts:Cr,prepareForSearchWithQuery:an,promoteChildToParent:cn}}function a5(e){return e.addReducers({facetOrder:Bt,commerceFacetSet:oe,commercePagination:Mt,query:Re,querySet:wo,commerceSort:Lt}),{restoreSearchParameters:fe}}function u5(e){return e.addReducers({commerceSort:Lt}),{applySort:xt}}import{BooleanValue as $q,StringValue as zq}from"../../bueno/v1.1.0/bueno.esm.js";function ou(e){return e.type==="redirect"}var nu=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(ou);return t.length?t[0].content:null}};var LC=g("standaloneSearchBox/register",e=>F(e,{id:k,redirectionUrl:k,overwrite:new $q({required:!1})})),UC=g("standaloneSearchBox/updateRedirectionUrl",e=>F(e,{id:k,redirectionUrl:k})),BC=g("standaloneSearchBox/reset",e=>F(e,{id:k})),_C=g("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>F(e,{id:k})),$C=g("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),au=_("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:o,extra:{apiClient:n,validatePayload:a,navigatorContext:i}})=>{a(e,{id:new zq({emptyAllowed:!1})});let s=await Hq(r(),i),u=await n.plan(s);if(at(u))return o(u.error);let{redirectionUrl:c}=new nu(u.success);return c&&t(Wq(c)),c||""}),Wq=e=>Se("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),Hq=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl??et(e.configuration.organizationId,e.configuration.environment),locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await Cn(e.configuration.analytics):So(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});function zC(){return{}}var WC=B(zC(),e=>e.addCase(LC,(t,r)=>{let{id:o,redirectionUrl:n,overwrite:a}=r.payload;!a&&o in t||(t[o]=qm(n))}).addCase(BC,(t,r)=>{let{id:o}=r.payload,n=t[o];if(n){t[o]=qm(n.defaultRedirectionUrl);return}}).addCase(UC,(t,r)=>{let{id:o,redirectionUrl:n}=r.payload;o in t&&(t[o]=qm(n))}).addCase(au.pending,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!0)}).addCase(au.fulfilled,(t,r)=>{let o=r.payload,n=t[r.meta.arg.id];n&&(n.redirectTo=o||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(au.rejected,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!1)}).addCase(_C,(t,r)=>{let o=t[r.payload.id];o&&(o.analytics.cause="searchFromLink")}).addCase($C,(t,r)=>{let o=t[r.payload.id];o&&(o.analytics.cause="omniboxFromLink",o.analytics.metadata=r.payload.metadata)}));function qm(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}import{BooleanValue as Gq,StringValue as Kq}from"../../bueno/v1.1.0/bueno.esm.js";var HC=(e,t)=>{let r=fr(e,t);return{...r,context:{...r.context,capture:!1},page:0,perPage:1,query:e.commerceQuery.query}};var Gr=_("commerce/standaloneSearchBox/fetchRedirect",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:o,navigatorContext:n}})=>{F(e,{id:new Kq({emptyAllowed:!1})});let a=t(),i=HC(a,n),s=await o.plan(i);if(Te(s))return r(s.error);let u=s.success.triggers.filter(ou);return u.length?u[0].content:""}),Gn=g("commerce/standaloneSearchBox/register",e=>F(e,{id:k,redirectionUrl:k,overwrite:new Gq({required:!1})})),Kn=g("commerce/standaloneSearchBox/updateRedirectionUrl",e=>F(e,{id:k,redirectionUrl:k})),Yn=g("commerce/standaloneSearchBox/reset",e=>F(e,{id:k}));function L5(e){return e.addReducers({standaloneSearchBoxSet:WC}),{fetchRedirectUrl:Gr,registerStandaloneSearchBox:Gn,updateStandaloneSearchBoxRedirectionUrl:Kn,resetStandaloneSearchBox:Yn}}function $5(e){return e.addReducers({triggers:Ut}),{updateIgnoreQueryTrigger:Sr,applyQueryTriggerModification:nn}}function Yq(e,t={}){if(!Jq(e))throw $;let r=W(e),{dispatch:o}=e,n=()=>e[U];return t.options&&(Le(e,$f,t.options,"buildContext"),o(ce(t.options))),{...r,get state(){return n().commerceContext},setLanguage:a=>o(ce({...n().commerceContext,language:a})),setCountry:a=>o(ce({...n().commerceContext,country:a})),setCurrency:a=>o(ce({...n().commerceContext,currency:a})),setView:a=>o(le(a)),setLocation:a=>o(tn(a))}}function Jq(e){return e.addReducers({commerceContext:wt}),!0}var iu=N((e,t)=>({facetRequestSelector:e.commerceFacetSet[t]}),({facetRequestSelector:e})=>e?.request);function _t(e,t){if(!Zq(e))throw $;let{dispatch:r}=e,o=W(e),n=t.options.facetId,a=()=>e[U],i=()=>iu(a(),n),s=()=>t.options.facetResponseSelector(a(),n),u=()=>t.options.isFacetLoadingResponseSelector(a()),c=()=>i()?.values?.filter(l=>l.state!=="idle").length??0;return{...o,toggleSelect:l=>{r(t.options.toggleSelectActionCreator({selection:l,facetId:n})),r(t.options.fetchProductsActionCreator())},toggleExclude:l=>{if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleExclude had no effect.");return}r(t.options.toggleExcludeActionCreator({selection:l,facetId:n})),r(t.options.fetchProductsActionCreator())},toggleSingleSelect:function(l){l.state==="idle"&&r(Oe({facetId:n})),this.toggleSelect(l)},toggleSingleExclude:function(l){if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleSingleExclude had no effect.");return}l.state==="idle"&&r(Oe({facetId:n})),this.toggleExclude(l)},isValueSelected:l=>l.state==="selected",isValueExcluded:l=>l.state==="excluded",deselectAll(){r(Oe({facetId:n})),r(t.options.fetchProductsActionCreator())},showMoreValues(){let l=i()?.numberOfValues??0,m=i()?.initialNumberOfValues??1,p=m-l%m,d=l+p;r(lo({facetId:n,numberOfValues:d})),r(mo({facetId:n,isFieldExpanded:!0})),r(t.options.fetchProductsActionCreator())},showLessValues(){let l=i()?.initialNumberOfValues??1,m=Math.max(l,c());r(lo({facetId:n,numberOfValues:m})),r(mo({facetId:n,isFieldExpanded:!1})),r(t.options.fetchProductsActionCreator())},get state(){return eT(n,i(),s(),u())}}}function Zq(e){return e.addReducers({commerceFacetSet:oe}),!0}var Xq=e=>!!e&&e.values.length>(e.initialNumberOfValues??1)&&e.values.some(t=>t.state==="idle"),eT=(e,t,r,o)=>({canShowLessValues:Xq(t),canShowMoreValues:r?.moreValuesAvailable??!1,displayName:r?.displayName??"",facetId:e,field:r?.field??"",hasActiveValues:!r||r.type==="hierarchical"?!1:r.values.some(n=>n.state!=="idle"),isLoading:o,type:r?.type??"regular",values:r?.values?r.values:[]});function GC(e,t){let r=_t(e,{options:{...t,toggleSelectActionCreator:st,toggleExcludeActionCreator:ct}}),{dispatch:o}=e,{facetId:n,fetchProductsActionCreator:a}=t;return{...r,setRanges(i){o(Tn({facetId:n,values:i.map(s=>({...s,numberOfResults:0}))})),o(a())},get state(){return tT(r.state)},type:"dateRange"}}var tT=e=>({...e,type:"dateRange"});import{Schema as rT}from"../../bueno/v1.1.0/bueno.esm.js";function oT(e,t){if(!t)return;let r=new rT({criterion:Qp});$e(e,r,t,"buildSort")}function KC(e,t){if(!nT(e))throw $;let{dispatch:r}=e,o=W(e);oT(e,t.initialState);let n=t.initialState?.criterion;return n&&r(xt(n)),{...o,get state(){return e[U].commerceSort},sortBy(a){r(xt(a)),r(t.fetchProductsActionCreator())},isSortedBy(a){return JSON.stringify(this.state.appliedSort)===JSON.stringify(a)},isAvailable(a){return this.state.availableSorts.some(i=>JSON.stringify(i)===JSON.stringify(a))}}}function nT(e){return e.addReducers({commerceSort:Lt}),!0}var Jn=N((e,t)=>({state:e,facetId:t}),({state:e,facetId:t})=>{let r=e.commerceSearch.facets.find(o=>o.facetId===t);if(r&&r.facetId in e.commerceFacetSet)return r}),Zn=N(e=>({state:e}),({state:e})=>e.commerceSearch.isLoading);function su(e,t){let r=e.dispatch,{options:o,getFacetSearch:n,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:i}=t,{facetId:s}=o;return{updateText(u){r(xr({facetId:s,query:u,numberOfValues:n().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:u,options:c}=n();r(xr({facetId:s,numberOfValues:c.numberOfValues+u})),r(t.isForFieldSuggestions?i(s):a(s))},search(){r(t.isForFieldSuggestions?i(s):a(s))},clear(){r(Dn({facetId:s}))},updateCaptions(u){r(xr({facetId:s,captions:u}))},get state(){let{response:u,isLoading:c,options:l}=n(),{query:m}=l,p=u.values;return{...u,values:p,isLoading:c,query:m}}}}function YC(e,t){let{dispatch:r}=e,o={...Lr,...t.options},{facetId:n}=o,a=()=>"state"in e?e.state.categoryFacetSearchSet[n]:e[U].categoryFacetSearchSet[n];r(Xi(o));let i=su(e,{options:o,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...i,select(s){r(rt({facetId:n,value:s})),t.select(s)},get state(){return i.state}}}function Xn(e,t){if(!aT(e))throw $;let{state:r,updateCaptions:o,...n}=YC(e,{...t,executeFacetSearchActionCreator:a=>ut({facetId:a,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:a=>We({facetId:a,facetSearchType:t.options.type})});return n}function aT(e){return e.addReducers({categoryFacetSearchSet:$r}),!0}function JC(e,t){if(!iT(e))throw $;let{dispatch:r}=e,o=Ie(t.facetId),n=Xn(e,{options:{facetId:o,...t.facetSearch,numberOfValues:10},select:()=>{r(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),a=()=>e[U],i=c=>a().fieldSuggestionsOrder.find(l=>l.facetId===c),s=W(e),u=N(c=>c.categoryFacetSearchSet[o],c=>({isLoading:c.isLoading,moreValuesAvailable:c.response.moreValuesAvailable,query:c.options.query,values:c.response.values}));return{...s,...n,select:c=>{r(rt({facetId:t.facetId,value:c})),r(t.fetchProductsActionCreator())},updateText:c=>{n.updateText(c),n.search()},get state(){let c=i(t.facetId);return{displayName:c.displayName,field:c.field,facetId:c.facetId,...u(a())}},type:"hierarchical"}}function iT(e){return e.addReducers({fieldSuggestionsOrder:pt,categoryFacetSearchSet:$r,commerceFacetSet:oe}),!0}function sT(e){if(!cT(e))throw $;let t={fetchProductsActionCreator:K,facetResponseSelector:Jn,isFacetLoadingResponseSelector:Zn,facetSearch:{type:"SEARCH"}},r=W(e),o=N(n=>n.fieldSuggestionsOrder,n=>n.map(({type:a,facetId:i})=>{if(a==="hierarchical")return JC(e,{facetId:i,...t})}));return{...r,get fieldSuggestions(){return o(e[U]).filter(n=>n!==void 0)},get state(){return e[U].fieldSuggestionsOrder}}}function cT(e){return e.addReducers({fieldSuggestionsOrder:pt}),!0}import{isString as VT}from"../../bueno/v1.1.0/bueno.esm.js";import{Value as i9}from"../../bueno/v1.1.0/bueno.esm.js";import{ArrayValue as uu,BooleanValue as ZC,NumberValue as XC,RecordValue as gT,StringValue as cu,Value as ex}from"../../bueno/v1.1.0/bueno.esm.js";var ea={facetId:Y,field:k,tabs:new gT({options:{required:!1},values:{included:new uu({each:new cu}),excluded:new uu({each:new cu})}}),activeTab:new cu({required:!1}),delimitingCharacter:new cu({required:!1,emptyAllowed:!0}),filterFacetCount:new ZC({required:!1}),injectionDepth:new XC({required:!1,min:0}),numberOfValues:new XC({required:!1,min:1}),sortCriteria:new ex({required:!1}),basePath:new uu({required:!1,each:k}),filterByBasePath:new ZC({required:!1})};var tx=g("categoryFacet/register",e=>F(e,ea)),rx=g("categoryFacet/toggleSelectValue",e=>{try{return he(e.facetId,k),Za(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Qe(t)}}}),ox=g("categoryFacet/deselectAll",e=>F(e,ea.facetId)),x9=g("categoryFacet/updateNumberOfValues",e=>F(e,{facetId:ea.facetId,numberOfValues:ea.numberOfValues})),R9=g("categoryFacet/updateSortCriterion",e=>F(e,{facetId:ea.facetId,criterion:new ex})),F9=g("categoryFacet/updateBasePath",e=>F(e,{facetId:ea.facetId,basePath:new uu({each:k})}));var nx=B(Ds(),e=>{e.addCase(Yt,(t,r)=>({...t,...r.payload})).addCase(ie.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(ie.rejected,t=>{t.freezeFacetOrder=!1}).addCase(xe.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(tx,(t,r)=>{let{facetId:o,tabs:n}=r.payload;lu(n,t,o)}).addCase(Zs,(t,r)=>{let{facetId:o,tabs:n}=r.payload;lu(n,t,o)}).addCase(Ga,(t,r)=>{let{facetId:o,tabs:n}=r.payload;lu(n,t,o)}).addCase(Ja,(t,r)=>{let{facetId:o,tabs:n}=r.payload;lu(n,t,o)}).addCase(Sl,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Jt,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(we,(t,r)=>{[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(o=>{o in t||(t.facets[o]=ld()),t.facets[o].enabled=!0})})});function lu(e,t,r){let o={...ld(),tabs:e??{}};t.facets[r]=o}import{RecordValue as yT}from"../../bueno/v1.1.0/bueno.esm.js";var du=g("rangeFacet/executeToggleSelect",e=>F(e,Pd(e.selection))),mu=g("rangeFacet/executeToggleExclude",e=>F(e,Pd(e.selection)));var ax={facetId:Y,selection:new yT({values:ht})},hT=_("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ax),t(An(e)),t(du(e)),t(Yt())}),ST=_("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ax),t(Pn(e)),t(mu(e)),t(Yt())});function Tm(e,t){let r=t.payload??null;r&&(e.response=Je().response,e.results=[],e.questionAnswer=ja()),e.error=r,e.isLoading=!1}function km(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function CT(e,t){km(e,t),e.results=t.payload.response.results.map(r=>({...r,searchUid:t.payload.response.searchUid})),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Om(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var pu=B(Je(),e=>{e.addCase(Ls.rejected,(t,r)=>Tm(t,r)),e.addCase(Bs.rejected,(t,r)=>Tm(t,r)),e.addCase(Us.rejected,(t,r)=>Tm(t,r)),e.addCase(Ls.fulfilled,(t,r)=>{CT(t,r)}),e.addCase(Bs.fulfilled,(t,r)=>{km(t,r),t.results=[...t.results,...r.payload.response.results.map(o=>({...o,searchUid:r.payload.response.searchUid}))]}),e.addCase(Us.fulfilled,(t,r)=>{km(t,r),t.results=[...r.payload.response.results.map(o=>({...o,searchUid:r.payload.response.searchUid}))]}),e.addCase(qy.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(Ls.pending,Om),e.addCase(Bs.pending,Om),e.addCase(Us.pending,Om),e.addCase(La,(t,r)=>{t.searchAction=r.payload}),e.addCase(ft,(t,r)=>{t.error=r.payload,t.isLoading=!1})});import{ArrayValue as Vm,BooleanValue as xT,RecordValue as ix,Schema as RT,StringValue as Eo}from"../../bueno/v1.1.0/bueno.esm.js";var fu=["idle","selected","excluded"];var gu=["ascending","descending"],yu=["even","equiprobable"];var FT={start:new Eo,end:new Eo,endInclusive:new xT,state:new Eo({constrainTo:fu})},P7=new RT({facetId:Ws,field:Hs,tabs:new ix({options:{required:!1},values:{included:new Vm({each:new Eo}),excluded:new Vm({each:new Eo})}}),generateAutomaticRanges:Ys,filterFacetCount:Gs,injectionDepth:Ks,numberOfValues:_a,currentValues:new Vm({each:new ix({values:FT})}),sortCriteria:new Eo({constrainTo:gu}),rangeAlgorithm:new Eo({constrainTo:yu})});import{RecordValue as ET}from"../../bueno/v1.1.0/bueno.esm.js";var ux={facetId:Y,selection:new ET({values:Fo})},qT=_("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ux),t(bn(e)),t(du(e)),t(Yt())}),oZ=_("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,ux),t(wn(e)),t(mu(e)),t(Yt())});import{ArrayValue as jm,BooleanValue as TT,NumberValue as dx,RecordValue as mx,Schema as OT,StringValue as ta}from"../../bueno/v1.1.0/bueno.esm.js";var lx=["allValues","atLeastOneValue"];var kT={start:new dx,end:new dx,endInclusive:new TT,state:new ta({constrainTo:fu})},pZ=new OT({facetId:Ws,tabs:new mx({options:{required:!1},values:{included:new jm({each:new ta}),excluded:new jm({each:new ta})}}),field:Hs,generateAutomaticRanges:Ys,filterFacetCount:Gs,injectionDepth:Ks,numberOfValues:_a,currentValues:new jm({each:new mx({values:kT})}),sortCriteria:new ta({constrainTo:gu}),resultsMustMatch:new ta({constrainTo:lx}),rangeAlgorithm:new ta({constrainTo:yu})});function hu(e){return{endInclusive:!1,state:"idle",...e}}var fx="..",Dm="...",jT=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,DT={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0},qo="&",pi="=";function NT(e){return e in DT}function gx(e){let r=e in{nf:!0,df:!0,mnf:!0};return NT(e)&&r}var yx=e=>t=>Object.entries(t).map(e).filter(r=>r).join(qo);function Nm(e,t){return`${e}${pi}${encodeURIComponent(t)}`}function hx(e){return ra(e)?Cx(e,r=>typeof r=="string"):!1}function Sx(e){return ra(e)?Cx(e,r=>ra(r)&&"start"in r&&"end"in r):!1}function ra(e){return!!(e&&typeof e=="object")}function Cx(e,t){return Object.entries(e).filter(o=>{let n=o[1];return!Array.isArray(n)||!n.every(t)}).length===0}function xx(e,t){return Object.entries(t).map(([r,o])=>`${e}-${r}${pi}${o.map(n=>encodeURIComponent(n)).join(",")}`).join(qo)}function Rx(e,t){return Object.entries(t).map(([r,o])=>{let n=o.map(({start:a,end:i,endInclusive:s})=>`${a}${s?Dm:fx}${i}`).join(",");return`${e}-${r}${pi}${n}`}).join(qo)}function Fx(e){let[t,...r]=e.split(pi),o=r.join(pi);return[t,o]}function vx(e,t=jT){let[r,o]=e,n=t.exec(r);if(!n)return e;let a=n[1],i=n[2],s=o.split(","),u=MT(a,s),c={[i]:u};return[a,JSON.stringify(c)]}function MT(e,t){return e==="nf"||e==="mnf"?QT(t,"selected"):e==="df"?LT(t,"selected"):t}function QT(e,t){let r=[];for(let o of e){let{startAsString:n,endAsString:a,isEndInclusive:i}=Px(o),s=parseFloat(n),u=parseFloat(a);!Number.isFinite(s)||!Number.isFinite(u)||r.push(hu({start:s,end:u,state:t,endInclusive:i}))}return r}function px(e){try{return sy(e)?(Os(e,Ts),!0):kt(e)?(Ro(e),!0):!1}catch{return!1}}function LT(e,t){let r=[];for(let o of e){let{isEndInclusive:n,startAsString:a,endAsString:i}=Px(o);!px(a)||!px(i)||r.push(jr({start:a,end:i,state:t,endInclusive:n}))}return r}function Ax(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(o=>{let[n,a]=o;r[n]=a.map(i=>VT(i)?decodeURIComponent(i):i)}),r}function Px(e){let t=e.indexOf(Dm)!==-1,[r,o]=e.split(t?Dm:fx);return{isEndInclusive:t,startAsString:r,endAsString:o}}var bx=" ",wx=",",UT=/^(f|fExcluded|cf|nf|nfExcluded|df|dfExcluded|mnf|mnfExcluded|lf)-(.+)$/,To={serialize:Ix,deserialize:qx},Mm={serialize:Ix,deserialize:qx},BT={f:!0,fExcluded:!0,lf:!0,cf:!0,nf:!0,nfExcluded:!0,df:!0,dfExcluded:!0,mnf:!0,mnfExcluded:!0};function Ix(e){return ZT(yx(_T)(e))}function _T(e){let[t,r]=e;return Ex(t)?t==="sortCriteria"?WT(r)?$T(t,r):"":Su(t)&&!gx(t)?hx(r)?xx(t,r):"":t==="nf"||t==="df"||t==="mnf"?Sx(r)?Rx(t,r):"":r!==void 0?Nm(t,r):"":""}function $T(e,t){return Nm(e,zT(t))}function zT(e){return e?e.by==="relevance"?"relevance":e.fields.map(t=>`${t.name}${bx}${t.direction}`).join(wx):""}function Ex(e){return HT(e)||Su(e)}function WT(e){return!ra(e)||!("by"in e)?!1:e.by==="relevance"?!0:e.by==="fields"&&"fields"in e&&Ku(e.fields)?e.fields.every(t=>ra(t)&&"name"in t&&typeof t.name=="string"&&("direction"in t&&(t.direction==="asc"||t.direction==="desc")||!("direction"in t))):!1}function HT(e){return e in{q:!0,sortCriteria:!0,page:!0,perPage:!0}}function qx(e){return e.split(qo).map(Fx).map(o=>vx(o,UT)).filter(GT).map(KT).reduce((o,n)=>{let[a,i]=n;if(Su(a)){let s={...o[a],...i};return{...o,[a]:s}}if(a==="sortCriteria"){let s=YT(i);return{...o,[a]:s}}return{...o,[a]:i}},{})}function Su(e){return e in BT}function GT(e){let t=Ex(e[0]),r=e.length===2;return t&&r}function KT(e){let[t,r]=e;return t==="page"||t==="perPage"?[t,parseInt(r)]:Su(t)?[t,Ax(r)]:[t,decodeURIComponent(r)]}function YT(e){if(e==="relevance")return bt();let t=e.split(wx);if(t.length)return t.reduce((r,o)=>{let n=o.trim().split(bx);if(n.length!==2)return r;let a=n[0].toLowerCase(),i=n[1].toLowerCase();return r.fields.push({name:a,direction:i}),r},Vi([]))}var Tx=e=>e.startsWith("mnf-"),JT=e=>e.startsWith("nf-")||Tx(e);function ZT(e){let t=new Set,r=new Set,o=[];for(let n of e.split(qo)){if(!JT(n)){o.push(n);continue}let a=n.replace(/^mnf-/,"nf-");if(!t.has(a)){t.add(a),r.add(n);continue}Tx(n)&&(r.delete(a),r.add(n))}return o.push(...r),o.join(qo)}function Qm(e,t){if(!XT(e))throw $;let{dispatch:r}=e,o=Ie(t.facetId),n=Xn(e,{options:{facetId:o,...t.facetSearch},select:()=>{},isForFieldSuggestions:!0}),a=()=>e[U],i=W(e),s=N(l=>l.fieldSuggestionsOrder,l=>l.find(m=>m.facetId===t.facetId)),u=N(l=>l.categoryFacetSearchSet[o],l=>({isLoading:l.isLoading,moreValuesAvailable:l.response.moreValuesAvailable,query:l.options.query,values:l.response.values})),{clear:c}=n;return{...i,clear:c,updateQuery:l=>{n.updateText(l),n.search()},getSearchParameters:l=>To.serialize({q:u(a()).query,cf:{[t.facetId]:[...l.path,l.rawValue]}}),select:l=>{r(Ce()),r(rt({facetId:t.facetId,value:l})),r(pe({query:e[U].categoryFacetSearchSet[o].options.query})),r(t.fetchProductsActionCreator())},get state(){let{displayName:l,field:m,facetId:p}=s(a());return{displayName:l,field:m,facetId:p,...u(a())}},type:"hierarchical"}}function XT(e){return e.addReducers({categoryFacetSearchSet:$r,commerceFacetSet:oe,commerceQuery:Re,fieldSuggestionsOrder:pt}),!0}function Ox(e,t){let{dispatch:r}=e,{options:o,select:n,exclude:a,isForFieldSuggestions:i,executeFacetSearchActionCreator:s,executeFieldSuggestActionCreator:u}=t,{facetId:c}=o,l=()=>"state"in e?e.state.facetSearchSet[c]:e[U].facetSearchSet[c];r(es(o));let m=su(e,{options:o,getFacetSearch:l,isForFieldSuggestions:i,executeFacetSearchActionCreator:s,executeFieldSuggestActionCreator:u});return{...m,select(p){r(Ye({facetId:c,value:p})),n(p)},exclude(p){r(yt({facetId:c,value:p})),a(p)},singleSelect(p){r(ze(c)),r(Ye({facetId:c,value:p})),n(p)},singleExclude(p){r(ze(c)),r(yt({facetId:c,value:p})),a(p)},get state(){let{values:p}=m.state;return{...m.state,values:p.map(({count:d,displayValue:f,rawValue:y})=>({count:d,displayValue:f,rawValue:y}))}}}}function Cu(e,t){if(!eO(e))throw $;let{state:r,updateCaptions:o,...n}=Ox(e,{...t,executeFacetSearchActionCreator:a=>ut({facetId:a,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:a=>We({facetId:a,facetSearchType:t.options.type})});return{...n}}function eO(e){return e.addReducers({facetSearchSet:Nn}),!0}function Lm(e,t){if(!tO(e))throw $;let{dispatch:r}=e,o=Ie(t.facetId),n=Cu(e,{options:{facetId:o,...t.facetSearch},select:()=>{},exclude:()=>{},isForFieldSuggestions:!0}),a=()=>e[U],i=W(e),s=N(l=>l.fieldSuggestionsOrder,l=>l.find(m=>m.facetId===t.facetId)),u=N(l=>l.facetSearchSet[o],l=>({isLoading:l.isLoading,moreValuesAvailable:l.response.moreValuesAvailable,query:l.options.query,values:l.response.values})),{clear:c}=n;return{...i,clear:c,updateQuery:l=>{n.updateText(l),n.search()},getSearchParameters:l=>To.serialize({q:u(a()).query,f:{[t.facetId]:[l.rawValue]}}),select:l=>{r(Ce()),r(Ye({facetId:t.facetId,value:l})),r(pe({query:e[U].facetSearchSet[o].options.query})),r(t.fetchProductsActionCreator())},get state(){let{displayName:l,field:m,facetId:p}=s(a());return{displayName:l,field:m,facetId:p,...u(a())}},type:"regular"}}function tO(e){return e.addReducers({commerceFacetSet:oe,commerceQuery:Re,facetSearchSet:Nn,fieldSuggestionsOrder:pt}),!0}function rO(e){if(!oO(e))throw $;let t={fetchProductsActionCreator:K,facetResponseSelector:Jn,isFacetLoadingResponseSelector:Zn,facetSearch:{type:"SEARCH"}},r=W(e),o=N(n=>n.fieldSuggestionsOrder,n=>n.map(({type:a,facetId:i})=>{switch(a){case"hierarchical":return Qm(e,{facetId:i,...t});default:return Lm(e,{facetId:i,...t})}}));return{...r,get filterSuggestions(){return o(e[U])},get state(){return e[U].fieldSuggestionsOrder}}}function oO(e){return e.addReducers({fieldSuggestionsOrder:pt}),!0}import{NumberValue as aO,Schema as iO}from"../../bueno/v1.1.0/bueno.esm.js";function kx(e,t,r){if(!nO(e))throw $;let o=1e3,n={selectionDelay:o,debounceWait:o,...t.options},a;return{select:_c(r,n.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,n.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function nO(e){return e.addReducers({configuration:Ne}),!0}function xu(e,t){let r=!1,o=()=>{let a=(m,p,d)=>`- Could not retrieve '${m}' analytics property from field${p.length>1?"s":""} '${p.join("', '")}'; fell back to ${d}.`,i=[],{ec_name:s,ec_promo_price:u,ec_price:c,ec_product_id:l}=t.options.product;if(s||i.push(a("name",["ec_gender"],"permanentid")),!u&&!c&&i.push(a("price",["ec_promo_price","ec_price"],"NaN")),l||i.push(a("productId",["ec_product_id"],"permanentid")),i.length!==0)return`Some required analytics properties could not be retrieved from the expected fields for product with permanentid '${t.options.product.permanentid}':

${i.join(`
`)}

Review the configuration of the above 'ec_'-prefixed fields in your index, and make sure they contain the correct metadata.`};return{...kx(e,t,()=>{r||(r=!0,e.dispatch(Yc({product:{name:t.options.product.ec_name??t.options.product.permanentid,price:t.options.product.ec_promo_price??t.options.product.ec_price??NaN,productId:t.options.product.ec_product_id??t.options.product.permanentid},position:t.options.product.position,responseId:t.options.product.responseId??t.responseIdSelector(e[U])})))}),warningMessage:o()}}var sO={searchBoxId:ne,cacheTimeout:new aO},cO=new iO(sO);function uO(e,t){if(!lO(e))throw $;let r=W(e),{dispatch:o}=e,n=()=>e[U],a={searchBoxId:t.options.searchBoxId||ro("instant-products-"),cacheTimeout:t.options.cacheTimeout||6e4};Le(e,cO,a,"buildInstantProducts");let i=a.searchBoxId;o(zn({id:i}));let s=()=>n().instantProducts[i],u=m=>s().cache[m],c=()=>s().q,l=()=>{let m=u(c());return m?m.isLoading?[]:m.products:[]};return{...r,updateQuery(m){if(!m)return;let p=u(m);(!p||!p.isLoading&&(p.error||Hc(p)))&&o(sn({id:i,q:m,cacheTimeout:a.cacheTimeout})),o(Wn({id:i,query:m}))},clearExpired(){o(_n({id:i}))},promoteChildToParent(m){o($n({child:m,id:i,query:c()}))},interactiveProduct(m){return xu(e,{...m,responseIdSelector:()=>s().cache[c()].searchUid})},get state(){let m=c(),p=u(m);return{query:m,isLoading:p?.isLoading||!1,error:p?.error||null,products:l(),totalCount:p?.totalCountFiltered||0}}}}function lO(e){return e.addReducers({instantProducts:Gc}),!0}function Vx(e){if(!dO(e))throw $;let t=W(e),r=()=>e[U].didYouMean;return{...t,applyCorrection(){e.dispatch(pe({query:this.state.queryCorrection.correctedQuery})),e.dispatch(K())},get state(){let o=r();return{originalQuery:o.originalQuery,wasCorrectedTo:o.wasCorrectedTo,queryCorrection:o.queryCorrection,hasQueryCorrection:o.queryCorrection.correctedQuery!=="",wasAutomaticallyCorrected:o.wasCorrectedTo!==""}}}}function dO(e){return e.addReducers({didYouMean:Zi}),!0}var Um={regular:{toggleSelectActionCreator:mt,toggleExcludeActionCreator:dt},numericalRange:{toggleSelectActionCreator:He,toggleExcludeActionCreator:Ge},dateRange:{toggleSelectActionCreator:st,toggleExcludeActionCreator:ct},location:{toggleSelectActionCreator:lt},hierarchical:{toggleSelectActionCreator:Oe}};function jx(e,t){if(!mO(e))throw $;let r=W(e),{dispatch:o}=e,n=c=>({facetId:c.facetId,facetDisplayName:c.displayName,field:c.field,type:c.type,values:c.type==="hierarchical"?i(c):a(c)}),a=c=>c.values.filter(l=>l.state!=="idle").map(l=>({value:l,deselect:()=>{l.state==="selected"?(o(Um[c.type].toggleSelectActionCreator({facetId:c.facetId,selection:l})),c.type!=="location"&&o(po({facetId:c.facetId,freezeCurrentValues:!1})),o(t.fetchProductsActionCreator())):l.state==="excluded"&&c.type!=="location"&&(o(Um[c.type].toggleExcludeActionCreator({facetId:c.facetId,selection:l})),o(po({facetId:c.facetId,freezeCurrentValues:!1})),o(t.fetchProductsActionCreator()))}})),i=c=>{let l=At(c.values),m=l.length>0?l[l.length-1]:void 0;return m===void 0?[]:[{value:m,deselect:()=>{o(Um.hierarchical.toggleSelectActionCreator({facetId:c.facetId})),o(t.fetchProductsActionCreator())}}]},s=c=>!c||c.values.length===0?!1:c.type==="hierarchical"?At(c.values).length>0:c.values.some(l=>l.state!=="idle"),u=N(c=>c.facetOrder,c=>{let l=c.flatMap(m=>{let p=t.facetResponseSelector(e[U],m);return s(p)?[n(p)]:[]});return{facetBreadcrumbs:l,hasBreadcrumbs:l.length>0}});return{...r,deselectAll:()=>{o(Ce()),o(t.fetchProductsActionCreator())},get state(){return u(e[U])}}}function mO(e){return e.addReducers({facetOrder:Bt,commerceFacetSet:oe}),!0}var Dx=N((e,t)=>({facetSearchSelector:e.categoryFacetSearchSet[t]}),({facetSearchSelector:e})=>e);function Nx(e,t){let r=_t(e,{options:{...t,toggleSelectActionCreator:Nt}}),{deselectAll:o,isValueSelected:n,subscribe:a,toggleSelect:i}=r,{dispatch:s}=e,{facetId:u}=t,c=Xn(e,{options:{facetId:u,...t.facetSearch},select:()=>{s(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),l=()=>iu(e[U],u),m=p=>{let d=p.find(f=>f.state==="selected");if(d)return d.children;for(let f of p)if(f.children.length>0){let y=m(f.children);if(y!==f.children)return y}return p};return{deselectAll:o,isValueSelected:n,subscribe:a,toggleSelect:i,showMoreValues(){let{initialNumberOfValues:p,values:d,numberOfValues:f}=l(),y=m(d);if(!p&&!f)return;let S=y.length+(p??f);s(vo({facetId:u,numberOfValues:S})),s(t.fetchProductsActionCreator())},showLessValues(){let d=l().initialNumberOfValues??1;s(vo({facetId:u,numberOfValues:d})),s(t.fetchProductsActionCreator())},facetSearch:c,get state(){return pO(r.state,Dx(e[U],u),l())},type:"hierarchical"}}var pO=(e,t,r)=>{let{values:o}=e,n=At(o),a=n.length?n[n.length-1]:void 0,i=r?.initialNumberOfValues,s=!!i&&(a?i<a.children.length:i<(r.numberOfValues??e.values.length)),u=a?a.moreValuesAvailable:e.canShowMoreValues;return{...e,activeValue:a,canShowLessValues:s,canShowMoreValues:u,facetSearch:{isLoading:t?.isLoading??!1,moreValuesAvailable:t?.response.moreValuesAvailable??!1,query:t?.options.query??"",values:t?.response.values??[]},hasActiveValues:!!a,selectedValueAncestry:n,type:"hierarchical",values:o}};function Mx(e,t){if(!fO(e))throw $;let r=W(e),{dispatch:o}=e,n=N([i=>i.facetOrder,i=>i.commerceFacetSet],(i,s)=>i.map(u=>a(s,u))),a=N((i,s)=>({facetId:s,type:i[s].request.type}),({type:i,facetId:s})=>{switch(i){case"dateRange":return t.buildDateFacet(e,{facetId:s});case"hierarchical":return t.buildCategoryFacet(e,{facetId:s});case"numericalRange":return t.buildNumericFacet(e,{facetId:s});case"regular":return t.buildRegularFacet(e,{facetId:s});case"location":return t.buildLocationFacet(e,{facetId:s})}});return{...r,deselectAll:()=>{o(Ce()),o(t.fetchProductsActionCreator())},get facets(){return n(e[U])},get state(){return e[U].facetOrder}}}function fO(e){return e.addReducers({facetOrder:Bt,commerceFacetSet:oe}),!0}function Qx(e,t){let{toggleSingleExclude:r,toggleExclude:o,isValueExcluded:n,...a}=_t(e,{options:{...t,toggleSelectActionCreator:lt}});return{...a,get state(){return gO(a.state)},type:"location"}}var gO=e=>({...e,type:"location"});var Lx=N((e,t)=>e.manualNumericFacetSet[t]?.manualRange,e=>e);function Ux(e,t){let r=_t(e,{options:{...t,toggleSelectActionCreator:He,toggleExcludeActionCreator:Ge}});if(!yO(e))throw $;let{dispatch:o}=e,{facetId:n,fetchProductsActionCreator:a}=t;return{...r,setRanges(i){i.forEach(s=>{o(Mr({facetId:n,...s}))}),o(a())},get state(){let i=t.facetResponseSelector(e[U],n);return hO(r.state,i?.type==="numericalRange"?i:void 0,Lx(e[U],n))},type:"numericalRange"}}function yO(e){return e.addReducers({manualNumericFacetSet:Pc}),!0}var hO=(e,t,r)=>{let o=t?.type==="numericalRange"?t:void 0;return{...e,...o?.domain&&{domain:{min:o.domain.min,max:o.domain.max}},...r&&{manualRange:r},type:"numericalRange"}};var Bx=N((e,t)=>({facetSearchSelector:e.facetSearchSet[t]}),({facetSearchSelector:e})=>e);function _x(e,t){let r=_t(e,{options:{...t,toggleSelectActionCreator:mt,toggleExcludeActionCreator:dt}}),o=()=>r.state.facetId,{dispatch:n}=e,a=Cu(e,{options:{facetId:o(),...t.facetSearch},select:()=>{n(t.fetchProductsActionCreator())},exclude:()=>{n(t.fetchProductsActionCreator())},isForFieldSuggestions:!1});return{...r,facetSearch:a,get state(){return SO(r.state,Bx(e[U],o()))},type:"regular"}}var SO=(e,t)=>({...e,facetSearch:{isLoading:t?.isLoading??!1,moreValuesAvailable:t?.response.moreValuesAvailable??!1,query:t?.options.query??"",values:t?.response.values??[]},type:"regular"});import{NumberValue as CO,Schema as xO}from"../../bueno/v1.1.0/bueno.esm.js";var RO=new xO({pageSize:new CO({min:1,max:1e3,required:!1})});function $x(e,t){if(!FO(e))throw $;let r=W(e),{dispatch:o}=e;Le(e,RO,t.options,"buildCorePagination");let n=t.options?.slotId;t.options?.pageSize&&o(Kt({slotId:n,pageSize:t.options.pageSize})),n&&o(on({slotId:n}));let a=N(i=>n?i.commercePagination.recommendations[n]:i.commercePagination.principal,({perPage:i,...s})=>({pageSize:i??0,...s}));return{...r,get state(){return a(e[U])},selectPage(i){o(It({slotId:n,page:i})),o(t.fetchProductsActionCreator())},nextPage(){o(yr({slotId:n})),o(t.fetchProductsActionCreator())},previousPage(){o(hr({slotId:n})),o(t.fetchProductsActionCreator())},setPageSize(i){o(Kt({slotId:n,pageSize:i})),o(t.fetchProductsActionCreator())},fetchMoreProducts(){o(t.fetchMoreProductsActionCreator())}}}function FO(e){return e.addReducers({commercePagination:Mt}),!0}import{RecordValue as vk,Schema as Ak}from"../../bueno/v1.1.0/bueno.esm.js";function Bm(){return{}}var Wx=B(Bm(),e=>{e.addCase(yr,(t,r)=>vO(t,r.payload)).addCase(hr,(t,r)=>AO(t,r.payload)).addCase(It,(t,r)=>PO(t,r.payload)).addCase(Kt,(t,r)=>bO(t,r.payload)).addCase(xt,(t,r)=>wO(t,r.payload)).addCase(pe,(t,r)=>IO(t,r.payload)).addCase(Ce,t=>zx(t)).addCase(gr,t=>zx(t)).addCase(Oe,(t,r)=>EO(t,r.payload)).addCase(Nt,(t,r)=>qO(t,r.payload)).addCase(rt,(t,r)=>TO(t,r)).addCase(mt,(t,r)=>OO(t,r.payload)).addCase(dt,(t,r)=>VO(t,r.payload)).addCase(Ye,(t,r)=>kO(t,r)).addCase(yt,(t,r)=>jO(t,r)).addCase(He,(t,r)=>DO(t,r.payload)).addCase(Ge,(t,r)=>NO(t,r.payload)).addCase(Mr,(t,r)=>MO(t,r.payload)).addCase(st,(t,r)=>QO(t,r.payload)).addCase(ct,(t,r)=>LO(t,r.payload)).addCase(lt,(t,r)=>UO(t,r.payload)).addCase(le,Bm).addCase(je,(t,r)=>(t=r.payload,t)).addCase(fe,(t,r)=>(t=r.payload,t))}),vO=(e,t)=>{if(t?.slotId===void 0){if(e.page!==void 0){e.page++;return}e.page=1}},AO=(e,t)=>{if(t?.slotId===void 0){if(e.page!==void 0&&e.page>1){e.page--;return}e.page=void 0}},PO=(e,t)=>{t?.slotId===void 0&&(e.page=t.page>0?t.page:void 0)},bO=(e,t)=>{if(t?.slotId===void 0){if(e.page=void 0,t.pageSize===0){e.perPage=void 0;return}e.perPage=t.pageSize}},wO=(e,t)=>{e.page=void 0,e.sortCriteria=t},IO=(e,t)=>{e.page=void 0;let{query:r}=t;if(r===void 0||r.trim()===""){e.q=void 0;return}e.q=r},zx=e=>{e.page=void 0,e.cf=void 0,e.df=void 0,e.dfExcluded=void 0,e.lf=void 0,e.mnf=void 0,e.mnfExcluded=void 0,e.nf=void 0,e.nfExcluded=void 0,e.f=void 0,e.fExcluded=void 0},EO=(e,t)=>{let{facetId:r}=t;e.page=void 0,e.cf&&(delete e.cf[r],Object.keys(e.cf).length===0&&delete e.cf),e.df&&(delete e.df[r],Object.keys(e.df).length===0&&delete e.df),e.dfExcluded&&(delete e.dfExcluded[r],Object.keys(e.dfExcluded).length===0&&delete e.dfExcluded),e.lf&&(delete e.lf[r],Object.keys(e.lf).length===0&&delete e.lf),e.mnf&&(delete e.mnf[r],Object.keys(e.mnf).length===0&&delete e.mnf),e.mnfExcluded&&(delete e.mnfExcluded[r],Object.keys(e.mnfExcluded).length===0&&delete e.mnfExcluded),e.nf&&(delete e.nf[r],Object.keys(e.nf).length===0&&delete e.nf),e.nfExcluded&&(delete e.nfExcluded[r],Object.keys(e.nfExcluded).length===0&&delete e.nfExcluded),e.f&&(delete e.f[r],Object.keys(e.f).length===0&&delete e.f),e.fExcluded&&(delete e.fExcluded[r],Object.keys(e.fExcluded).length===0&&delete e.fExcluded)},qO=(e,t)=>{if(e.page=void 0,t.selection.state==="selected"){e.cf??(e.cf={}),delete e.cf[t.facetId],Object.keys(e.cf).length===0&&(e.cf=void 0);return}e.cf??(e.cf={}),e.cf[t.facetId]=t.selection.path},TO=(e,t)=>{let r=t.payload;e.page=void 0,e.cf??(e.cf={}),e.cf[r.facetId]=[...r.value.path,r.value.rawValue]},OO=(e,t)=>{switch(e.page=void 0,Oo(e,"fExcluded",e.fExcluded,t.facetId,t.selection.value),t.selection.state){case"selected":Oo(e,"f",e.f,t.facetId,t.selection.value);break;case"excluded":case"idle":e.f??(e.f={}),e.f[t.facetId]=[...e.f[t.facetId]??[],t.selection.value];break}},kO=(e,t)=>{let r=t.payload;e.page=void 0,Oo(e,"fExcluded",e.fExcluded,r.facetId,r.value.rawValue),e.f??(e.f={}),e.f[r.facetId]=[...e.f[r.facetId]??[],r.value.rawValue]},VO=(e,t)=>{switch(e.page=void 0,Oo(e,"f",e.f,t.facetId,t.selection.value),t.selection.state){case"excluded":Oo(e,"fExcluded",e.fExcluded,t.facetId,t.selection.value);break;case"selected":case"idle":e.fExcluded??(e.fExcluded={}),e.fExcluded[t.facetId]=[...e.fExcluded[t.facetId]??[],t.selection.value];break}},jO=(e,t)=>{let r=t.payload;e.page=void 0,Oo(e,"f",e.f,r.facetId,r.value.rawValue),e.fExcluded??(e.fExcluded={}),e.fExcluded[r.facetId]=[...e.fExcluded[r.facetId]??[],r.value.rawValue]},DO=(e,t)=>{switch(e.page=void 0,Fe(e,"mnf",e.mnf,t.facetId,t.selection),Fe(e,"mnfExcluded",e.mnfExcluded,t.facetId,t.selection),Fe(e,"nfExcluded",e.nfExcluded,t.facetId,t.selection),t.selection.state){case"selected":Fe(e,"nf",e.nf,t.facetId,t.selection);break;case"excluded":case"idle":e.nf??(e.nf={}),e.nf[t.facetId]=[...e.nf[t.facetId]??[],t.selection];break;default:break}},NO=(e,t)=>{switch(e.page=void 0,Fe(e,"mnf",e.mnf,t.facetId,t.selection),Fe(e,"mnfExcluded",e.mnfExcluded,t.facetId,t.selection),Fe(e,"nf",e.nf,t.facetId,t.selection),t.selection.state){case"excluded":Fe(e,"nfExcluded",e.nfExcluded,t.facetId,t.selection);break;case"selected":case"idle":e.nfExcluded??(e.nfExcluded={}),e.nfExcluded[t.facetId]=[...e.nfExcluded[t.facetId]??[],t.selection];break;default:break}},MO=(e,t)=>{e.page=void 0,Fe(e,"nf",e.nf,t.facetId,t),Fe(e,"nfExcluded",e.nfExcluded,t.facetId,t);let{facetId:r,...o}=t;switch(t.state){case"idle":Fe(e,"mnf",e.mnf,t.facetId,t),Fe(e,"mnfExcluded",e.mnfExcluded,t.facetId,t);break;case"excluded":Fe(e,"mnf",e.mnf,t.facetId,t),e.mnfExcluded??(e.mnfExcluded={}),e.mnfExcluded[t.facetId]=[o];break;case"selected":Fe(e,"mnfExcluded",e.mnfExcluded,t.facetId,t),e.mnf??(e.mnf={}),e.mnf[t.facetId]=[o];break;default:break}},QO=(e,t)=>{e.page=void 0,Fe(e,"dfExcluded",e.dfExcluded,t.facetId,t.selection);let{numberOfResults:r,...o}=t.selection;switch(t.selection.state){case"selected":Fe(e,"df",e.df,t.facetId,t.selection);break;case"excluded":case"idle":e.df??(e.df={}),e.df[t.facetId]=[...e.df[t.facetId]??[],o];break;default:break}},LO=(e,t)=>{e.page=void 0,Fe(e,"df",e.df,t.facetId,t.selection);let{numberOfResults:r,...o}=t.selection;switch(t.selection.state){case"excluded":Fe(e,"dfExcluded",e.dfExcluded,t.facetId,t.selection);break;case"selected":case"idle":e.dfExcluded??(e.dfExcluded={}),e.dfExcluded[t.facetId]=[...e.dfExcluded[t.facetId]??[],o];break;default:break}},UO=(e,t)=>{switch(e.page=void 0,t.selection.state){case"selected":Oo(e,"lf",e.lf,t.facetId,t.selection.value);break;case"excluded":case"idle":e.lf??(e.lf={}),e.lf[t.facetId]=[...e.lf[t.facetId]??[],t.selection.value];break}},Oo=(e,t,r,o,n)=>{r!==void 0&&r[o]!==void 0&&(r[o]=r[o].filter(a=>a!==n),r[o].length===0&&delete r[o],Object.keys(r).length===0&&(e[t]=void 0))},Fe=(e,t,r,o,n)=>{if(r!==void 0&&r[o]!==void 0){let a=r[o].filter(i=>i.start!==n.start||i.end!==n.end||i.endInclusive!==n.endInclusive);r[o]=a,r[o].length===0&&delete r[o],Object.keys(r).length===0&&(e[t]=void 0)}};var BO=Object.getOwnPropertyNames,_O=Object.getOwnPropertySymbols,$O=Object.prototype.hasOwnProperty;function Hx(e,t){return function(o,n,a){return e(o,n,a)&&t(o,n,a)}}function Ru(e){return function(r,o,n){if(!r||!o||typeof r!="object"||typeof o!="object")return e(r,o,n);var a=n.cache,i=a.get(r),s=a.get(o);if(i&&s)return i===o&&s===r;a.set(r,o),a.set(o,r);var u=e(r,o,n);return a.delete(r),a.delete(o),u}}function Gx(e){return BO(e).concat(_O(e))}var zO=Object.hasOwn||function(e,t){return $O.call(e,t)};function ko(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var WO="__v",HO="__o",GO="_owner",Kx=Object.getOwnPropertyDescriptor,Yx=Object.keys;function KO(e,t,r){var o=e.length;if(t.length!==o)return!1;for(;o-- >0;)if(!r.equals(e[o],t[o],o,o,e,t,r))return!1;return!0}function YO(e,t){return ko(e.getTime(),t.getTime())}function JO(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ZO(e,t){return e===t}function Jx(e,t,r){var o=e.size;if(o!==t.size)return!1;if(!o)return!0;for(var n=new Array(o),a=e.entries(),i,s,u=0;(i=a.next())&&!i.done;){for(var c=t.entries(),l=!1,m=0;(s=c.next())&&!s.done;){if(n[m]){m++;continue}var p=i.value,d=s.value;if(r.equals(p[0],d[0],u,m,e,t,r)&&r.equals(p[1],d[1],p[0],d[0],e,t,r)){l=n[m]=!0;break}m++}if(!l)return!1;u++}return!0}var XO=ko;function ek(e,t,r){var o=Yx(e),n=o.length;if(Yx(t).length!==n)return!1;for(;n-- >0;)if(!tR(e,t,r,o[n]))return!1;return!0}function fi(e,t,r){var o=Gx(e),n=o.length;if(Gx(t).length!==n)return!1;for(var a,i,s;n-- >0;)if(a=o[n],!tR(e,t,r,a)||(i=Kx(e,a),s=Kx(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function tk(e,t){return ko(e.valueOf(),t.valueOf())}function rk(e,t){return e.source===t.source&&e.flags===t.flags}function Zx(e,t,r){var o=e.size;if(o!==t.size)return!1;if(!o)return!0;for(var n=new Array(o),a=e.values(),i,s;(i=a.next())&&!i.done;){for(var u=t.values(),c=!1,l=0;(s=u.next())&&!s.done;){if(!n[l]&&r.equals(i.value,s.value,i.value,s.value,e,t,r)){c=n[l]=!0;break}l++}if(!c)return!1}return!0}function ok(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function nk(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function tR(e,t,r,o){return(o===GO||o===HO||o===WO)&&(e.$$typeof||t.$$typeof)?!0:zO(t,o)&&r.equals(e[o],t[o],o,o,e,t,r)}var ak="[object Arguments]",ik="[object Boolean]",sk="[object Date]",ck="[object Error]",uk="[object Map]",lk="[object Number]",dk="[object Object]",mk="[object RegExp]",pk="[object Set]",fk="[object String]",gk="[object URL]",yk=Array.isArray,Xx=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,eR=Object.assign,hk=Object.prototype.toString.call.bind(Object.prototype.toString);function Sk(e){var t=e.areArraysEqual,r=e.areDatesEqual,o=e.areErrorsEqual,n=e.areFunctionsEqual,a=e.areMapsEqual,i=e.areNumbersEqual,s=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,l=e.areSetsEqual,m=e.areTypedArraysEqual,p=e.areUrlsEqual;return function(f,y,S){if(f===y)return!0;if(f==null||y==null)return!1;var C=typeof f;if(C!==typeof y)return!1;if(C!=="object")return C==="number"?i(f,y,S):C==="function"?n(f,y,S):!1;var v=f.constructor;if(v!==y.constructor)return!1;if(v===Object)return s(f,y,S);if(yk(f))return t(f,y,S);if(Xx!=null&&Xx(f))return m(f,y,S);if(v===Date)return r(f,y,S);if(v===RegExp)return c(f,y,S);if(v===Map)return a(f,y,S);if(v===Set)return l(f,y,S);var h=hk(f);return h===sk?r(f,y,S):h===mk?c(f,y,S):h===uk?a(f,y,S):h===pk?l(f,y,S):h===dk?typeof f.then!="function"&&typeof y.then!="function"&&s(f,y,S):h===gk?p(f,y,S):h===ck?o(f,y,S):h===ak?s(f,y,S):h===ik||h===lk||h===fk?u(f,y,S):!1}}function Ck(e){var t=e.circular,r=e.createCustomConfig,o=e.strict,n={areArraysEqual:o?fi:KO,areDatesEqual:YO,areErrorsEqual:JO,areFunctionsEqual:ZO,areMapsEqual:o?Hx(Jx,fi):Jx,areNumbersEqual:XO,areObjectsEqual:o?fi:ek,arePrimitiveWrappersEqual:tk,areRegExpsEqual:rk,areSetsEqual:o?Hx(Zx,fi):Zx,areTypedArraysEqual:o?fi:ok,areUrlsEqual:nk};if(r&&(n=eR({},n,r(n))),t){var a=Ru(n.areArraysEqual),i=Ru(n.areMapsEqual),s=Ru(n.areObjectsEqual),u=Ru(n.areSetsEqual);n=eR({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return n}function xk(e){return function(t,r,o,n,a,i,s){return e(t,r,s)}}function Rk(e){var t=e.circular,r=e.comparator,o=e.createState,n=e.equals,a=e.strict;if(o)return function(u,c){var l=o(),m=l.cache,p=m===void 0?t?new WeakMap:void 0:m,d=l.meta;return r(u,c,{cache:p,equals:n,meta:d,strict:a})};if(t)return function(u,c){return r(u,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};var i={cache:void 0,equals:n,meta:void 0,strict:a};return function(u,c){return r(u,c,i)}}var zte=$t(),Wte=$t({strict:!0}),Hte=$t({circular:!0}),Gte=$t({circular:!0,strict:!0}),Kte=$t({createInternalComparator:function(){return ko}}),Yte=$t({strict:!0,createInternalComparator:function(){return ko}}),Jte=$t({circular:!0,createInternalComparator:function(){return ko}}),Zte=$t({circular:!0,createInternalComparator:function(){return ko},strict:!0});function $t(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,o=e.createInternalComparator,n=e.createState,a=e.strict,i=a===void 0?!1:a,s=Ck(e),u=Sk(s),c=o?o(u):xk(u);return Rk({circular:r,comparator:u,createState:n,equals:c,strict:i})}function rR(e,t,r=(o,n)=>o===n){return e.length===t.length&&e.findIndex((o,n)=>!r(t[n],o))===-1}function Fk(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(o=>Vo(r,o))!==-1)}var Vo=$t({createCustomConfig:e=>({...e,areArraysEqual:Fk})});var Pk=e=>new Ak({parameters:new vk({options:{required:!0},values:e})});function oR(e,t){if(t.excludeDefaultParameters&&!bk(e))throw $;let r=N(a=>a.commerceParameters,a=>a),{dispatch:o}=e,n=W(e);return t.initialState&&($e(e,Pk(t.parametersDefinition),t.initialState,"buildCoreParameterManager"),o(t.restoreActionCreator(t.initialState.parameters))),{...n,synchronize(a){let i=t.activeParametersSelector(e[U]);Object.keys(a).length>0&&Vo(i,a)||(o(t.restoreActionCreator(a)),o(t.fetchProductsActionCreator()))},get state(){return{parameters:t.excludeDefaultParameters?r(e[U]):t.activeParametersSelector(e[U])}}}}function bk(e){return e.addReducers({commerceParameters:Wx}),!0}var nR=(e,t)=>{let r=W(e),{options:{numberOfProductsSelector:o,responseIdSelector:n,isLoadingSelector:a,errorSelector:i,pageSelector:s,perPageSelector:u,totalEntriesSelector:c,enrichSummary:l}}=t,m=()=>e[U],p=()=>s(m()),d=()=>u(m()),f=()=>c(m()),y=()=>!!n(m()),S=()=>y()&&f()>0,C=()=>S()?p()*d()+1:0,v=()=>S()?C()+(o(m())-1):0;return{...r,get state(){return{firstRequestExecuted:y(),firstProduct:C(),lastProduct:v(),totalNumberOfProducts:f(),hasProducts:S(),isLoading:a(m()),hasError:i(m())!==null,...l?l(m()):{}}}}};import{Schema as Qk,StringValue as Lk}from"../../bueno/v1.1.0/bueno.esm.js";import{NumberValue as aR,RecordValue as qk}from"../../bueno/v1.1.0/bueno.esm.js";var Tk=new aR({min:1,default:8,required:!1}),Ok=new aR({min:1,max:20,default:5,required:!1}),kk={desiredCount:Ok,numberOfValues:Tk},Tre=g("automaticFacet/setOptions",e=>F(e,kk)),Ore=g("automaticFacet/deselectAll",e=>F(e,Y)),Vk=k,iR=g("automaticFacet/toggleSelectValue",e=>F(e,{field:Vk,selection:new qk({values:jt})}));var Yre=B(br(),e=>{e.addCase(Xg,(t,r)=>{let o=_m(t),n=r.payload;t.defaultNumberOfResults=t.numberOfResults=n,t.firstResult=gi(o,n)}).addCase(ey,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(Lc,t=>{t.firstResult=0}).addCase(ty,(t,r)=>{let o=r.payload;t.firstResult=gi(o,t.numberOfResults)}).addCase(ws,(t,r)=>{let o=r.payload;t.firstResult=gi(o,t.numberOfResults)}).addCase(oy,t=>{let r=_m(t),o=Math.max(r-1,1);t.firstResult=gi(o,t.numberOfResults)}).addCase(ry,t=>{let r=_m(t),o=jk(t),n=Math.min(r+1,o);t.firstResult=gi(n,t.numberOfResults)}).addCase(xe.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(we,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(ie.fulfilled,(t,r)=>{let{response:o}=r.payload;t.totalCountFiltered=o.totalCountFiltered}).addCase(ze,t=>{Me(t)}).addCase(Pn,t=>{Me(t)}).addCase(ec,t=>{Me(t)}).addCase(wn,t=>{Me(t)}).addCase(yt,t=>{Me(t)}).addCase(Xs,t=>{Me(t)}).addCase(ox,t=>{Me(t)}).addCase(rx,t=>{Me(t)}).addCase(rt,t=>{Me(t)}).addCase(An,t=>{Me(t)}).addCase(bn,t=>{Me(t)}).addCase(Et,t=>{Me(t)}).addCase(mc,t=>{Me(t)}).addCase(yc,t=>{Me(t)}).addCase(Ye,t=>{Me(t)}).addCase(iR,t=>{Me(t)})});function Me(e){e.firstResult=br().firstResult}function _m(e){let{firstResult:t,numberOfResults:r}=e;return cR(t,r)}function jk(e){let{totalCountFiltered:t,numberOfResults:r}=e;return uR(t,r)}function gi(e,t){return(e-1)*t}function cR(e,t){return Math.round(e/t)+1}function uR(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}import{RecordValue as Nk,Schema as Mk}from"../../bueno/v1.1.0/bueno.esm.js";var Qoe=new Mk({parameters:new Nk({options:{required:!0},values:$s})});var lR=new Qk({fragment:new Lk});function dR(e,t){let r;function o(){r=t.requestIdSelector(e[U])}function n(){return r!==t.requestIdSelector(e[U])}$e(e,lR,t.initialState,"buildUrlManager");let a=W(e),i=t.initialState.fragment;o();let s=t.parameterManagerBuilder(e,{initialState:{parameters:t.serializer.deserialize(i)},excludeDefaultParameters:t.excludeDefaultParameters??!1});return{...a,subscribe(u){let c=()=>{let l=this.state.fragment;!Uk(t.serializer.deserialize,i,l)&&n()&&(i=l,u()),o()};return c(),e.subscribe(c)},get state(){return{fragment:t.serializer.serialize(s.state.parameters)}},synchronize(u){i=u;let c=t.serializer.deserialize(u);s.synchronize(c)}}}function Uk(e,t,r){if(t===r)return!0;let o=e(t),n=e(r);return Vo(o,n)}function mR(e,t){return{...fR(e,{...t,facetSearchType:"SEARCH"}),didYouMean(){return Vx(e)}}}function pR(e,t){return fR(e,{...t,facetSearchType:"LISTING"})}function fR(e,t){let{fetchProductsActionCreator:r,facetResponseSelector:o,isFacetLoadingResponseSelector:n,requestIdSelector:a,serializer:i,parametersDefinition:s,activeParametersSelector:u,restoreActionCreator:c,facetSearchType:l}=t;return{...$m(e,t),sort(m){return KC(e,{...m,fetchProductsActionCreator:r})},facetGenerator(){let m={fetchProductsActionCreator:r,facetResponseSelector:o,isFacetLoadingResponseSelector:n,facetSearch:{type:l}};return Mx(e,{buildRegularFacet:(p,d)=>_x(e,{...d,...m}),buildNumericFacet:(p,d)=>Ux(e,{...d,...m}),buildDateFacet:(p,d)=>GC(e,{...d,...m}),buildCategoryFacet:(p,d)=>Nx(e,{...d,...m}),buildLocationFacet:(p,d)=>Qx(e,{...d,...m}),fetchProductsActionCreator:r})},breadcrumbManager(){return jx(e,{facetResponseSelector:o,fetchProductsActionCreator:r})},urlManager(m){return dR(e,{...m,requestIdSelector:a,parameterManagerBuilder:(p,d)=>this.parameterManager(d),serializer:i})},parameterManager(m){return oR(e,{...m,parametersDefinition:s,activeParametersSelector:u,restoreActionCreator:c,fetchProductsActionCreator:r})}}}function $m(e,t){let{responseIdSelector:r,isLoadingSelector:o,errorSelector:n,numberOfProductsSelector:a,fetchProductsActionCreator:i,fetchMoreProductsActionCreator:s,slotId:u,pageSelector:c,perPageSelector:l,totalEntriesSelector:m,enrichSummary:p}=t;return{interactiveProduct(d){return xu(e,{...d,responseIdSelector:r})},pagination(d){return $x(e,{...d,options:{...d?.options,slotId:u},fetchProductsActionCreator:i,fetchMoreProductsActionCreator:s})},summary(){return nR(e,{options:{responseIdSelector:r,isLoadingSelector:o,errorSelector:n,numberOfProductsSelector:a,pageSelector:c,perPageSelector:l,totalEntriesSelector:m,enrichSummary:p}})}}}var gR=N((e,t)=>({state:e,facetId:t}),({state:e,facetId:t})=>{let r=e.productListing.facets.find(o=>o.facetId===t);if(r&&r.facetId in e.commerceFacetSet)return r}),yR=N(e=>({state:e}),({state:e})=>e.productListing.isLoading);function Bk(e){if(!_k(e))throw $;let t=W(e),{dispatch:r}=e,o=()=>e[U],n=pR(e,{responseIdSelector:ga,fetchProductsActionCreator:ae,fetchMoreProductsActionCreator:Dr,facetResponseSelector:gR,isFacetLoadingResponseSelector:yR,requestIdSelector:Tp,serializer:Mm,parametersDefinition:En,activeParametersSelector:ji,restoreActionCreator:je,isLoadingSelector:kp,errorSelector:Vp,pageSelector:ki,perPageSelector:sr,totalEntriesSelector:cr,numberOfProductsSelector:ya});return{...t,...n,get state(){let{products:a,error:i,isLoading:s,responseId:u}=o().productListing;return{products:a,error:i,isLoading:s,responseId:u}},promoteChildToParent(a){r(In({child:a}))},refresh:()=>r(ae()),executeFirstRequest(){ga(o())===""&&r(ae())}}}function _k(e){return e.addReducers({productListing:Vn,commerceContext:wt,configuration:Ne}),!0}function $k(e){return{view:t=>{e.dispatch(Kc(t))}}}import{ArrayValue as hR,BooleanValue as zk,NumberValue as SR,Schema as CR,StringValue as Wk}from"../../bueno/v1.1.0/bueno.esm.js";var Hk={queries:[]},Gk={maxLength:10,clearFilters:!0},Kk=new CR({queries:new hR({required:!0})}),Yk=new CR({maxLength:new SR({required:!0,min:1}),clearFilters:new zk});function Jk(e,t){Le(e,Yk,t?.options,"buildRecentQueriesList"),$e(e,Kk,t?.initialState,"buildRecentQueriesList")}function Zk(e,t){if(!Xk(e))throw $;let r=W(e),{dispatch:o}=e,n=()=>e[U],a={...Gk,...t?.options},i={...Hk,...t?.initialState};Jk(e,{options:a,initialState:i});let s={queries:i.queries,maxLength:a.maxLength};return o(mi(s)),{...r,get state(){let u=n();return{...u.recentQueries,analyticsEnabled:u.configuration.analytics.enabled}},clear(){o(tu())},updateRecentQueries(u){let c=new hR({required:!0,each:new Wk({required:!0}),min:1}).validate(u);if(c)throw new Error(c);o(mi({queries:u,maxLength:a.maxLength}))},executeRecentQuery(u){let c=new SR({required:!0,min:0,max:this.state.queries.length}).validate(u);if(c)throw new Error(c);let l={query:this.state.queries[u],clearFilters:a.clearFilters};o(an(l)),o(K())}}}function Xk(e){return e.addReducers({search:Qt,recentQueries:ru}),!0}function eV(e,t){if(!tV(e))throw $;$e(e,qh,t.options,"buildRecommendations");let r=W(e),{dispatch:o}=e,{slotId:n,productId:a}=t.options;o(On({slotId:n,productId:a}));let i=N(u=>u.recommendations[n],u=>u),s=$m(e,{slotId:n,responseIdSelector:u=>u.recommendations[n].responseId,fetchProductsActionCreator:()=>Ct({slotId:n}),fetchMoreProductsActionCreator:()=>Qr({slotId:n}),isLoadingSelector:u=>Oh(u,n),errorSelector:u=>u.recommendations[n].error,pageSelector:u=>qp(u,n),perPageSelector:u=>Ti(u,n),totalEntriesSelector:u=>Oi(u,n),numberOfProductsSelector:u=>ti(u,n)});return{...r,...s,promoteChildToParent(u){o(kn({child:u,slotId:n}))},get state(){return i(e[U])},refresh:()=>o(Ct({slotId:n,productId:a}))}}function tV(e){return e.addReducers({recommendations:jn}),!0}function rV(e){if(!oV(e))throw $;let t=W(e),{dispatch:r}=e,o=()=>e[U],n=mR(e,{responseIdSelector:ha,fetchProductsActionCreator:K,fetchMoreProductsActionCreator:Cr,facetResponseSelector:Jn,isFacetLoadingResponseSelector:Zn,requestIdSelector:$p,serializer:To,parametersDefinition:hc,restoreActionCreator:fe,activeParametersSelector:Kp,isLoadingSelector:Wp,errorSelector:Hp,pageSelector:ki,perPageSelector:sr,totalEntriesSelector:cr,numberOfProductsSelector:Sa,enrichSummary:Yp});return{...t,...n,get state(){return o().commerceSearch},promoteChildToParent(a){r(cn({child:a}))},executeFirstSearch(){ha(o())===""&&r(K())}}}function oV(e){return e.addReducers({commerceContext:wt,configuration:Ne,commerceSearch:Qt,commerceQuery:Re}),!0}var nV=B(Ve(),e=>e.addCase(vr,(t,r)=>({...t,...r.payload})).addCase(Rn,(t,r)=>{t.q=r.payload}).addCase(li,(t,r)=>{t.q=r.payload.expression}).addCase(xe.fulfilled,(t,r)=>r.payload?.query??t).addCase(we,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));import{BooleanValue as xR,NumberValue as aV,RecordValue as Fu,Schema as iV,StringValue as RR}from"../../bueno/v1.1.0/bueno.esm.js";var zm={open:new RR,close:new RR},Wm={id:k,numberOfSuggestions:new aV({min:0}),enableQuerySyntax:new xR,highlightOptions:new Fu({values:{notMatchDelimiters:new Fu({values:zm}),exactMatchDelimiters:new Fu({values:zm}),correctionDelimiters:new Fu({values:zm})}}),clearFilters:new xR},sV=new iV(Wm);function FR(e,t){return e?e.completions.map(r=>({highlightedValue:Ju(r.highlighted,t),rawValue:r.expression})):[]}import{Schema as cV}from"../../bueno/v1.1.0/bueno.esm.js";var vu={clearFilters:!0},{id:uV,highlightOptions:lV,clearFilters:dV}=Wm,Hm={id:uV,highlightOptions:lV,clearFilters:dV},vR=new cV(Hm);function Gm(e,t={}){if(!mV(e))throw $;let r=W(e),{dispatch:o}=e,n=()=>e[U],a=t.options?.id||ro("search_box"),i={id:a,highlightOptions:{...t.options?.highlightOptions},...vu,...t.options};Le(e,vR,i,"buildSearchBox"),o(Hn({id:a,query:n().commerceQuery.query??""})),o(qn({id:a}));let s=()=>n().querySet[i.id],u=async()=>{let c={query:s(),clearFilters:i.clearFilters};o(an(c)),o(K())};return{...r,updateText(c){o(bo({id:a,query:c})),this.showSuggestions()},clear(){o(bo({id:a,query:""})),o(Nr({id:a}))},showSuggestions(){o(De({id:a}))},selectSuggestion(c){o(Dt({id:a,expression:c})),u().then(()=>{o(Nr({id:a}))})},submit(){u(),o(Nr({id:a}))},get state(){let c=n().querySuggest[i.id],l=FR(c,i.highlightOptions),m=c?c.isLoading:!1;return{searchBoxId:a,value:s(),suggestions:l,isLoading:n().commerceSearch.isLoading,isLoadingSuggestions:m}}}}function mV(e){return e.addReducers({commerceQuery:Re,querySuggest:Io,configuration:Ne,querySet:wo,commerceSearch:Qt}),!0}function AR(){return{}}var bR=B(AR(),e=>e.addCase(Gn,(t,r)=>{let{id:o,redirectionUrl:n,overwrite:a}=r.payload;!a&&o in t||(t[o]=PR(n))}).addCase(Kn,(t,r)=>{let{id:o,redirectionUrl:n}=r.payload,a=t[o];a&&(a.defaultRedirectionUrl=n)}).addCase(Yn,(t,r)=>{let{id:o}=r.payload,n=t[o];if(n){t[o]=PR(n.defaultRedirectionUrl);return}}).addCase(Gr.pending,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!0)}).addCase(Gr.fulfilled,(t,r)=>{let o=r.payload,n=t[r.meta.arg.id];n&&(n.redirectTo=o||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(Gr.rejected,(t,r)=>{let o=t[r.meta.arg.id];o&&(o.isLoading=!1)}));function PR(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1}}import{BooleanValue as pV,Schema as fV,StringValue as gV}from"../../bueno/v1.1.0/bueno.esm.js";var wR=new fV({...Hm,redirectionUrl:new gV({required:!0,emptyAllowed:!1}),overwrite:new pV({required:!1})});function yV(e,t){if(!hV(e))throw $;let{dispatch:r}=e,o=()=>e[U],n=t.options.id||ro("standalone_search_box"),a={id:n,highlightOptions:{...t.options.highlightOptions},...vu,overwrite:!1,...t.options};Le(e,wR,a,"buildStandaloneSearchBox");let i=Gm(e,{options:a});return r(Gn({id:n,redirectionUrl:a.redirectionUrl,overwrite:a.overwrite})),{...i,updateText(s){i.updateText(s)},selectSuggestion(s){r(Dt({id:n,expression:s})),this.submit()},afterRedirection(){r(Yn({id:n}))},updateRedirectUrl(s){r(Kn({id:n,redirectionUrl:s}))},submit(){r(pe({query:this.state.value})),r(Gr({id:n}))},get state(){let u=o().commerceStandaloneSearchBoxSet[n];return{...i.state,redirectTo:u.redirectTo}}}}function hV(e){return e.addReducers({commerceQuery:Re,commerceStandaloneSearchBoxSet:bR,configuration:Ne,querySuggest:Io}),!0}function SV(e){if(!CV(e))throw $;let t=W(e),r=()=>e[U],o=r().triggers.notifications;return{...t,subscribe(n){let a=()=>{let i=!rR(o,this.state.notifications);o=this.state.notifications,i&&n()};return a(),e.subscribe(a)},get state(){return{notifications:r().triggers.notifications}}}}function CV(e){return e.addReducers({triggers:Ut}),!0}function xV(e){if(!RV(e))throw $;let t=W(e),{dispatch:r}=e,o=()=>e[U],n=()=>o().triggers.queryModification.newQuery,a=()=>o().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:n(),originalQuery:a(),wasQueryModified:n()!==""}},undo(){r(Sr({q:n()})),r(pe({query:a()})),r(K())}}}function RV(e){return e.addReducers({triggers:Ut,query:Re}),!0}function FV(e){if(!vV(e))throw $;let t=W(e),r=()=>e[U],o=r().triggers.redirectTo;return{...t,subscribe(n){let a=()=>{let i=o!==this.state.redirectTo;o=this.state.redirectTo,i&&this.state.redirectTo&&n()};return a(),e.subscribe(a)},get state(){return{redirectTo:r().triggers.redirectTo}}}}function vV(e){return e.addReducers({triggers:Ut}),!0}import{isArray as AV,isNullOrUndefined as Au}from"../../bueno/v1.1.0/bueno.esm.js";var Pu=(e,t)=>{let r=e;return Au(r[t])?Au(e.additionalFields[t])?null:e.additionalFields[t]:r[t]},PV=e=>t=>e.every(r=>!Au(Pu(t,r))),bV=e=>t=>e.every(r=>Au(Pu(t,r))),wV=(e,t)=>r=>{let o=IR(e,r);return t.some(n=>o.some(a=>`${a}`.toLowerCase()===n.toLowerCase()))},IV=(e,t)=>r=>{let o=IR(e,r);return t.every(n=>o.every(a=>`${a}`.toLowerCase()!==n.toLowerCase()))},IR=(e,t)=>{let r=Pu(t,e);return AV(r)?r:[r]},EV={getProductProperty:Pu,fieldsMustBeDefined:PV,fieldsMustNotBeDefined:bV,fieldMustMatch:wV,fieldMustNotMatch:IV};import{ArrayValue as qV,NumberValue as TV,Schema as OV,SchemaValidationError as kV,Value as ER}from"../../bueno/v1.1.0/bueno.esm.js";var VV=new OV({content:new ER({required:!0}),conditions:new ER({required:!0}),priority:new TV({required:!1,default:0,min:0}),fields:new qV({required:!1,each:k})});function qR(){let e=[],t=r=>{let o=VV.validate(r);if(!r.conditions.every(a=>a instanceof Function))throw new kV("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return o};return{registerTemplates(...r){r.forEach(o=>{let n={...t(o),fields:o.fields||[]};e.push(n)}),e.sort((o,n)=>n.priority-o.priority)},selectTemplate(r){let o=e.find(n=>n.conditions.every(a=>a(r)));return o?o.content:null},selectLinkTemplate(r){let o=e.find(n=>n.conditions.every(a=>a(r)));return o?o.linkContent:null}}}function jV(){return qR()}export{ef as HighlightUtils,EV as ProductTemplatesHelpers,Zp as Selectors,Pt as SortBy,_o as SortDirection,io as VERSION,Vv as buildCart,Qm as buildCategoryFilterSuggestions,Eq as buildCommerceEngine,Yq as buildContext,W as buildController,jr as buildDateRange,sT as buildFieldSuggestionsGenerator,Vi as buildFieldsSortCriterion,Lm as buildFilterSuggestions,rO as buildFilterSuggestionsGenerator,uO as buildInstantProducts,SV as buildNotifyTrigger,Bk as buildProductListing,jV as buildProductTemplatesManager,$k as buildProductView,xV as buildQueryTrigger,Zk as buildRecentQueriesList,eV as buildRecommendations,FV as buildRedirectionTrigger,bt as buildRelevanceSortCriterion,rV as buildSearch,Gm as buildSearchBox,yV as buildStandaloneSearchBox,rw as deserializeRelativeDate,il as getAnalyticsNextApiBaseUrl,cl as getCommerceApiBaseUrl,qe as getOrganizationEndpoint,wq as getSampleCommerceEngineConfiguration,u4 as loadCartActions,h4 as loadCategoryFacetSetActions,a4 as loadConfigurationActions,p4 as loadContextActions,R4 as loadCoreFacetActions,P4 as loadDateFacetActions,t6 as loadInstantProductsActions,E4 as loadLocationFacetActions,k4 as loadNumericFacetActions,a6 as loadPaginationActions,d6 as loadProductActions,g6 as loadProductListingActions,F6 as loadProductListingParametersActions,b6 as loadQueryActions,a8 as loadQuerySetActions,h8 as loadQuerySuggestActions,B8 as loadRecentQueriesActions,W8 as loadRecommendationsActions,N4 as loadRegularFacetActions,Y8 as loadSearchActions,a5 as loadSearchParametersActions,u5 as loadSortActions,L5 as loadStandaloneSearchBoxSetActions,$5 as loadTriggersActions,Mm as productListingSerializer,To as searchSerializer,Ro as validateRelativeDate};
//# sourceMappingURL=headless.esm.js.map
